<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL - 索引 | 摸鱼小屋</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="花开亦花散">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.392636e6.css" as="style"><link rel="preload" href="/assets/js/app.c76f4e10.js" as="script"><link rel="preload" href="/assets/js/3.e4073929.js" as="script"><link rel="preload" href="/assets/js/1.de47dd8b.js" as="script"><link rel="preload" href="/assets/js/41.ec6e0343.js" as="script"><link rel="prefetch" href="/assets/js/10.672405fe.js"><link rel="prefetch" href="/assets/js/11.6e2dfb5d.js"><link rel="prefetch" href="/assets/js/12.44b5d10a.js"><link rel="prefetch" href="/assets/js/13.516ca437.js"><link rel="prefetch" href="/assets/js/14.f05f455c.js"><link rel="prefetch" href="/assets/js/15.46eefb3e.js"><link rel="prefetch" href="/assets/js/16.debed7b4.js"><link rel="prefetch" href="/assets/js/17.aa7de940.js"><link rel="prefetch" href="/assets/js/18.6947f41e.js"><link rel="prefetch" href="/assets/js/19.284622d7.js"><link rel="prefetch" href="/assets/js/20.685ceaf3.js"><link rel="prefetch" href="/assets/js/21.352223ac.js"><link rel="prefetch" href="/assets/js/22.b8a2ced6.js"><link rel="prefetch" href="/assets/js/23.8bb3e093.js"><link rel="prefetch" href="/assets/js/24.1e097b88.js"><link rel="prefetch" href="/assets/js/25.27ff672f.js"><link rel="prefetch" href="/assets/js/26.1d50bb1b.js"><link rel="prefetch" href="/assets/js/27.4b507d27.js"><link rel="prefetch" href="/assets/js/28.d28f4937.js"><link rel="prefetch" href="/assets/js/29.2f951596.js"><link rel="prefetch" href="/assets/js/30.411d7492.js"><link rel="prefetch" href="/assets/js/31.85077f0c.js"><link rel="prefetch" href="/assets/js/32.74359a1c.js"><link rel="prefetch" href="/assets/js/33.8da1ce67.js"><link rel="prefetch" href="/assets/js/34.f866a563.js"><link rel="prefetch" href="/assets/js/35.89441f91.js"><link rel="prefetch" href="/assets/js/36.dc4af103.js"><link rel="prefetch" href="/assets/js/37.89c1b6a9.js"><link rel="prefetch" href="/assets/js/38.72d88ca0.js"><link rel="prefetch" href="/assets/js/39.2197b3ac.js"><link rel="prefetch" href="/assets/js/4.1c403fee.js"><link rel="prefetch" href="/assets/js/40.60cad086.js"><link rel="prefetch" href="/assets/js/42.a2b04a88.js"><link rel="prefetch" href="/assets/js/43.c435571d.js"><link rel="prefetch" href="/assets/js/44.86a13630.js"><link rel="prefetch" href="/assets/js/5.ba9c2a3c.js"><link rel="prefetch" href="/assets/js/6.7bc1a28c.js"><link rel="prefetch" href="/assets/js/7.7d67996f.js"><link rel="prefetch" href="/assets/js/8.1e07915a.js"><link rel="prefetch" href="/assets/js/9.be53e664.js">
    <link rel="stylesheet" href="/assets/css/0.styles.392636e6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>摸鱼小屋</h3> <p class="description" data-v-59e6cb88>花开亦花散</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>易曦翰</span>
          
        <!---->
        2022
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/yixihan.png" alt="摸鱼小屋" class="logo"> <span class="site-name">摸鱼小屋</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/MySQL/" class="nav-link"><i class="undefined"></i>
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/RabbitMQ/" class="nav-link"><i class="undefined"></i>
  RabbitMQ
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程环境搭建/" class="nav-link"><i class="undefined"></i>
  编程环境搭建
</a></li><li class="dropdown-item"><!----> <a href="/categories/面经/" class="nav-link"><i class="undefined"></i>
  面经
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-gongju"></i>
      工具箱
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://xpdf.net/?s" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  PDF转Word
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  在线工具箱
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://openyyy.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  音乐格式转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.shopify.com/tools/logo-maker" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  logo 生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sms-activate.ru/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  虚拟短信接收
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://fanyi.phpstudyhelper.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  代码变量名称翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/yixihan.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    易曦翰
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>34</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>32</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/MySQL/" class="nav-link"><i class="undefined"></i>
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/RabbitMQ/" class="nav-link"><i class="undefined"></i>
  RabbitMQ
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程环境搭建/" class="nav-link"><i class="undefined"></i>
  编程环境搭建
</a></li><li class="dropdown-item"><!----> <a href="/categories/面经/" class="nav-link"><i class="undefined"></i>
  面经
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-gongju"></i>
      工具箱
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://xpdf.net/?s" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  PDF转Word
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  在线工具箱
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://openyyy.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  音乐格式转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.shopify.com/tools/logo-maker" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  logo 生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sms-activate.ru/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  虚拟短信接收
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://fanyi.phpstudyhelper.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  代码变量名称翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/blogs/面经/MySQL/MySQLMVCC.html" class="sidebar-link">MySQL - MVCC</a></li><li><a href="/blogs/面经/MySQL/MySQL事务.html" class="sidebar-link">MySQL - 事务</a></li><li><a href="/blogs/面经/MySQL/MySQL优化.html" class="sidebar-link">MySQL - 优化</a></li><li><a href="/blogs/面经/MySQL/MySQL日志.html" class="sidebar-link">MySQL - 日志</a></li><li><a href="/blogs/面经/MySQL/MySQL索引.html" class="active sidebar-link">MySQL - 索引</a></li><li><a href="/blogs/面经/MySQL/MySQL面经.html" class="sidebar-link">MySQL - 面经</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>MySQL - 索引</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>易曦翰</span>
          
        <!---->
        2022
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">MySQL - 索引</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>易曦翰</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2022/10/30</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>MySQL</span><span class="tag-item" data-v-8a445198>面经</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="mysql-索引"><a href="#mysql-索引" class="header-anchor">#</a> MySQL - 索引</h1> <h2 id="索引概念"><a href="#索引概念" class="header-anchor">#</a> 索引概念</h2> <p><strong>索引是一种用于快速查询和检索数据的数据结构</strong></p> <p>索引的作用就相当于目录的作用</p> <blockquote><p>常见索引数据结构</p></blockquote> <ul><li>B 树</li> <li>B+ 树</li> <li>Hash</li></ul> <h2 id="索引的优缺点"><a href="#索引的优缺点" class="header-anchor">#</a> 索引的优缺点</h2> <blockquote><p>优点</p></blockquote> <ul><li>使用索引可以大大加快 <strong>数据的检索速度 (减少检索的数据量)</strong></li> <li>通过创建唯一性索引, 可以保证数据库表中每一行数据的唯一性 (主键索引)</li></ul> <blockquote><p>缺点</p></blockquote> <ul><li>创建索引和维护索引需要耗费许多时间, 对表中的数据进行更新的时候 (增删改), 如果涉及到索引, 索引也需要进行更新, 会降低 SQL 的执行效率</li> <li>索引也需要物理文件存储, 会耗费一定空间</li></ul> <blockquote><p>总结</p></blockquote> <p>大多数情况下, 索引查询都是比全表查询要快的, 但是如果数据库的数据量不大, 那么使用索引也不一定能带来很大的提升</p> <h2 id="索引的底层数据结构"><a href="#索引的底层数据结构" class="header-anchor">#</a> 索引的底层数据结构</h2> <p>索引的底层数据结构主要为以下三种</p> <ul><li>Hash 表</li> <li>B 树</li> <li>B+ 树</li></ul> <p>目前大部分数据库系统及文件系统都采用 B-Tree 或其变种 B+Tree 作为索引结构.</p> <h3 id="hash表"><a href="#hash表" class="header-anchor">#</a> Hash表</h3> <h4 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h4> <p>哈希表是键值对的集合, 通过键 (key) 即可快速取出对应的值 (value), 因此哈希表可以快速检索数据 (时间复杂度接近 O(1))</p> <h4 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h4> <p>哈希表之所以可以通过 key 快速取出 value, 原因在于 <strong>哈希算法 (散列算法)</strong></p> <p>通过哈希算法, 我们可以快速找到 key 对应的 value, 找到了 index 也就找到了对应的 value</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>hash <span class="token operator">=</span> hashfunc <span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
index <span class="token operator">=</span> hash <span class="token operator">%</span> array_size<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://typora-photo-yixihan.oss-cn-chengdu.aliyuncs.com/img/20210513092328171.png" alt="img"></p> <h4 id="优缺点"><a href="#优缺点" class="header-anchor">#</a> 优缺点</h4> <blockquote><p>优点</p></blockquote> <ul><li>检索速度非常快 (接近 O(1))</li></ul> <blockquote><p>缺点</p></blockquote> <ul><li>存在哈希冲突问题</li> <li><strong>不支持顺序和范围查询</strong></li></ul> <h3 id="b-树"><a href="#b-树" class="header-anchor">#</a> B 树</h3> <h4 id="简介-2"><a href="#简介-2" class="header-anchor">#</a> 简介</h4> <p>B 树也称为 B- 树, 全称为 <strong>多路平衡查找树</strong></p> <p>其中 B 树中的 B 是 平衡 (Balanced) 的意思</p> <h4 id="原理-2"><a href="#原理-2" class="header-anchor">#</a> 原理</h4> <p>一颗 m 阶的 B 树定义如下 :</p> <ul><li>每个节点最多有 m - 1个关键字</li> <li>根节点最少可以只有一个关键字</li> <li>非根节点至少有 Math.ceil (m / 2) - 1 个关键字</li> <li>每个节点中的关键字都按照从小到大的顺序排列, 每个关键字的左子树中所有的关键字都小于它, 而右子树中的所有关键字都大于它</li> <li>所有叶子节点都位于同一层, 或者说根节点到每个叶子节点的长度都相同</li></ul> <p><img src="https://typora-photo-yixihan.oss-cn-chengdu.aliyuncs.com/img/834468-20180406232634472-395289491.png" alt="clip_image002"></p> <p>上图是一颗阶数为4的B树. 在实际应用中的 B 树的阶数 m 都非常大 (通常大于100), 所以即使存储大量的数据, B树的高度仍然比较小. 每个结点中存储了关键字 (key) 和关键字对应的数据 (data), 以及孩子结点的指针. <strong>我们将一个 key 和其对应的 data 称为一个记录</strong>. 在数据库中我们将 B 树作为索引结构, 可以加快查询速速, 此时 B 树中的 key 就表示键, 而 data 表示了这个键对应的条目在硬盘上的逻辑地址</p> <h3 id="b-树-2"><a href="#b-树-2" class="header-anchor">#</a> B+ 树</h3> <h4 id="简介-3"><a href="#简介-3" class="header-anchor">#</a> 简介</h4> <p>B+ 树是 B 树的一种变体</p> <h4 id="原理-3"><a href="#原理-3" class="header-anchor">#</a> 原理</h4> <p>一颗 B+ 树的定义如下 :</p> <ul><li>关键字个数比孩子节点数小 1</li> <li>B+ 树包含两种类型的节点 : 内部节点 (索引节点) 和叶子节点.
<ul><li>根节点本身既可以是内部节点, 也可以是叶子节点</li> <li>根节点的关键字最少可以只有一个</li></ul></li> <li>B+ 树与 B 树最大的不同是内部节点不保存数据, 只用于索引, 所有数据都保存在叶子节点中</li> <li>m 阶 B+ 树表示了内部节点最多有 m - 1 个关键字 (或者说内部节点最多有 m 个子树), 阶段 m 同时限制了叶子节点最多存储 m - 1 个数据</li> <li>内部节点中 key 都按照从小到大的顺序排序, 对于内部节点的一个 key, 左子树中所有 key 都小于它, 右子树中所有 key 都大于它. 叶子节点中的数据也按照 key 的大小排列</li> <li>每个叶子节点都存有相邻叶子节点的指针, 叶子节点本身依关键字的大小自小而大顺序链接</li></ul> <p><img src="https://typora-photo-yixihan.oss-cn-chengdu.aliyuncs.com/img/834468-20180406232854940-1019144331.png" alt="clip_image039"></p> <h3 id="b-树和-b-树的异同"><a href="#b-树和-b-树的异同" class="header-anchor">#</a> B 树和 B+ 树的异同</h3> <ul><li>B 树中所有节点既存放键 (key), 也存放 数据(data), 而 B+ 树中只有叶子节点存放 key 和 data, 其他节点只存放 key</li> <li>B 树的叶子节点都是独立的, 而 B+ 树的叶子节点有一条引用链指向与它相邻的叶子节点</li> <li>B 树的索引过程相当于对范围内的每个关键字做二分查找, 可能还没到达叶子节点, 检索就结束了, 而 B+ 树的检索效率就很稳定了, 任何查找都是从根节点到叶子节点的过程, 叶子节点的顺序检索很明显</li></ul> <blockquote><p>B 树 和 B+ 树的相关博客</p></blockquote> <p><a href="https://www.cnblogs.com/nullzx/p/8729425.html" target="_blank" rel="noopener noreferrer">B 树 和 B+ 树的插入删除详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="myisam-和-innodb-对于-b-树实现方式"><a href="#myisam-和-innodb-对于-b-树实现方式" class="header-anchor">#</a> MyISAM 和 InnoDB 对于 B+ 树实现方式</h3> <blockquote><p>MyISAM</p></blockquote> <p>MyISAM 引擎中, B+Tree 叶节点的 data 域存放的是数据记录的地址. 在索引检索的时候, 首先按照 B+Tree 搜索算法搜索索引, 如果指定的 Key 存在, 则取出其 data 域的值, 然后以 data 域的值为地址读取相应的数据记录. <strong>这被称为 &quot;非聚簇索引&quot;</strong></p> <blockquote><p>InnoDB</p></blockquote> <p>InnoDB 引擎中, 其数据文件本身就是索引文件. 相比 MyISAM, 索引文件和数据文件是分离的, 其表数据文件本身就是按 B+Tree 组织的一个索引结构, 树的叶节点 data 域保存了完整的数据记录. 这个索引的 key 是数据表的主键, 因此 InnoDB 表数据文件本身就是主索引. <strong>这被称为 &quot;聚簇索引（或聚集索引）&quot;</strong></p> <p>而其余的索引都作为辅助索引, 辅助索引的 data 域存储相应记录主键的值而不是地址, 这也是和 MyISAM 不同的地方. 在根据主索引搜索时, 直接找到 key 所在的节点即可取出数据；在根据辅助索引查找时, 则需要先取出主键的值, 再走一遍主索引.  因此, 在设计表的时候, 不建议使用过长的字段作为主键, 也不建议使用非单调的字段作为主键, 这样会造成主索引频繁分裂</p> <h2 id="索引类型"><a href="#索引类型" class="header-anchor">#</a> 索引类型</h2> <h3 id="主键索引-primary-key"><a href="#主键索引-primary-key" class="header-anchor">#</a> 主键索引 (Primary Key)</h3> <p>数据库的主键列使用的索引就是主键索引</p> <p>一张数据表只能有一个主键, 并且 <strong>主键不能为 null, 不能重复</strong></p> <p>在 MySQL 的 InnoDB 的表中, 当没有显示的指定表的主键时, InnoDB 会自动先检查表中是否有唯一索引且不允许存在null值的字段, 如果有, 则选择该字段为默认的主键, 否则 InnoDB 将会自动创建一个 6Byte 的自增主键</p> <h3 id="二级索引-辅助索引"><a href="#二级索引-辅助索引" class="header-anchor">#</a> 二级索引 (辅助索引)</h3> <p><strong>二级索引也称为辅助索引, 是因为二级索引的叶子节点存储的数据是 ==主键==, 也就是说, 通过二级索引, 可以定位主键的位置</strong></p> <p>唯一索引, 普通索引, 前缀索引, 联合索引等索引都属于二级索引</p> <ul><li><strong>唯一索引 (Unique Key)</strong> : 唯一索引也是一种约束. <strong>唯一索引的属性列不能出现重复的数据, 但是允许数据为 null, 一张表允许创建多个唯一索引</strong>. 建立唯一索引的目的大部分都是为了该属性列的唯一性, 而非查询效率</li> <li><strong>普通索引 (Index)</strong> : <strong>普通索引的唯一作用就是为了快速查询数据, 一张表允许创建多个普通索引, 并允许数据重复和 null</strong></li> <li><strong>前缀索引 (Prefix)</strong> : 前缀索引只适合字符串类型的数据. 前缀索引是对文本的前几个字符创建索引, 相比普通索引建立的数据更小</li> <li><strong>全文索引 (Full Text)</strong> : 全文索引主要是为了检索大文本数据中的关键字信息, 是目前搜索引擎数据库使用的一种技术. Mysql 5.6 之前只有 MyISAM 引擎支持全文索引. 5.6之后 InnoDB 也支持了全文索引</li></ul> <blockquote><p>二级索引数据结构示例</p></blockquote> <p><img src="https://typora-photo-yixihan.oss-cn-chengdu.aliyuncs.com/img/20210420165254215.png" alt="img"></p> <h2 id="聚集索引与非聚集索引"><a href="#聚集索引与非聚集索引" class="header-anchor">#</a> 聚集索引与非聚集索引</h2> <h3 id="聚集索引"><a href="#聚集索引" class="header-anchor">#</a> 聚集索引</h3> <h4 id="简介-4"><a href="#简介-4" class="header-anchor">#</a> 简介</h4> <p><strong>聚集索引级索引结构和数据一起存放的索引, 主键索引属于聚集索引</strong></p> <p>在 MySQL 中, InnoDB 引擎的表的 <code>.ibd</code>文件就包含了该表的索引和数据, 对于 InnoDB 引擎表来说, 该表的索引 (B+ 树) 的每个非叶子节点存储索引, 叶子节点存储索引和索引对应的数据。</p> <h4 id="优缺点-2"><a href="#优缺点-2" class="header-anchor">#</a> 优缺点</h4> <blockquote><p>优点</p></blockquote> <p>聚集索引的查询速度非常的快, 因为整个 B+ 树本身就是一颗多叉平衡树, 叶子节点也都是有序的, 定位到索引的节点, 就相当于定位到了数据</p> <blockquote><p>缺点</p></blockquote> <ol><li><strong>依赖于有序的数据</strong> : 因为 B+ 树是多路平衡树, 如果索引的数据不是有序的, 那么就需要在插入的时候排序, 插入或查找的速度就会比较慢</li> <li><strong>更新代价大</strong> : 如果索引列的数据被修改时, 那么对应的索引也将会被修改, 且聚集索引的叶子节点还存放着数据, 修改代价肯定是比较大的, 所以对于主键索引来说, 主键一般都是不可修改的.</li></ol> <h3 id="非聚集索引"><a href="#非聚集索引" class="header-anchor">#</a> 非聚集索引</h3> <h4 id="简介-5"><a href="#简介-5" class="header-anchor">#</a> 简介</h4> <p><strong>非聚集索引即索引结构和数据分开存放的索引</strong></p> <p>二级索引属于非聚集索引</p> <p>非聚集索引的叶子节点不一定存放数据的指针, 因为二级索引的叶子节点存放的就是主键, 根据主键再会标查数据</p> <h4 id="优缺点-3"><a href="#优缺点-3" class="header-anchor">#</a> 优缺点</h4> <blockquote><p>优点</p></blockquote> <ol><li><strong>更新的代码比聚集索引小</strong> : 非聚集索引的更新代价没有聚集索引那么大, 因为非聚集索引的叶子节点是存放的主键或指针而非数据</li></ol> <blockquote><p>缺点</p></blockquote> <ol><li>跟聚集索引一样, <strong>非聚集索引也依赖于有序的数据</strong></li> <li>可能会<strong>二次查询 (回表)</strong> : 这应该就是非聚集索引最大的缺点了. 当查到索引对应的指针或主键后,可能还需根据指针或主键再到数据文件或表中查询</li></ol> <blockquote><p>MySQL 表文件截屏</p></blockquote> <p><img src="https://typora-photo-yixihan.oss-cn-chengdu.aliyuncs.com/img/20210420165311654.png" alt="img"></p> <blockquote><p>聚集索引和非聚集索引</p></blockquote> <p><img src="https://typora-photo-yixihan.oss-cn-chengdu.aliyuncs.com/img/20210420165326946.png" alt="img"></p> <h3 id="非聚集索引一定回表查询吗-覆盖索引"><a href="#非聚集索引一定回表查询吗-覆盖索引" class="header-anchor">#</a> 非聚集索引一定回表查询吗(覆盖索引)?</h3> <p><strong>非聚集索引不一定会回表查询</strong></p> <blockquote><p>示例</p></blockquote> <p>用户准备使用 SQL 查询用户名, 而用户名字段正好建立了索引</p> <p>那么这个索引的 key 本身就是 name, 查到对应的 name 直接返回就行了, 无需回表查询</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'yixihan'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而当用户准备使用 SQL 通过用户名查询电话, 而用户名自字段建立了索引且用户电话字段没有建立索引, 这时候就会回表查询</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> phone <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">&quot;yixihan&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="覆盖索引"><a href="#覆盖索引" class="header-anchor">#</a> 覆盖索引</h2> <h3 id="简介-6"><a href="#简介-6" class="header-anchor">#</a> 简介</h3> <p>如果一个索引包含 (或者说覆盖) 所有需要查询的字段的值, 我们就称之为 &quot;覆盖索引&quot;. 我们知道在 InnoDB 存储引擎中, 如果不是主键索引, 叶子节点存储的是主键 + 列值. 最终还是要&quot;回表&quot;, 也就是要通过主键再查找一次. 这样就会比较慢</p> <p>覆盖索引就是把要查询出的列和索引是对应的, 不做回表操作!</p> <p><strong>覆盖索引即需要查询的字段正好是索引的字段, 那么直接根据该索引, 就可以查到数据了,  而无需回表查询</strong></p> <p>如主键索引, 如果一条 SQL 需要查询主键, 那么正好根据主键索引就可以查到主键</p> <p>再如普通索引, 如果一条 SQL 需要查询 name, name 字段正好有索引,  那么直接根据这个索引就可以查到数据, 也无需回表</p> <blockquote><p>覆盖索引</p></blockquote> <p><img src="https://typora-photo-yixihan.oss-cn-chengdu.aliyuncs.com/img/20210420165341868.png" alt="img"></p> <h2 id="创建索引的注意事项"><a href="#创建索引的注意事项" class="header-anchor">#</a> 创建索引的注意事项</h2> <ol><li><p><strong>选择合适的字段创建索引</strong> :</p> <ol><li><strong>不为 null 的字段</strong> : 索引字段的数据应该尽量不为 null, 因为对于数据为 null 的字段, 数据库较难优化, 如果字段频繁被查询, 但又避免不了为 null, 建议使用 0, 1, true, false 这样语义较为清晰的短值或短字符作为替代</li> <li><strong>被频繁查询的数据</strong> : 创建索引的字段应该是查询操作非常频繁的字段</li> <li><strong>被作为条件查询的字段</strong> : 被作为 WHERE 条件查询的字段, 应该被考虑建立索引</li> <li><strong>频繁需要排序的字段</strong> : 索引已经排序, 这样查询可以利用索引的排序, 加快排序查询时间</li> <li><strong>被经常频繁用于连接的字段</strong> : 经常用于连接的字段可能是一些外键列, 对于外键列并不一定要建立外键, 只是说该列涉及到表与表的关系. 对于频繁被连接查询的字段, 可以考虑建立索引, 提高多表连接查询的效率</li></ol></li> <li><p><strong>被频繁更新的字段应该慎重建立索引</strong></p> <p>虽然索引能带来查询上的效率, 但是维护索引的成本也是不小的.  如果一个字段不被经常查询, 反而被经常修改, 那么就更不应该在这种字段上建立索引了</p></li> <li><p><strong>尽可能的考虑建立联合索引而非单列索引</strong></p> <p>因为索引是需要占用磁盘空间的, 可以简单理解为每个索引都对应着一颗 B+ 树. 如果一个表的字段过多, 索引过多, 那么当这个表的数据达到一个体量后, 索引占用的空间也是很多的, 且修改索引时, 耗费的时间也是较多的. 如果是联合索引, 多个字段在一个索引上, 那么将会节约很大磁盘空间, 且修改数据的操作效率也会提升</p></li> <li><p><strong>注意避免冗余索引</strong></p> <p>冗余索引指的是索引的功能相同, 能够命中索引 (a, b) 就肯定能命中索引 (a) , 那么索引 (a) 就是冗余索引. 如 (name,city) 和 (name) 这两个索引就是冗余索引, 能够命中前者的查询肯定是能够命中后者的在大多数情况下, 都应该尽量扩展已有的索引而不是创建新索引</p></li> <li><p><strong>考虑在字符串类型的字段上使用前缀索引代替普通索引</strong></p> <p>前缀索引仅限于字符串类型, 较普通索引会占用更小的空间, 所以可以考虑使用前缀索引带替普通索引</p></li></ol> <h2 id="使用索引的一些建议"><a href="#使用索引的一些建议" class="header-anchor">#</a> 使用索引的一些建议</h2> <ul><li>对于中到大型表索引都是非常有效的, 但是特大型表的话维护开销会很大, 不适合搭建索引</li> <li>避免 where 子句中对字段施加函数, 这样会造成无法命中索引</li> <li>在使用 InnoDB 时使用业务无关的自增主键作为主键, 即使用逻辑主键, 而不要使用业务主键.</li> <li>删除长期未使用的索引, 不用的索引的存在会造成不必要的性能损耗. MySQL 5.7 可以通过查询 sys 库中 schema_unused_indexes 视图来查询哪些索引从未被使用</li> <li>在使用 limit offset 查询缓慢时, 可以借助索引来提高性能</li></ul> <h2 id="mysql-为表字段添加索引"><a href="#mysql-为表字段添加索引" class="header-anchor">#</a> MySQL 为表字段添加索引</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 添加主键索引 (Primary Key)</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>table_name<span class="token punctuation">`</span></span> <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>column<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 添加唯一索引 (UNIQUE)</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>table_name<span class="token punctuation">`</span></span> <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>column<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 添加普通索引 (INDEX)</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>table_name<span class="token punctuation">`</span></span> <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> index_name <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>column<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 添加全文索引 (FULLTEXT)</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>table_name<span class="token punctuation">`</span></span> <span class="token keyword">ADD</span> FULLTEXT <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>column<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 添加多列索引</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>table_name<span class="token punctuation">`</span></span> <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> index_name <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>column1<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>column2<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>column3<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">2022/12/31 下午3:20:26</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blogs/面经/MySQL/MySQL日志.html" class="prev">
          MySQL - 日志
        </a></span> <span class="next"><a href="/blogs/面经/MySQL/MySQL面经.html">
          MySQL - 面经
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#索引概念" class="sidebar-link reco-side-索引概念" data-v-b57cc07c>索引概念</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#索引的优缺点" class="sidebar-link reco-side-索引的优缺点" data-v-b57cc07c>索引的优缺点</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#索引的底层数据结构" class="sidebar-link reco-side-索引的底层数据结构" data-v-b57cc07c>索引的底层数据结构</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#hash表" class="sidebar-link reco-side-hash表" data-v-b57cc07c>Hash表</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#b-树" class="sidebar-link reco-side-b-树" data-v-b57cc07c>B 树</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#b-树-2" class="sidebar-link reco-side-b-树-2" data-v-b57cc07c>B+ 树</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#b-树和-b-树的异同" class="sidebar-link reco-side-b-树和-b-树的异同" data-v-b57cc07c>B 树和 B+ 树的异同</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#myisam-和-innodb-对于-b-树实现方式" class="sidebar-link reco-side-myisam-和-innodb-对于-b-树实现方式" data-v-b57cc07c>MyISAM 和 InnoDB 对于 B+ 树实现方式</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#索引类型" class="sidebar-link reco-side-索引类型" data-v-b57cc07c>索引类型</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#主键索引-primary-key" class="sidebar-link reco-side-主键索引-primary-key" data-v-b57cc07c>主键索引 (Primary Key)</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#二级索引-辅助索引" class="sidebar-link reco-side-二级索引-辅助索引" data-v-b57cc07c>二级索引 (辅助索引)</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#聚集索引与非聚集索引" class="sidebar-link reco-side-聚集索引与非聚集索引" data-v-b57cc07c>聚集索引与非聚集索引</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#聚集索引" class="sidebar-link reco-side-聚集索引" data-v-b57cc07c>聚集索引</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#非聚集索引" class="sidebar-link reco-side-非聚集索引" data-v-b57cc07c>非聚集索引</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#非聚集索引一定回表查询吗-覆盖索引" class="sidebar-link reco-side-非聚集索引一定回表查询吗-覆盖索引" data-v-b57cc07c>非聚集索引一定回表查询吗(覆盖索引)?</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#覆盖索引" class="sidebar-link reco-side-覆盖索引" data-v-b57cc07c>覆盖索引</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#简介-6" class="sidebar-link reco-side-简介-6" data-v-b57cc07c>简介</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#创建索引的注意事项" class="sidebar-link reco-side-创建索引的注意事项" data-v-b57cc07c>创建索引的注意事项</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#使用索引的一些建议" class="sidebar-link reco-side-使用索引的一些建议" data-v-b57cc07c>使用索引的一些建议</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E7%B4%A2%E5%BC%95.html#mysql-为表字段添加索引" class="sidebar-link reco-side-mysql-为表字段添加索引" data-v-b57cc07c>MySQL 为表字段添加索引</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.c76f4e10.js" defer></script><script src="/assets/js/3.e4073929.js" defer></script><script src="/assets/js/1.de47dd8b.js" defer></script><script src="/assets/js/41.ec6e0343.js" defer></script>
  </body>
</html>
