<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL - 面经 | 摸鱼小屋</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="花开亦花散">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.392636e6.css" as="style"><link rel="preload" href="/assets/js/app.fa49d2c1.js" as="script"><link rel="preload" href="/assets/js/3.e4073929.js" as="script"><link rel="preload" href="/assets/js/1.de47dd8b.js" as="script"><link rel="preload" href="/assets/js/42.75cff1ef.js" as="script"><link rel="prefetch" href="/assets/js/10.672405fe.js"><link rel="prefetch" href="/assets/js/11.3f481dd0.js"><link rel="prefetch" href="/assets/js/12.c8f8d536.js"><link rel="prefetch" href="/assets/js/13.4d4618fb.js"><link rel="prefetch" href="/assets/js/14.beac459e.js"><link rel="prefetch" href="/assets/js/15.7ec128ed.js"><link rel="prefetch" href="/assets/js/16.400c0891.js"><link rel="prefetch" href="/assets/js/17.e88fa7ae.js"><link rel="prefetch" href="/assets/js/18.5c42faeb.js"><link rel="prefetch" href="/assets/js/19.30d92a08.js"><link rel="prefetch" href="/assets/js/20.685ceaf3.js"><link rel="prefetch" href="/assets/js/21.666de2a5.js"><link rel="prefetch" href="/assets/js/22.02a85236.js"><link rel="prefetch" href="/assets/js/23.5fc2aca8.js"><link rel="prefetch" href="/assets/js/24.1d4d3656.js"><link rel="prefetch" href="/assets/js/25.5a5cb261.js"><link rel="prefetch" href="/assets/js/26.80079ba5.js"><link rel="prefetch" href="/assets/js/27.4b507d27.js"><link rel="prefetch" href="/assets/js/28.d28f4937.js"><link rel="prefetch" href="/assets/js/29.2fb5cea3.js"><link rel="prefetch" href="/assets/js/30.411d7492.js"><link rel="prefetch" href="/assets/js/31.f4fa6ae1.js"><link rel="prefetch" href="/assets/js/32.63df52d9.js"><link rel="prefetch" href="/assets/js/33.a4cfa817.js"><link rel="prefetch" href="/assets/js/34.62e7a2bc.js"><link rel="prefetch" href="/assets/js/35.8b42f64a.js"><link rel="prefetch" href="/assets/js/36.0279340d.js"><link rel="prefetch" href="/assets/js/37.7a0a903b.js"><link rel="prefetch" href="/assets/js/38.83fa5f6b.js"><link rel="prefetch" href="/assets/js/39.460a20d0.js"><link rel="prefetch" href="/assets/js/4.1c403fee.js"><link rel="prefetch" href="/assets/js/40.94120e07.js"><link rel="prefetch" href="/assets/js/41.64e5ce62.js"><link rel="prefetch" href="/assets/js/43.c435571d.js"><link rel="prefetch" href="/assets/js/44.86a13630.js"><link rel="prefetch" href="/assets/js/5.ba9c2a3c.js"><link rel="prefetch" href="/assets/js/6.7bc1a28c.js"><link rel="prefetch" href="/assets/js/7.7d67996f.js"><link rel="prefetch" href="/assets/js/8.1e07915a.js"><link rel="prefetch" href="/assets/js/9.be53e664.js">
    <link rel="stylesheet" href="/assets/css/0.styles.392636e6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>摸鱼小屋</h3> <p class="description" data-v-59e6cb88>花开亦花散</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>易曦翰</span>
          
        <!---->
        2022
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/yixihan.png" alt="摸鱼小屋" class="logo"> <span class="site-name">摸鱼小屋</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/MySQL/" class="nav-link"><i class="undefined"></i>
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/面经/" class="nav-link"><i class="undefined"></i>
  面经
</a></li><li class="dropdown-item"><!----> <a href="/categories/RabbitMQ/" class="nav-link"><i class="undefined"></i>
  RabbitMQ
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程环境搭建/" class="nav-link"><i class="undefined"></i>
  编程环境搭建
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-gongju"></i>
      工具箱
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://xpdf.net/?s" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  PDF转Word
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  在线工具箱
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://openyyy.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  音乐格式转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.shopify.com/tools/logo-maker" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  logo 生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sms-activate.ru/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  虚拟短信接收
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://fanyi.phpstudyhelper.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  代码变量名称翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/yixihan.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    易曦翰
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>34</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>32</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/MySQL/" class="nav-link"><i class="undefined"></i>
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/面经/" class="nav-link"><i class="undefined"></i>
  面经
</a></li><li class="dropdown-item"><!----> <a href="/categories/RabbitMQ/" class="nav-link"><i class="undefined"></i>
  RabbitMQ
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程环境搭建/" class="nav-link"><i class="undefined"></i>
  编程环境搭建
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-gongju"></i>
      工具箱
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://xpdf.net/?s" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  PDF转Word
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  在线工具箱
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://openyyy.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  音乐格式转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.shopify.com/tools/logo-maker" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  logo 生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sms-activate.ru/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  虚拟短信接收
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://fanyi.phpstudyhelper.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  代码变量名称翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/blogs/面经/MySQL/MySQLMVCC.html" class="sidebar-link">MySQL - MVCC</a></li><li><a href="/blogs/面经/MySQL/MySQL事务.html" class="sidebar-link">MySQL - 事务</a></li><li><a href="/blogs/面经/MySQL/MySQL优化.html" class="sidebar-link">MySQL - 优化</a></li><li><a href="/blogs/面经/MySQL/MySQL日志.html" class="sidebar-link">MySQL - 日志</a></li><li><a href="/blogs/面经/MySQL/MySQL索引.html" class="sidebar-link">MySQL - 索引</a></li><li><a href="/blogs/面经/MySQL/MySQL面经.html" class="active sidebar-link">MySQL - 面经</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>MySQL - 面经</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>易曦翰</span>
          
        <!---->
        2022
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">MySQL - 面经</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>易曦翰</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2022/10/30</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>MySQL</span><span class="tag-item" data-v-8a445198>面经</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="mysql-面经"><a href="#mysql-面经" class="header-anchor">#</a> MySQL- 面经</h1> <h2 id="存储引擎"><a href="#存储引擎" class="header-anchor">#</a> 存储引擎</h2> <h3 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h3> <p><code>MySQL</code> 目前默认的存储引擎为 <code>InnoDB</code>, 并且 5.7, 8.0 版本只有 <code>InnoDB</code> 是事务性存储引擎</p> <blockquote><p>存储引擎相关的命令</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 查看 MySQL 提供的所有存储引擎</span>
<span class="token keyword">show</span> engines<span class="token punctuation">;</span>

<span class="token comment"># 查看 MySQL 当前默认的存储引擎</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%storage_engine%'</span><span class="token punctuation">;</span>

<span class="token comment"># 查看表的存储引擎</span>
<span class="token keyword">show</span> <span class="token keyword">table</span> <span class="token keyword">status</span> <span class="token operator">like</span> <span class="token string">&quot;table_name&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="myisam-与-innodb-的区别"><a href="#myisam-与-innodb-的区别" class="header-anchor">#</a> MyISAM 与 InnoDB 的区别</h3> <h4 id="简介-2"><a href="#简介-2" class="header-anchor">#</a> 简介</h4> <p><code>MySQL</code> 5.5 之前, <code>MyISAM</code> 存储引擎是 <code>MySQL</code> 的默认存储引擎</p> <p><code>MySQL</code> 5.5 之后, <code>InnoDB</code> 存储引擎是 <code>MySQL</code> 的默认存储引擎</p> <blockquote><p>MyISAM 存储引擎优缺点</p></blockquote> <p>优点 :</p> <ul><li>性能还行</li> <li>各种特性也不错 (全文索引, 压缩, 空间函数等)</li></ul> <p>缺点 :</p> <ul><li>不支持<strong>事务</strong></li> <li>不支持<strong>行级锁</strong></li> <li><strong>崩溃后无法安全恢复</strong></li></ul> <h4 id="myisam-与-innodb-的对比"><a href="#myisam-与-innodb-的对比" class="header-anchor">#</a> MyISAM 与 InnoDB 的对比</h4> <h5 id="是否支持行级锁"><a href="#是否支持行级锁" class="header-anchor">#</a> 是否支持行级锁</h5> <p><code>MyISAM</code> 只有表级锁 (table-level locking), 而 <code>InnoDB</code> 支持行级锁 (row-level locking) 和表级锁, 默认为行级锁</p> <blockquote><p>小贴士</p></blockquote> <p>也就是说, <code>MyISAM</code> 一锁就是锁住了整张表, 这不利于并发, 而 <code>InnoDB</code> 默认只锁需要的行, 并发效率更高</p> <h5 id="是否支持事务"><a href="#是否支持事务" class="header-anchor">#</a> 是否支持事务</h5> <p><code>MyISAM</code> 不支持事务</p> <p><code>InnoDB</code> 支持事务, 具有 <strong>提交 (commit)</strong> 和 <strong>回滚 (rollback)</strong> 事务的能力</p> <h5 id="是否支持外键"><a href="#是否支持外键" class="header-anchor">#</a> 是否支持外键</h5> <p><code>MyISAM</code> 不支持外键</p> <p><code>InnoDB</code> 支持外键</p> <h5 id="是否支持数据库异常崩溃后安全恢复"><a href="#是否支持数据库异常崩溃后安全恢复" class="header-anchor">#</a> 是否支持数据库异常崩溃后安全恢复</h5> <p><code>MyISAM</code> 不支持数据库异常崩溃后安全恢复</p> <p><code>InnoDB</code> 支持数据库异常崩溃后安全恢复</p> <blockquote><p>小贴士</p></blockquote> <p>使用 <code>InnoDB</code> 的数据库在异常崩溃后, 数据库重新启动的时候会保证数据库恢复到崩溃前的状态, 这个恢复的过程依赖于 <code>redo log</code></p> <blockquote><p>扩展</p></blockquote> <ul><li><code>MySQL InnoDB</code> 存储引擎使用 <code>redo log</code> (重做日志) 保证事务的 <strong>持久性</strong>, 使用 <code>undo log</code>(回滚日志) 保证事务的 <strong>原子性</strong></li> <li><code>MySQL InnoDB</code> 存储引擎通过 <strong>锁机制</strong>, <strong>MVVC</strong> 等手段来保证事务的隔离性 (默认支持的隔离级别是可重复度)</li> <li>保证了事务的 <strong>持久性</strong>, <strong>原子性</strong>, <strong>隔离性</strong> 之后, <strong>一致性</strong> 才能得到保障</li></ul> <h5 id="是否支持-mvvc"><a href="#是否支持-mvvc" class="header-anchor">#</a> 是否支持 MVVC</h5> <p><code>MyISAM</code> 不支持 MVVC</p> <p><code>InnoDB</code> 支持 MVVC</p> <blockquote><p>小贴士</p></blockquote> <p>MVCC 可以看作是行级锁的一个升级, 可以有效减少加锁操作, 提高性能</p> <h2 id="锁机制和-innodb-锁算法"><a href="#锁机制和-innodb-锁算法" class="header-anchor">#</a> 锁机制和 InnoDB 锁算法</h2> <h3 id="myisam-和-innodb-存储引擎使用的锁"><a href="#myisam-和-innodb-存储引擎使用的锁" class="header-anchor">#</a> MyISAM 和 InnoDB 存储引擎使用的锁</h3> <ul><li><code>MyISAM</code> 采用表级锁 (table-level locking)</li> <li><code>InnoDB</code> 采用行级锁 (row-level locking) 和表级锁, 默认为行级锁</li></ul> <h3 id="表级锁和行级锁对比"><a href="#表级锁和行级锁对比" class="header-anchor">#</a> 表级锁和行级锁对比</h3> <ul><li><strong>表级锁</strong> : <code>MySQL</code> 中锁定 <strong>粒度最大</strong> 的一种锁, 对当前操作的整张表加锁. <strong>实现简单</strong>, <strong>资源消耗也比较少</strong>, <strong>加锁快</strong>, <strong>不会出现死锁</strong>, <strong>出发锁冲突概率最高</strong>, <strong>并发度最低</strong>, <code>MyISAM</code> 和 <code>InnoDB</code> 存储引擎都支持表级锁</li> <li><strong>行级锁</strong> : <code>MySQL</code> 中锁定 <strong>粒度最小</strong> 的一种锁, 只针对当前操作的行加锁, <strong>行级锁能大大减少数据库操作的冲突</strong>, <strong>加锁粒度最小</strong>, <strong>并发度高</strong>, <strong>加锁的开销最大</strong>, <strong>加锁慢</strong>, <strong>会出现死锁</strong></li></ul> <blockquote><p>表级锁和行级锁的区别</p></blockquote> <ul><li><strong>开销</strong> : 表级锁加锁开销少, 行级锁加锁开销大</li> <li><strong>加锁粒度</strong> : 表级锁加锁粒度最大, 行级锁加锁粒度最小</li> <li><strong>是否会出现死锁</strong> : 表级锁不会出现死锁, 行级锁会出现死锁</li> <li><strong>加锁速度</strong> : 表级锁加锁速度快, 行级锁加锁速度慢</li> <li><strong>并发度</strong> : 表级锁并发度低, 行级锁并发度高</li></ul> <h3 id="innodb-存储引擎的锁的算法"><a href="#innodb-存储引擎的锁的算法" class="header-anchor">#</a> InnoDB 存储引擎的锁的算法</h3> <p><code>InnoDB</code> 存储引擎的锁的算法有三种 :</p> <ul><li><code>Record lock</code> : <strong>记录锁</strong>, 单个行记录上的锁</li> <li><code>Gap lock</code> : <strong>间隙锁</strong>, 锁定一个范围, 不包括记录本身</li> <li><code>Next-key lock</code> : <code>Record</code> + <code>Gap</code> <strong>临键锁</strong>, 锁定一个范围, 包含记录本身</li></ul> <h2 id="一条-sql-语句在-mysql-中如何被执行的"><a href="#一条-sql-语句在-mysql-中如何被执行的" class="header-anchor">#</a> 一条 SQL 语句在 MySQL 中如何被执行的?</h2> <h3 id="mysql-基础架构分析"><a href="#mysql-基础架构分析" class="header-anchor">#</a> MySQL 基础架构分析</h3> <h4 id="mysql-基本架构概览"><a href="#mysql-基本架构概览" class="header-anchor">#</a> MySQL 基本架构概览</h4> <p>下图是 <code>MySQL</code> 的一个简要架构图,  从下图你可以很清晰的看到用户的 <code>SQL</code> 语句在 <code>MySQL</code> 内部是如何执行的</p> <blockquote><p>图示</p></blockquote> <p><img src="https://typora-photo-yixihan.oss-cn-chengdu.aliyuncs.com/img/13526879-3037b144ed09eb88.png" alt="img"></p> <blockquote><p>图解</p></blockquote> <ul><li><strong>连接器</strong> : 身份认证和权限相关 (登录 <code>MySQL</code> 的时候)</li> <li><strong>查询缓存</strong> : 执行查询语句的时候, 会先查询缓存 (<code>MySQL</code> 8.0 版本后移除)</li> <li><strong>分析器</strong> : 没有命中缓存的话, <code>SQL</code> 语句就会经过分析器, 分析器说白了就是要先看你的 <code>SQL</code> 语句要干嘛, 再检查你的 <code>SQL</code> 语句语法是否正确</li> <li><strong>优化器</strong> : 按照 <code>MySQL</code> 认为最优的方案去执行</li></ul> <p>简单来说 <code>MySQL</code> 主要分为 <code>Server</code> 层和存储引擎层 :</p> <ul><li><strong>Server 层</strong> : 主要包括连接器, 查询缓存, 分析器, 优化器, 执行器等, 所有跨存储引擎的功能都在这一层实现, 比如存储过程, 触发器, 视图, 函数等, 还有一个通用的日志模块 <code>binlog</code> 日志模块</li> <li><strong>存储引擎</strong> : 主要负责数据的存储和读取, 采用可以替换的插件式架构, 支持 <code>InnoDB</code>、<code>MyISAM</code>、<code>Memory</code> 等多个存储引擎, 其中 <code>InnoDB</code>引擎有自有的日志模块 <code>redolog</code> 模块. <strong>现在最常用的存储引擎是 <code>InnoDB</code>, 它从 <code>MySQL 5.5.5</code> 版本开始就被当做默认存储引擎了</strong></li></ul> <h4 id="server-层基本组件介绍"><a href="#server-层基本组件介绍" class="header-anchor">#</a> Server 层基本组件介绍</h4> <h5 id="连接器"><a href="#连接器" class="header-anchor">#</a> 连接器</h5> <p>连接器主要和身份认证和权限相关的功能相关, 就好比一个级别很高的门卫一样</p> <p>主要负责用户登录数据库, 进行用户的身份认证, 包括校验账户密码, 权限等操作, 如果用户账户密码已通过, 连接器会到权限表中查询该用户的所有权限, 之后在这个连接里的权限逻辑判断都是会依赖此时读取到的权限数据, 也就是说, 后续只要这个连接不断开, 即使管理员修改了该用户的权限, 该用户也是不受影响的</p> <h5 id="查询缓存-mysql-8-0-版本后移除"><a href="#查询缓存-mysql-8-0-版本后移除" class="header-anchor">#</a> 查询缓存 (MySQL 8.0 版本后移除)</h5> <p>查询缓存主要用来缓存我们所执行的 <code>SELECT</code> 语句以及该语句的结果集</p> <p>连接建立后, 执行查询语句的时候, 会先查询缓存, <code>MySQL</code> 会先校验这个 <code>sql</code> 是否执行过, 以 Key - Value 的形式缓存在内存中, <code>Key</code> 是查询预计, <code>Value</code> 是结果集. 如果缓存 <code>key</code> 被命中, 就会直接返回给客户端, 如果没有命中, 就会执行后续的操作, 完成后也会把结果缓存起来, 方便下一次调用. 当然在真正执行缓存查询的时候还是会校验用户的权限, 是否有该表的查询条件</p> <p><strong><code>MySQL</code> 查询不建议使用缓存</strong>, 因为查询缓存失效在实际业务场景中可能会非常频繁, 假如你对一个表更新的话, 这个表上的所有的查询缓存都会被清空. 对于不经常更新的数据来说, 使用缓存还是可以的</p> <p>所以, 一般在大多数情况下我们都是不推荐去使用查询缓存的</p> <p><code>MySQL 8.0</code> 版本后删除了缓存的功能, 官方也是认为该功能在实际的应用场景比较少, 所以干脆直接删掉了</p> <h5 id="分析器"><a href="#分析器" class="header-anchor">#</a> 分析器</h5> <p><code>MySQL</code> 没有命中缓存, 那么就会进入分析器, 分析器主要是用来分析 <code>SQL</code> 语句是来干嘛的, 分析器也会分为几步 :</p> <p><strong>第一步, 词法分析</strong>, 一条 <code>SQL</code> 语句有多个字符串组成, 首先要提取关键字, 比如 <code>select</code>, 提出查询的表, 提出字段名, 提出查询条件等等. 做完这些操作后, 就会进入第二步</p> <p><strong>第二步, 语法分析</strong>, 主要就是判断你输入的 <code>sql</code> 是否正确, 是否符合 <code>MySQL</code> 的语法</p> <p>完成这 2 步之后, <code>MySQL</code> 就准备开始执行了, 但是如何执行, 怎么执行是最好的结果呢? 这个时候就需要优化器上场了</p> <h5 id="优化器"><a href="#优化器" class="header-anchor">#</a> 优化器</h5> <p>优化器的作用就是它认为的最优的执行方案去执行 (有时候可能也不是最优, 这篇文章涉及对这部分知识的深入讲解), 比如多个索引的时候该如何选择索引, 多表查询的时候如何选择关联顺序等</p> <p>可以说, 经过了优化器之后可以说这个语句具体该如何执行就已经定下来</p> <h5 id="执行器"><a href="#执行器" class="header-anchor">#</a> 执行器</h5> <p>当选择了执行方案后, MySQL 就准备开始执行了, 首先执行前会校验该用户有没有权限, 如果没有权限, 就会返回错误信息, 如果有权限, 就会去调用引擎的接口, 返回接口执行的结果</p> <h3 id="语句分析"><a href="#语句分析" class="header-anchor">#</a> 语句分析</h3> <h4 id="查询语句"><a href="#查询语句" class="header-anchor">#</a> 查询语句</h4> <blockquote><p>sql 语句</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_student  A <span class="token keyword">where</span> A<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">'18'</span> <span class="token operator">and</span> A<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">' 张三 '</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>执行流程</p></blockquote> <ul><li><p>先检查该语句是否有权限, 如果没有权限, 直接返回错误信息, 如果有权限, 在 <code>MySQL8.0</code> 版本以前, 会先查询缓存, 以这条 <code>sql</code> 语句为 <code>key</code> 在内存中查询是否有结果, 如果有直接缓存, 如果没有, 执行下一步</p></li> <li><p>通过分析器进行词法分析, 提取 <code>sql</code> 语句的关键元素, 比如提取上面这个语句是查询 <code>select</code>, 提取需要查询的表名为 <code>tb_student</code>, 需要查询所有的列, 查询条件是这个表的 <code>id='1'</code>. 然后判断这个 <code>sql</code> 语句是否有语法错误, 比如关键词是否正确等等, 如果检查没问题就执行下一步.</p></li> <li><p>接下来就是优化器进行确定执行方案, 上面的 <code>sql</code> 语句, 可以有两种执行方案 :</p> <ul><li>先查询学生表中姓名为&quot;张三”的学生, 然后判断是否年龄是 18.</li> <li>先找出学生中年龄 18 岁的学生, 然后再查询姓名为&quot;张三”的学生.</li></ul> <p>那么优化器根据自己的优化算法进行选择执行效率最好的一个方案 (优化器认为, 有时候不一定最好) . 那么确认了执行计划后就准备开始执行了</p></li> <li><p>进行权限校验, 如果没有权限就会返回错误信息, 如果有权限就会调用数据库引擎接口, 返回引擎的执行结果</p></li></ul> <h4 id="更新语句"><a href="#更新语句" class="header-anchor">#</a> 更新语句</h4> <blockquote><p>sql 语句</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> tb_student A <span class="token keyword">set</span> A<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">'19'</span> <span class="token keyword">where</span> A<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">' 张三 '</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>执行流程</p></blockquote> <p>其实这条语句也基本上会沿着上一个查询的流程走, 只不过执行更新的时候肯定要记录日志啦, 这就会引入日志模块了, <code>MySQL</code> 自带的日志模块是 **<code>bin log</code> (归档日志) ** , 所有的存储引擎都可以使用, 我们常用的 <code>InnoDB</code> 引擎还自带了一个日志模块 **<code>redo log</code> (重做日志) **, 我们就以 <code>InnoDB</code> 模式下来探讨这个语句的执行流程. 流程如下 :</p> <ul><li>先查询到张三这一条数据, 如果有缓存, 也是会用到缓存</li> <li>然后拿到查询的语句, 把 <code>age</code> 改为 19, 然后调用引擎 <code>API</code> 接口, 写入这一行数据, <code>InnoDB</code> 引擎把数据保存在内存中, 同时记录 <code>redo log</code>, 此时 <code>redo log</code> 进入 <code>prepare</code> 状态, 然后告诉执行器, 执行完成了, 随时可以提交</li> <li>执行器收到通知后记录 <code>bin log</code>, 然后调用引擎接口, 提交 <code>redo log</code> 为提交状态</li> <li>更新完成</li></ul> <blockquote><p>小贴士</p></blockquote> <p>这是因为最开始 <code>MySQL</code> 并没有 <code>InnoDB</code> 引擎 (<code>InnoDB</code> 引擎是其他公司以插件形式插入 <code>MySQL</code> 的) , <code>MySQL</code> 自带的引擎是 <code>MyISAM</code>, 但是我们知道 <code>redo log</code> 是 <code>InnoDB</code> 引擎特有的, 其他存储引擎都没有, 这就导致会没有 <code>crash-safe</code> 的能力(<code>crash-safe</code> 的能力即使数据库发生异常重启, 之前提交的记录都不会丢失), <code>binlog</code> 日志只能用来归档</p> <p>并不是说只用一个日志模块不可以, 只是 <code>InnoDB</code> 引擎就是通过 <code>redo log</code> 来支持事务的. 那么, 又会有同学问, 我用两个日志模块, 但是不要这么复杂行不行, 为什么 <code>redo log</code> 要引入 <code>prepare</code> 预提交状态?这里我们用反证法来说明下为什么要这么做?</p> <ul><li><strong>先写 <code>redo log</code> 直接提交, 然后写 <code>bin log</code></strong>, 假设写完 <code>redo log</code> 后, 机器挂了, <code>binlog</code> 日志没有被写入, 那么机器重启后, 这台机器会通过 <code>redo log</code> 恢复数据, 但是这个时候 <code>binlog</code> 并没有记录该数据, 后续进行机器备份的时候, 就会丢失这一条数据, 同时主从同步也会丢失这一条数据</li> <li><strong>先写 <code>bin log</code>, 然后写 <code>redo log</code></strong>, 假设写完了 <code>bin log</code>, 机器异常重启了, 由于没有 <code>redo log</code>, 本机是无法恢复这一条记录的, 但是 <code>bin log</code> 又有记录, 那么和上面同样的道理, 就会产生数据不一致的情况</li></ul> <p>如果采用 <code>redo log</code> 两阶段提交的方式就不一样了, 写完 <code>bin log</code> 后, 然后再提交 <code>redo log</code> 就会防止出现上述的问题, 从而保证了数据的一致性. 那么问题来了, 有没有一个极端的情况呢?假设 <code>redo log</code> 处于预提交状态, <code>bin log</code> 也已经写完了, 这个时候发生了异常重启会怎么样呢? 这个就要依赖于 <code>MySQL</code> 的处理机制了, <code>MySQL</code> 的处理过程如下 :</p> <ul><li>判断 <code>redo log</code> 是否完整, 如果判断是完整的, 就立即提交</li> <li>如果 <code>redo log</code> 只是预提交但不是 <code>commit</code> 状态, 这个时候就会去判断 <code>bin log</code> 是否完整, 如果完整就提交 <code>redo log</code>, 不完整就回滚事务</li></ul> <p>这样就解决了数据一致性的问题</p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <ul><li>MySQL 主要分为 Server 层和引擎层, Server 层主要包括连接器、查询缓存、分析器、优化器、执行器, 同时还有一个日志模块 (binlog) , 这个日志模块所有执行引擎都可以共用, redolog 只有 InnoDB 有</li> <li>引擎层是插件式的, 目前主要包括, MyISAM,InnoDB,Memory 等</li> <li>查询语句的执行流程如下 : 权限校验 (如果命中缓存) ---&gt; 查询缓存 ---&gt; 分析器 ---&gt; 优化器 ---&gt; 权限校验 ---&gt; 执行器 ---&gt; 引擎</li> <li>更新语句执行流程如下 : 分析器 ----&gt; 权限校验 ----&gt; 执行器 ---&gt; 引擎 ---&gt; redo log (prepare 状态) ---&gt; binlog ---&gt; redo log (commit状态)</li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">2022/12/31 下午3:20:26</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blogs/面经/MySQL/MySQL索引.html" class="prev">
          MySQL - 索引
        </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#存储引擎" class="sidebar-link reco-side-存储引擎" data-v-b57cc07c>存储引擎</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#简介" class="sidebar-link reco-side-简介" data-v-b57cc07c>简介</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#myisam-与-innodb-的区别" class="sidebar-link reco-side-myisam-与-innodb-的区别" data-v-b57cc07c>MyISAM 与 InnoDB 的区别</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#锁机制和-innodb-锁算法" class="sidebar-link reco-side-锁机制和-innodb-锁算法" data-v-b57cc07c>锁机制和 InnoDB 锁算法</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#myisam-和-innodb-存储引擎使用的锁" class="sidebar-link reco-side-myisam-和-innodb-存储引擎使用的锁" data-v-b57cc07c>MyISAM 和 InnoDB 存储引擎使用的锁</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#表级锁和行级锁对比" class="sidebar-link reco-side-表级锁和行级锁对比" data-v-b57cc07c>表级锁和行级锁对比</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#innodb-存储引擎的锁的算法" class="sidebar-link reco-side-innodb-存储引擎的锁的算法" data-v-b57cc07c>InnoDB 存储引擎的锁的算法</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#一条-sql-语句在-mysql-中如何被执行的" class="sidebar-link reco-side-一条-sql-语句在-mysql-中如何被执行的" data-v-b57cc07c>一条 SQL 语句在 MySQL 中如何被执行的?</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#mysql-基础架构分析" class="sidebar-link reco-side-mysql-基础架构分析" data-v-b57cc07c>MySQL 基础架构分析</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#语句分析" class="sidebar-link reco-side-语句分析" data-v-b57cc07c>语句分析</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E9%9D%A2%E7%BB%8F/MySQL/MySQL%E9%9D%A2%E7%BB%8F.html#总结" class="sidebar-link reco-side-总结" data-v-b57cc07c>总结</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.fa49d2c1.js" defer></script><script src="/assets/js/3.e4073929.js" defer></script><script src="/assets/js/1.de47dd8b.js" defer></script><script src="/assets/js/42.75cff1ef.js" defer></script>
  </body>
</html>
