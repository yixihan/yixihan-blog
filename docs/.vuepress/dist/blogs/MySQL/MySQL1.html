<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL1 | 摸鱼小屋</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="花开亦花散">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.387f9a2a.css" as="style"><link rel="preload" href="/assets/js/app.826229b0.js" as="script"><link rel="preload" href="/assets/js/3.45d84e5d.js" as="script"><link rel="preload" href="/assets/js/1.9cec7de7.js" as="script"><link rel="preload" href="/assets/js/23.9de4c1b2.js" as="script"><link rel="prefetch" href="/assets/js/10.fa7a5c7e.js"><link rel="prefetch" href="/assets/js/11.072d9ab8.js"><link rel="prefetch" href="/assets/js/12.1b56fa07.js"><link rel="prefetch" href="/assets/js/13.a8ea66e3.js"><link rel="prefetch" href="/assets/js/14.71ab951b.js"><link rel="prefetch" href="/assets/js/15.4468d73c.js"><link rel="prefetch" href="/assets/js/16.45dbc2e0.js"><link rel="prefetch" href="/assets/js/17.8052715d.js"><link rel="prefetch" href="/assets/js/18.eb96d1d0.js"><link rel="prefetch" href="/assets/js/19.2056d6c8.js"><link rel="prefetch" href="/assets/js/20.427a3b04.js"><link rel="prefetch" href="/assets/js/21.d75f0dbe.js"><link rel="prefetch" href="/assets/js/22.b24d8812.js"><link rel="prefetch" href="/assets/js/24.b027e09a.js"><link rel="prefetch" href="/assets/js/25.5fd12f6a.js"><link rel="prefetch" href="/assets/js/26.defdd82f.js"><link rel="prefetch" href="/assets/js/27.43958664.js"><link rel="prefetch" href="/assets/js/28.53a76e67.js"><link rel="prefetch" href="/assets/js/29.f8658525.js"><link rel="prefetch" href="/assets/js/30.cfbd4bb4.js"><link rel="prefetch" href="/assets/js/31.110e2ef1.js"><link rel="prefetch" href="/assets/js/32.be30f3bc.js"><link rel="prefetch" href="/assets/js/33.464917c7.js"><link rel="prefetch" href="/assets/js/34.0e476887.js"><link rel="prefetch" href="/assets/js/35.85232f7c.js"><link rel="prefetch" href="/assets/js/36.f577e483.js"><link rel="prefetch" href="/assets/js/37.46c99627.js"><link rel="prefetch" href="/assets/js/38.1f238711.js"><link rel="prefetch" href="/assets/js/39.bbdc2657.js"><link rel="prefetch" href="/assets/js/4.03b52a95.js"><link rel="prefetch" href="/assets/js/40.99241900.js"><link rel="prefetch" href="/assets/js/41.cdd20d35.js"><link rel="prefetch" href="/assets/js/42.f52bb17c.js"><link rel="prefetch" href="/assets/js/43.f94ec0cc.js"><link rel="prefetch" href="/assets/js/44.156cf0d2.js"><link rel="prefetch" href="/assets/js/5.aac20725.js"><link rel="prefetch" href="/assets/js/6.67b49f06.js"><link rel="prefetch" href="/assets/js/7.9c2da0a3.js"><link rel="prefetch" href="/assets/js/8.a0f3c5de.js"><link rel="prefetch" href="/assets/js/9.0d9337d1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.387f9a2a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>摸鱼小屋</h3> <p class="description" data-v-59e6cb88>花开亦花散</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>易曦翰</span>
          
        <span data-v-59e6cb88>2022 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/yixihan.png" alt="摸鱼小屋" class="logo"> <span class="site-name">摸鱼小屋</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/MySQL/" class="nav-link"><i class="undefined"></i>
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程环境搭建/" class="nav-link"><i class="undefined"></i>
  编程环境搭建
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/RabbitMQ/" class="nav-link"><i class="undefined"></i>
  RabbitMQ
</a></li><li class="dropdown-item"><!----> <a href="/categories/面经/" class="nav-link"><i class="undefined"></i>
  面经
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-gongju"></i>
      工具箱
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://xpdf.net/?s" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  PDF转Word
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  在线工具箱
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://openyyy.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  音乐格式转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.shopify.com/tools/logo-maker" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  logo 生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sms-activate.ru/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  虚拟短信接收
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://fanyi.phpstudyhelper.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  代码变量名称翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/yixihan.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    易曦翰
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>34</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>32</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/MySQL/" class="nav-link"><i class="undefined"></i>
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程环境搭建/" class="nav-link"><i class="undefined"></i>
  编程环境搭建
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/RabbitMQ/" class="nav-link"><i class="undefined"></i>
  RabbitMQ
</a></li><li class="dropdown-item"><!----> <a href="/categories/面经/" class="nav-link"><i class="undefined"></i>
  面经
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-gongju"></i>
      工具箱
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://xpdf.net/?s" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  PDF转Word
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  在线工具箱
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://openyyy.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  音乐格式转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.shopify.com/tools/logo-maker" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  logo 生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sms-activate.ru/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  虚拟短信接收
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://fanyi.phpstudyhelper.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  代码变量名称翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/blogs/MySQL/MySQL1.html" aria-current="page" class="active sidebar-link">MySQL1</a></li><li><a href="/blogs/MySQL/MySQL2.html" class="sidebar-link">MySQL2</a></li><li><a href="/blogs/MySQL/MySQL3.html" class="sidebar-link">MySQL3</a></li><li><a href="/blogs/MySQL/MySQL4.html" class="sidebar-link">MySQL4</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>MySQL1</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>易曦翰</span>
          
        <span data-v-59e6cb88>2022 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">MySQL1</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>易曦翰</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2022/10/30</span></i> <i class="iconfont reco-eye" data-v-8a445198><span id="/blogs/MySQL/MySQL1.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-8a445198><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>MySQL</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h1> <h2 id="数据库简介"><a href="#数据库简介" class="header-anchor">#</a> 数据库简介</h2> <blockquote><p>DB</p></blockquote> <p>数据库（database）：存储数据的“仓库”。它保存了一系列有组织的数据</p> <blockquote><p>DBMS</p></blockquote> <p>数据库管理系统（Database Management System）。数据库是通过DBMS创 建和操作的容器</p> <blockquote><p>SQL</p></blockquote> <p>结构化查询语言（Structure Query Language）：专门用来与数据库通信的语言。</p> <blockquote><p>SQL的优点：</p></blockquote> <ol><li>不是某个特定数据库供应商专有的语言,几乎所有 DBMS都支持SQL</li> <li>简单易学</li> <li>虽然简单,但实际上是一种强有力的语言,灵活使 用其语言元素,可以进行非常复杂和高级的数据库操作。</li></ol> <blockquote><p>DML（Data Manipulation Language) :</p></blockquote> <p>数据操纵语句,用于添 加、删除、修改、查询数据库记录,并检查数据完整性</p> <blockquote><p>DDL（Data Definition Language) :</p></blockquote> <p>数据定义语句,用于库和 表的创建、修改、删除</p> <blockquote><p>DCL（Data Control Language) :</p></blockquote> <p>数据控制语句,用于定义用 户的访问权限和安全级别</p> <h3 id="dml"><a href="#dml" class="header-anchor">#</a> DML</h3> <p>DML用于查询与修改数据记录,包括如下SQL语句：</p> <ul><li>INSERT：添加数据到数据库中</li> <li>UPDATE：修改数据库中的数据</li> <li>DELETE：删除数据库中的数据</li> <li>==SELECT：选择（查询）数据==
<ul><li>SELECT是SQL语言的基础,最为重要。</li></ul></li></ul> <h3 id="ddl"><a href="#ddl" class="header-anchor">#</a> DDL</h3> <p>DDL用于定义数据库的结构,比如创建、修改或删除 数据库对象,包括如下SQL语句：</p> <ul><li>CREATE TABLE：创建数据库表</li> <li>ALTER TABLE：更改表结构、添加、删除、修改列长度</li> <li>DROP TABLE：删除表</li> <li>CREATE INDEX：在表上建立索引</li> <li>DROP INDEX：删除索引</li></ul> <h3 id="dcl"><a href="#dcl" class="header-anchor">#</a> DCL</h3> <p>DCL用来控制数据库的访问,包括如下SQL语句：</p> <ul><li>GRANT：授予访问权限</li> <li>REVOKE：撤销访问权限</li> <li>COMMIT：提交事务处理</li> <li>ROLLBACK：事务处理回退</li> <li>SAVEPOINT：设置保存点</li> <li>LOCK：对数据库的特定部分进行锁定</li></ul> <h2 id="mysql安装"><a href="#mysql安装" class="header-anchor">#</a> MySQL安装</h2> <blockquote><p>window</p></blockquote> <p>5.x版本, 看视频 6-8</p> <p>8.x版本, ...</p> <blockquote><p>linux</p></blockquote> <p><a href="/blogs/MySQL/d:\JAVA\tpyora\MySQL3.html">linux 版本 - 5.7</a></p> <h2 id="mysql基本使用"><a href="#mysql基本使用" class="header-anchor">#</a> MySQL基本使用</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 查看当前所有的数据库</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token comment"># 2. 打开指定的库</span>
<span class="token keyword">use</span> 库名
<span class="token comment"># 3. 查看当前库的所有表</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token comment"># 4. 查看其它库的所有表</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span> <span class="token keyword">from</span> 库名<span class="token punctuation">;</span>
<span class="token comment"># 5. 创建表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>

	列名 列类型<span class="token punctuation">,</span>
	列名 列类型<span class="token punctuation">,</span>
	。。。
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 6. 查看表结构</span>
<span class="token keyword">desc</span> 表名<span class="token punctuation">;</span>

<span class="token comment"># 7. 查看服务器的版本</span>
<span class="token comment"># 方式一：登录到mysql服务端</span>
<span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 方式二：没有登录到mysql服务端</span>
mysql <span class="token comment">--version</span>
<span class="token comment"># 或</span>
mysql <span class="token comment">--V</span>

<span class="token comment"># 7. 启动 mysql 服务</span>
net <span class="token keyword">start</span> 服务名

<span class="token comment"># 8. 停止 mysql 服务</span>
net stop 服务名

<span class="token comment"># 9. 登录 mysql</span>
mysql <span class="token operator">-</span>h 主机名 <span class="token operator">-</span>P 端口号 <span class="token operator">-</span>u 用户名 <span class="token operator">-</span>p密码

<span class="token comment"># 10. 退出 mysql</span>
<span class="token keyword">exit</span>
<span class="token comment"># 或者</span>
ctrl <span class="token operator">+</span> c
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="mysql的语法规范"><a href="#mysql的语法规范" class="header-anchor">#</a> MySQL的语法规范</h3> <ol><li>不区分大小写,但建议关键字大写,表名、列名小写</li> <li>每条命令最好用分号结尾</li> <li>每条命令根据需要,可以进行缩进 或换行</li> <li>注释
单行注释：#注释文字
单行注释：-- 注释文字
多行注释：/* 注释文字  */</li></ol> <h2 id="dql语言的学习"><a href="#dql语言的学习" class="header-anchor">#</a> DQL语言的学习</h2> <h3 id="进阶一-基础查询"><a href="#进阶一-基础查询" class="header-anchor">#</a> 进阶一：基础查询</h3> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 
	查询列表 
<span class="token keyword">from</span> 
	表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>特点</p></blockquote> <ul><li>查询列表可以是字段、常量、表达式、函数，也可以是多个</li> <li>查询结果是一个虚拟表</li></ul> <blockquote><p>示例</p></blockquote> <ul><li><p>查询单个字段</p> <p><code>select 字段名 from 表名;</code></p></li> <li><p>查询多个字段</p> <p><code>select 字段名，字段名 from 表名;</code></p></li> <li><p>查询所有字段</p> <p><code>select * from 表名;</code></p></li> <li><p>查询常量</p> <p><code>select 常量值;</code></p> <p>注意：字符型和日期型的常量值必须用单引号引起来，数值型不需要</p></li> <li><p>查询函数</p> <p><code>select 函数名(实参列表);</code></p></li> <li><p>查询表达式</p> <p><code>select 100/1234;</code></p></li> <li><p>起别名</p> <ul><li>as</li> <li>空格</li></ul></li> <li><p>去重</p> <p><code>select distinct 字段名 from 表名;</code></p></li> <li><ul><li></li></ul> <p>作用：做加法运算</p> <p><code>select 数值+数值;</code></p> <p>直接运算</p> <p><code>select 字符+数值;</code></p> <p>先试图将字符转换成数值，如果转换成功，则继续运算；否则转换成0，再做运算</p> <p><code>select null+值;</code></p></li> <li><p>[补充]concat函数</p> <p>功能：拼接字符</p> <p><code>select concat(字符1，字符2，字符3,...);</code></p></li> <li><p>[补充]ifnull函数</p> <p>功能：判断某字段或表达式是否为null，如果为null 返回指定的值，否则返回原本的值</p> <p><code>select ifnull(commission_pct,0) from employees;</code></p></li> <li><p>[补充]isnull函数</p> <p>功能：判断某字段或表达式是否为null，如果是，则返回1，否则返回0</p></li></ul> <h4 id="代码"><a href="#代码" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 进阶一 : 基础查询</span>
<span class="token comment">/*
SELECT 查询列表
FROM 表名;

特点 : 
	1. 查询列表可以是 : 表中的字段 常量值 表达式 函数
	2. 查询的结果是一个虚拟的表格

*/</span>

<span class="token comment"># 1. 查询表中的单个字段</span>
<span class="token keyword">SELECT</span>
	last_name 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 2. 查询表中的多个字段</span>
<span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	salary<span class="token punctuation">,</span>
	email 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 3. 查询表中的所有字段</span>
<span class="token comment"># 方式一</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>

<span class="token comment"># 方式二</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>first_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>phone_number<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>commission_pct<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>manager_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>hiredate 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 4. 查询常量值</span>
<span class="token keyword">SELECT</span>
	<span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	<span class="token string">'john'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 5. 查询表达式</span>
<span class="token keyword">SELECT</span>
	<span class="token number">100</span> <span class="token operator">%</span> <span class="token number">98</span><span class="token punctuation">;</span>
	
<span class="token comment"># 6. 查询函数</span>
<span class="token keyword">SELECT</span>
	VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment"># 7. 起别名</span>
<span class="token comment">/*
	好处 : 
		1. 便于理解
		2. 如果要查询的字段有重名的情况, 使用别名可以区分开来
	*/</span><span class="token comment"># 方式一</span>
<span class="token keyword">SELECT</span>
	<span class="token number">100</span> <span class="token operator">%</span> <span class="token number">98</span> <span class="token keyword">AS</span> 结果<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	last_name <span class="token keyword">AS</span> 性<span class="token punctuation">,</span>
	first_name <span class="token keyword">AS</span> 名 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 方式二</span>
<span class="token keyword">SELECT</span>
	last_name 性<span class="token punctuation">,</span>
	first_name 名 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 案例 : 查询 salary, 显示结果为 out put</span>
<span class="token keyword">SELECT</span>
	salary <span class="token keyword">AS</span> <span class="token string">&quot;out put&quot;</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 8.去重</span>
<span class="token comment"># 案例 : 查询员工表中涉及到的所有的部门编号</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span>
	department_id 
<span class="token keyword">FROM</span>
	employees 
	
<span class="token comment"># 9. + 号的作用</span>
<span class="token comment">/*
java 中的 + 号
	1. 运算符, 两个操作数都为数值型
	2. 连接符, 只要有一个操作数为字符串
	
MySQL 中的 + 号
	仅仅只有一个功能 : 运算符
	
	SELECT 100 + 90; 两个操作数都为数值型, 则做加法运算
	SELECT '123' + 90; 其中一方为字符型, 试图将字符型数值转换成数值型
												如果转换成功, 则继续做加法运算
	SELECT 'john' + 90;		如果转换失败, 则将字符型数值转换成 0
	
	SELECT	null + 90; 只要其中一方为 null, 则结构肯定为 null												

*/</span>
<span class="token keyword">SELECT</span>
	<span class="token number">100</span> <span class="token operator">+</span> <span class="token number">90</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	<span class="token string">'123'</span> <span class="token operator">+</span> <span class="token number">90</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	<span class="token string">'john'</span> <span class="token operator">+</span> <span class="token number">90</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token boolean">NULL</span>
	<span class="token operator">+</span> <span class="token number">90</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例 : 查询员工名和性连接成为一个字段, 并显示为 姓名</span>
<span class="token keyword">SELECT</span>
	CONCAT<span class="token punctuation">(</span>last_name<span class="token punctuation">,</span> first_name<span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br></div></div><h4 id="练习"><a href="#练习" class="header-anchor">#</a> 练习</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 练习</span>
<span class="token comment"># 1. 下面的语句是否可以执行成功</span>
<span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	job_id<span class="token punctuation">,</span>
	salary <span class="token keyword">AS</span> sal 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 2. 下面的语句是否可以执行成功</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 3. 找出下面语句中的错误</span>
<span class="token keyword">SELECT</span>
	employee_id<span class="token punctuation">,</span>
	last_name<span class="token punctuation">,</span>
	salary <span class="token operator">*</span> <span class="token string">&quot;ANNUAL SALARY&quot;</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 4. 显示表 departments 的结构,并查询其中的全部数据</span>
<span class="token keyword">DESC</span> departments<span class="token punctuation">;</span>

<span class="token comment"># 5. 显示出表 employees 中的全部 job_id（不能重复）</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span>
	job_id 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 6. 显示出表 employees 的全部列,各个列之间用逗号连接,列头显示成 OUT_PUT</span>
<span class="token keyword">SELECT</span>
	CONCAT<span class="token punctuation">(</span>
		employees<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
		<span class="token string">','</span><span class="token punctuation">,</span>
		employees<span class="token punctuation">.</span>first_name<span class="token punctuation">,</span>
		<span class="token string">','</span><span class="token punctuation">,</span>
		employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
		<span class="token string">','</span><span class="token punctuation">,</span>
	IFNULL<span class="token punctuation">(</span> employees<span class="token punctuation">.</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h4 id="补充"><a href="#补充" class="header-anchor">#</a> 补充</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 8. 去重</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> 字段名 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>

<span class="token comment"># 9. + 作用：做加法运算</span>
<span class="token keyword">select</span> 数值<span class="token operator">+</span>数值<span class="token punctuation">;</span> 直接运算
<span class="token keyword">select</span> 字符<span class="token operator">+</span>数值<span class="token punctuation">;</span>先试图将字符转换成数值<span class="token punctuation">,</span>如果转换成功<span class="token punctuation">,</span>则继续运算；否则转换成<span class="token number">0</span><span class="token punctuation">,</span>再做运算
<span class="token keyword">select</span> <span class="token boolean">null</span><span class="token operator">+</span>值<span class="token punctuation">;</span>结果都为<span class="token boolean">null</span>

<span class="token comment"># 10.[补充]concat函数 功能：拼接字符</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span>字符<span class="token number">1</span><span class="token punctuation">,</span>字符<span class="token number">2</span><span class="token punctuation">,</span>字符<span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 11.[补充]ifnull函数 功能：判断某字段或表达式是否为null,如果为null 返回指定的值,否则返回原本的值</span>
<span class="token keyword">select</span> ifnull<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>

<span class="token comment"># 12.[补充]isnull函数 功能 : 判断某字段或表达式是否为null,如果是,则返回1,否则返回0</span>
<span class="token keyword">SELECT</span>
	ISNULL<span class="token punctuation">(</span> commission_pct <span class="token punctuation">)</span><span class="token punctuation">,</span>
	commission_pct 
<span class="token keyword">FROM</span>
	employees
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="进阶二-条件查询"><a href="#进阶二-条件查询" class="header-anchor">#</a> 进阶二 : 条件查询</h3> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 
	查询列表 
<span class="token keyword">from</span> 
	表名 
<span class="token keyword">where</span> 
	筛选条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>筛选条件的分类</p></blockquote> <ul><li><p>简单条件运算符</p> <p><code>&gt; &lt; = &lt;&gt; != &gt;= &lt;= &lt;=&gt; (安全等于)</code></p></li> <li><p>逻辑运算符</p> <p><code>&amp;&amp; and</code></p> <p><code>|| or</code></p> <p><code>! not</code></p></li> <li><p>模糊查询</p> <p>like:一般搭配通配符使用，可以判断字符型或数值型
通配符：%任意多个字符，_任意单个字符</p> <p>between and
in
is null /is not null：用于判断null值</p></li></ul> <h4 id="is-null-vs"><a href="#is-null-vs" class="header-anchor">#</a> is null vs &lt;=&gt;</h4> <div class="language- extra-class"><pre><code>	普通类型的数值		null值		可读性
</code></pre></div><p>is null		×								√				√
&lt;=&gt;			√								√				×</p> <h4 id="代码-2"><a href="#代码-2" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 进阶 2 : 条件查询</span>
<span class="token comment">/*
语法 : 
	
	SELECT
	查询列表
	FROM
	表名
	WHERE
	筛选条件;
	
分类 : 
		1. 按条件表达式筛选
			条件运算符 : &gt; &lt; = !=(&lt;&gt;) &gt;= &lt;=
			
		2. 按逻辑表达式筛选	
			逻辑运算符 : 
				&amp;&amp; || !
				and or not
				
				&amp;&amp; 和 and : 两个条件都为 true, 结果为 true, 反之为 false
				|| 和 or : 只要有一个条件为 true, 结果为 true, 反之为 false
				! 和 not : 如果连接的条件本身为 false, 结果为 true, 反之为 false
				
		3. 模糊查询
					like
					between and
					in
					is null
					
*/</span>

<span class="token comment"># 一. 按条件表达式筛选</span>
<span class="token comment"># 案例一 : 查询 工资 &gt; 10000 的员工</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	salary <span class="token operator">&gt;</span> <span class="token number">10000</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例二 : 查询部门编号不等于 90 号的员工名和部门</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>department_id <span class="token operator">&lt;&gt;</span> <span class="token number">90</span><span class="token punctuation">;</span>
	
<span class="token comment"># 二. 按逻辑表达式筛选</span>
<span class="token comment"># 案例一 : 查询工资在 1w 到 2w 之间的员工名, 工资, 奖金</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>commission_pct 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">&gt;=</span> <span class="token number">10000</span> 
	<span class="token operator">AND</span> employees<span class="token punctuation">.</span>salary <span class="token operator">&lt;=</span> <span class="token number">20000</span><span class="token punctuation">;</span> 
	
<span class="token comment"># 案例二 : 查询部门编号不是在 90 - 110之间, 或者工资高于 1.5w 的员工信息</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>department_id <span class="token operator">&lt;</span> <span class="token number">90</span> <span class="token operator">OR</span> employees<span class="token punctuation">.</span>department_id <span class="token operator">&gt;</span> <span class="token number">110</span> <span class="token operator">OR</span> employees<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> <span class="token number">15000</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	<span class="token operator">NOT</span> <span class="token punctuation">(</span> employees<span class="token punctuation">.</span>department_id <span class="token operator">&gt;=</span> <span class="token number">90</span> <span class="token operator">AND</span> employees<span class="token punctuation">.</span>department_id <span class="token operator">&lt;=</span> <span class="token number">110</span> <span class="token punctuation">)</span> 
	<span class="token operator">OR</span> employees<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> <span class="token number">15000</span><span class="token punctuation">;</span>
	
<span class="token comment"># 三. 模糊插叙</span>
<span class="token comment">/*
like
BETWEEN and
in
in null | is not null
*/</span>

<span class="token comment"># 1. LIKE</span>
<span class="token comment">/*
特点 : 
		1. 一般和通配符搭配使用
			通配符 : 
				% 任意多个字符, 包含 0 个字符
				_ 任意单个字符
		2. 可以判断字符型或数值型		
*/</span>

<span class="token comment"># 案例一 : 查询员工名中包含字符a的员工信息</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">'%a%'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例二 : 查询员工名中, 第三个字符为 n 的, 第五个字符为 l 的员工名和工资</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">'__n_l%'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例三 : 查询员工名中第二个字符为_的员工名</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">'_\_%'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">'_$_%'</span> <span class="token keyword">ESCAPE</span> <span class="token string">'$'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 2. BETWEEN AND</span>
<span class="token comment">/*

1. 使用 BETWEEN AND 可以提高语句的简洁度
2. 包含临界值
3. 两个临界值不要调换顺序
*/</span>

<span class="token comment"># 案例一 : 查询员工编号在 100 - 120 之间的员工信息</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>employee_id <span class="token operator">BETWEEN</span> <span class="token number">100</span> 
	<span class="token operator">AND</span> <span class="token number">120</span><span class="token punctuation">;</span><span class="token comment"># 3. IN</span>
<span class="token comment">/*
用于去判断某字段的值是否属于 in 列表中的某一项
特点 : 
	1. 使用 in 提高语句简洁度
	2. in 列表的值类型必须一致或者兼容
			'123' 123
	3. in 里面不支持通配符		
*/</span>

<span class="token comment"># 案例一 : 查询员工的工种编号是 AD_PRES, AD_VP 中的一个员工名和工种编号</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>job_id <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token string">'AD_PRES'</span><span class="token punctuation">,</span> <span class="token string">'AD_VP'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># 4. is null 和 is not null</span>
<span class="token comment">/*
= 或者 &lt;&gt; 不能用于判断 null 值
is null 或者 is not null 可以用于判断 null 值
*/</span>

<span class="token comment"># 案例一 : 查询没有奖金的员工名和奖金率</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>commission_pct 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>commission_pct 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
	
<span class="token comment"># 安全等于 : &lt;=&gt;</span>
<span class="token comment"># 案例一 : 查询没有奖金的员工名和奖金率</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>commission_pct 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>commission_pct <span class="token operator">&lt;=&gt;</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例二 : 查询工资为 12000 的员工信息</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">&lt;=&gt;</span> <span class="token number">12000</span><span class="token punctuation">;</span>
	
<span class="token comment"># is null vs &lt;=&gt;</span>
<span class="token comment">/* 
is null : 仅仅可以判断 null 值, 可读性较高, 建议使用
&lt;=&gt; : 既可以判断 null 值, 又可以判断普通的数值, 可读性较低
*/</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br></div></div><h4 id="练习-2"><a href="#练习-2" class="header-anchor">#</a> 练习</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 查询工资大于 12000 的员工姓名和工资</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> <span class="token number">12000</span><span class="token punctuation">;</span>
	
<span class="token comment"># 2. 查询员工号为 176 的员工的姓名和部门号和年薪</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">*</span> <span class="token punctuation">(</span>
	<span class="token number">1</span> <span class="token operator">+</span> IFNULL<span class="token punctuation">(</span> employees<span class="token punctuation">.</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 年薪 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> <span class="token number">176</span><span class="token punctuation">;</span>
	
<span class="token comment"># 3. 选择工资不在 5000 到 12000 的员工的姓名和工资</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">BETWEEN</span> <span class="token number">5000</span> 
	<span class="token operator">AND</span> <span class="token number">12000</span><span class="token punctuation">;</span>
	
<span class="token comment"># 4. 选择在 20 或 50 号部门工作的员工姓名和部门号</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>department_id <span class="token operator">BETWEEN</span> <span class="token number">20</span> 
	<span class="token operator">AND</span> <span class="token number">50</span><span class="token punctuation">;</span>
	
<span class="token comment"># 5. 选择公司中没有管理者的员工姓名及 job_id</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>manager_id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
	
<span class="token comment"># 6. 选择公司中有奖金的员工姓名,工资和奖金级别</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>commission_pct 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
	
<span class="token comment"># 7. 选择员工姓名的第三个字母是 a 的员工姓名</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">'__a%'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 8. 选择姓名中有字母 a 和 e 的员工姓名</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">'%a%e%'</span> 
	<span class="token operator">OR</span> employees<span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">'%e%a%'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 9. 显示出表 employees 表中 first_name 以 'e'结尾的员工信息</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>first_name <span class="token operator">LIKE</span> <span class="token string">'%e'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 10. 显示出表 employees 部门编号在 80-100 之间 的姓名、职位</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>department_id <span class="token operator">BETWEEN</span> <span class="token number">80</span> 
	<span class="token operator">AND</span> <span class="token number">100</span><span class="token punctuation">;</span>
	
<span class="token comment"># 11. 显示出表 employees 的 manager_id 是 100,101,110 的员工姓名、职位</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>manager_id <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">110</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment"># 查询 	employees 表中, job_id 不为 &quot;IT&quot; 或者 工资 为 12000 的员工信息</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	job_id <span class="token operator">&lt;&gt;</span> <span class="token string">'IT'</span> 
	<span class="token operator">OR</span> salary <span class="token operator">=</span> <span class="token number">12000</span><span class="token punctuation">;</span>
	
<span class="token comment"># 查看部门 departments 表的结构</span>
<span class="token keyword">DESC</span> departments<span class="token punctuation">;</span>

<span class="token comment"># 查询部门 departments 表中涉及到了哪些位置编号</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span>
	location_id 
<span class="token keyword">FROM</span>
	departments<span class="token punctuation">;</span>
	
<span class="token comment"># 面试题</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	commission_pct <span class="token operator">LIKE</span> <span class="token string">&quot;%%&quot;</span> 
	<span class="token operator">AND</span> last_name <span class="token operator">LIKE</span> <span class="token string">&quot;%%&quot;</span><span class="token punctuation">;</span>	

<span class="token comment"># 不一样, 改成 or 并且所有字段都写了结果就一样了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br></div></div><h3 id="进阶三-排序查询"><a href="#进阶三-排序查询" class="header-anchor">#</a> 进阶三 : 排序查询</h3> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询列表
<span class="token keyword">from</span>
	表
<span class="token keyword">where</span>
	筛选条件
<span class="token keyword">order</span> <span class="token keyword">by</span>
	排序列表 <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>特点</p></blockquote> <ul><li><p>ASC : 升序</p> <p>DESC : 降序</p> <p>如果不写, 默认升序</p></li> <li><p>排序列表支持 单个字段 多个字段 函数 表达式 别名</p></li> <li><p>order by 的位置一般放在查询语句的最后 (除 limit 语句之外)</p></li></ul> <h4 id="代码-3"><a href="#代码-3" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 进阶3 : 排序查询</span>

<span class="token comment">/*
语法：
select 查询列表
from 表名
[where  筛选条件]
order by 排序的字段或表达式;


特点：
1. asc代表的是升序, 可以省略
   desc代表的是降序

2. order by子句可以支持 单个字段 别名 表达式 函数 多个字段

3. order by子句在查询语句的最后面, 除了limit子句

*/</span>

<span class="token comment"># 案例一 : 查询员工信息, 要求工资从高到低排序</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	salary<span class="token punctuation">;</span>	
	
<span class="token comment"># 2. 添加筛选条件再排序</span>
<span class="token comment"># 案例二 : 查询部门编号 &gt;= 90 的员工信息, 并按员工编号降序</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	department_id <span class="token operator">&gt;=</span> <span class="token number">90</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	employee_id <span class="token keyword">DESC</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 按表达式排序</span>
<span class="token comment"># 案例三 : 查询员工信息 按年薪降序 [按表达式排序]</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span><span class="token punctuation">,</span>
	salary <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 年薪
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	salary <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">*</span><span class="token punctuation">(</span>
	<span class="token number">1</span><span class="token operator">+</span>IFNULL <span class="token punctuation">(</span> commission_pct<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例四 : 	查询员工信息 按年薪降序 [按别名排序]</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span><span class="token punctuation">,</span>
	salary <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 年薪
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	年薪 <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例五 : 按姓名的长度显示员工的姓名和工资 [按函数排序]</span>
<span class="token keyword">SELECT</span>
	LENGTH<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">)</span> 字节长度<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	字节长度 <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例六 : 查询员工信息, 要求先按工资升序, 再按员工编号降序 [按多个字段排序]</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> employees<span class="token punctuation">.</span>employee_id <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br></div></div><h4 id="练习-3"><a href="#练习-3" class="header-anchor">#</a> 练习</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 查询员工的姓名和部门号和年薪，按年薪降序 按姓名升序</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> IFNULL<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> 年薪
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 
	年薪 <span class="token keyword">DESC</span><span class="token punctuation">,</span> employees<span class="token punctuation">.</span>last_name<span class="token punctuation">;</span>

<span class="token comment"># 2. 选择工资不在 8000 到 17000 的员工的姓名和工资，按工资降序</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">NOT</span> <span class="token operator">BETWEEN</span> <span class="token number">8000</span> <span class="token operator">AND</span> <span class="token number">17000</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>


<span class="token comment"># 3. 查询邮箱中包含 e 的员工信息，并先按邮箱的字节数降序，再按部门号升序</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>email <span class="token operator">LIKE</span> <span class="token string">'%e%'</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	LENGTH<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>email<span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">,</span> employees<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
	

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="进阶四-常见函数"><a href="#进阶四-常见函数" class="header-anchor">#</a> 进阶四 : 常见函数</h3> <h4 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h4> <blockquote><p>概述</p></blockquote> <p>功能：类似于java中的方法
好处：提高重用性和隐藏实现细节</p> <blockquote><p>调用</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 函数名<span class="token punctuation">(</span>实参列表<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 进阶四 : 常见函数</span>

<span class="token comment">/*
概念 : 类似于 Java 的方法, 将一组逻辑语句封装在方法体中, 对外暴露方法名

好处 : 
	1. 隐藏了实现细节
	2. 提高代码的重用性
	
调用 : 
	SELECT 
		函数名(实参列表)
	[FROM 表名]
	
	
特点 :	
	1. 叫什么 (函数名)
	2. 干什么 (函数功能)
	
分裂 :
	1. 单行函数
		如 CONCAT(str1,str2,...), LENGTH(str), IFNULL(expr1,expr2) ...
		
	2. 分组函数 
		功能 : 做统计使用, 又称为 统计函数, 聚合函数, 组函数
		

单行函数 : 
	1. 字符函数
	
	2. 数学函数
	
	3. 日期函数
	
	4. 其他函数 [补充]
	
	4. 流程控制函数 [补充]
	
常见函数 : 
	字符函数 : 
		LENGTH(str)
		CONCAT(str1,str2,...)
		SUBSTR(str,pos) | SUBSTR(str FROM pos FOR len) | SUBSTRING(str FROM pos) | SUBSTRING(str,pos,len)
		INSTR(str,substr)
		TRIM([remstr FROM] str) | TRIM([{BOTH | LEADING | TRAILING} [remstr] FROM] str)
		UPPER(str)
		LOWER(str)
		LPAD(str,len,padstr)
		RPAD(str,len,padstr)
		REPLACE(str,from_str,to_str)
	数学函数 :
		ROUND(X) | ROUND(X,D)
		CEIL(X)
		FLOOR(X)
		TRUNCATE(X,D)
		MOD(N,M)
	日期函数 : 
		NOW()
		CURDATE()
		CURTIME()
		YEAR(date)
		MONTH(date)
		DAY(date)
		HOUR(time)
		MINUTE(time)
		SECOND(time)
		STR_TO_DATE(str,format)
		DATE_FORMAT(date,format)
	其他函数 : 
		VERSION()
		DATABASE()
		USER()
	流程控制函数 : 
		IF(expr1,expr2,expr3)
		CASE	
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br></div></div><h4 id="单行函数"><a href="#单行函数" class="header-anchor">#</a> 单行函数</h4> <h5 id="字符函数"><a href="#字符函数" class="header-anchor">#</a> 字符函数</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>concat : 连接
substr : 截取子串
upper : 变大写
lower : 变小写
<span class="token keyword">replace</span> : 替换
length : 获取 字节 长度 <span class="token punctuation">(</span>汉子占三个字节<span class="token punctuation">)</span>
trim : 去前后空格
lpad : 左填充
rpad : 右填充
instr : 获取字段第一次出现的索引<span class="token punctuation">(</span>从 <span class="token number">1</span> 开始<span class="token punctuation">,</span> 找不到返回 <span class="token number">0</span> <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 一. 字符函数</span>

<span class="token comment"># 1. LENGTH(str) : 获取参数值的字节个数</span>
<span class="token keyword">SELECT</span> LENGTH<span class="token punctuation">(</span><span class="token string">'yixihan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> LENGTH<span class="token punctuation">(</span><span class="token string">'易曦翰'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 查看 mysql 的编码格式</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%char%'</span><span class="token punctuation">;</span>

<span class="token comment"># 2. CONCAT(str1,str2,...) : 拼接字符串</span>
<span class="token keyword">SELECT</span>
	CONCAT<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span><span class="token string">'_'</span><span class="token punctuation">,</span>employees<span class="token punctuation">.</span>first_name<span class="token punctuation">)</span> 姓名
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 3. UPPER(str) | LOWER(str)</span>
<span class="token keyword">SELECT</span> UPPER<span class="token punctuation">(</span><span class="token string">'john'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token keyword">SELECT</span> LOWER<span class="token punctuation">(</span><span class="token string">'JOHN'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	

<span class="token comment"># 案例一 : 将姓变大写, 名变小写, 然后拼接</span>
<span class="token keyword">SELECT</span>
	CONCAT<span class="token punctuation">(</span>UPPER<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'_'</span><span class="token punctuation">,</span> LOWER<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>first_name<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment">#3. SUBSTR(str FROM pos FOR len) | SUBSTRING(str FROM pos) | SUBSTR(str,pos) | SUBSTRING(str,pos,len) </span>
<span class="token comment"># 注意 : 索引从 1 开始</span>

<span class="token comment"># 截取从指定索引处后面所有字符</span>
<span class="token keyword">SELECT</span> SUBSTR<span class="token punctuation">(</span><span class="token string">'李莫愁爱上了陆展元'</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span> out_put<span class="token punctuation">;</span>

<span class="token comment"># 截取从指定索引处截取指定字符长度的字符</span>
<span class="token keyword">SELECT</span> SUBSTR<span class="token punctuation">(</span><span class="token string">'李莫愁爱上了陆展元'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> out_put<span class="token punctuation">;</span>

<span class="token comment"># 案例二 : 姓名中首字符大写, 其他字符小写, 然后用 '_' 拼接, 显示出来</span>
<span class="token keyword">SELECT</span>
	CONCAT<span class="token punctuation">(</span>SUBSTR<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'_'</span><span class="token punctuation">,</span>SUBSTR<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 5. INSTR(str,substr) 返回 substr 子串在 str 里面首次出现的索引, 如果找不到, 返回 0</span>
<span class="token keyword">SELECT</span> INSTR<span class="token punctuation">(</span><span class="token string">'杨不悔爱上了殷六侠'</span><span class="token punctuation">,</span><span class="token string">'殷六侠'</span><span class="token punctuation">)</span> out_put<span class="token punctuation">;</span>

<span class="token comment"># 6. TRIM([remstr FROM] str) | TRIM([{BOTH | LEADING | TRAILING} [remstr] FROM] str)</span>
<span class="token keyword">SELECT</span>	LENGTH<span class="token punctuation">(</span>TRIM<span class="token punctuation">(</span><span class="token string">'     张翠山      '</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> out_put<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>	TRIM<span class="token punctuation">(</span><span class="token string">'a'</span> <span class="token keyword">FROM</span> <span class="token string">'aaaaaaaaaaaaaaa张aaaaaaaaaaaa翠山aaaaaaaaaaaaaaaaaaaaaa'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> out_put<span class="token punctuation">;</span>

<span class="token comment"># 7. LPAD(str,len,padstr) : 用指定的字符实现左填充指定长度, 若原本长度已够, 则会从右边开始截断</span>
<span class="token keyword">SELECT</span> LPAD<span class="token punctuation">(</span><span class="token string">'殷素素'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span> out_put <span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> LPAD<span class="token punctuation">(</span><span class="token string">'殷素素'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span> out_put <span class="token punctuation">;</span>

<span class="token comment"># 8. RPAD(str,len,padstr) : 用指定的字符实现右填充指定长度, 若原本长度已够, 则会从右边开始截断</span>
<span class="token keyword">SELECT</span> RPAD<span class="token punctuation">(</span><span class="token string">'殷素素'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'ab'</span><span class="token punctuation">)</span> out_put <span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> RPAD<span class="token punctuation">(</span><span class="token string">'殷素素'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'ab'</span><span class="token punctuation">)</span> out_put <span class="token punctuation">;</span>

<span class="token comment"># 9. REPLACE(str,from_str,to_str) : 替换</span>
<span class="token keyword">SELECT</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span><span class="token string">'张无忌爱上了周芷若'</span><span class="token punctuation">,</span><span class="token string">'周芷若'</span><span class="token punctuation">,</span><span class="token string">'赵敏'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> out_put<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span><span class="token string">'周芷若爱上了周芷若'</span><span class="token punctuation">,</span><span class="token string">'周芷若'</span><span class="token punctuation">,</span><span class="token string">'赵敏'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> out_put<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h5 id="数学函数"><a href="#数学函数" class="header-anchor">#</a> 数学函数</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>ceil : 向上取整
floor : 向下取整
round : 四舍五入
mod : 取模
<span class="token keyword">truncate</span> : 截断
rand : 获取随机数<span class="token punctuation">,</span> 返回 <span class="token number">0</span> <span class="token operator">-</span> <span class="token number">1</span> 之间的小数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 二. 数学函数</span>

<span class="token comment"># 1. ROUND(X) | ROUND(X,D) : 四舍五入</span>
<span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">43.98</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">43.58</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token number">43.58573</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 2. CEIL(X) : 返回大于等于该参数的最小整数</span>
<span class="token keyword">SELECT</span> CEIL<span class="token punctuation">(</span><span class="token number">1.25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> CEIL<span class="token punctuation">(</span><span class="token number">1.95</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> CEIL<span class="token punctuation">(</span><span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> CEIL<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 3. FLOOR(X) : 返回小于等于该参数的最大整数</span>
<span class="token keyword">SELECT</span> FLOOR<span class="token punctuation">(</span><span class="token number">1.25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> FLOOR<span class="token punctuation">(</span><span class="token number">1.95</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> FLOOR<span class="token punctuation">(</span><span class="token number">1.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> FLOOR<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 4. TRUNCATE(X,D) : 截断</span>
<span class="token keyword">SELECT</span> <span class="token keyword">TRUNCATE</span><span class="token punctuation">(</span><span class="token number">1.685</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 5. MOD(N,M) : 取余 被除数如果为正, 结果为正, 被除数如果为负, 结果为负</span>
<span class="token comment">/*
MOD(N,M) : a - a / b * b
*/</span>
<span class="token keyword">SELECT</span> <span class="token function">MOD</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">MOD</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">MOD</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h5 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>now : 返回当前日期 <span class="token operator">+</span> 时间
curdate : 返回当前日期
curtime : 返回当前时间
<span class="token keyword">year</span> : 返回年
<span class="token keyword">month</span> : 返回月
<span class="token keyword">day</span> : 返回天
<span class="token keyword">hour</span> : 返回小时
<span class="token keyword">minute</span> : 返回分钟
<span class="token keyword">second</span> : 返回秒

str_to_date : 将字符串转换为日期
date_format : 将日期转换为字符串

datediff : 返回两个日期相差的天数
monthname : 以英文方式返回月
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 三. 日期函数</span>

<span class="token comment"># 1. NOW() : 返回当前系统日期 + 时间</span>
<span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 2. CURDATE() : 返回当前系统日期, 不包含时间</span>
<span class="token keyword">SELECT</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 3. CURTIME() : 返回当前系统时间, 不包含日期</span>
<span class="token keyword">SELECT</span> CURTIME<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 可以获取指定的部分, 年 月 日 小时, 分钟, 秒</span>
<span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> MONTHNAME<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> 
	<span class="token keyword">DAY</span><span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> 
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 5. STR_TO_DATE(str,format) : 将日期格式的字符转换成指定个数的日期</span>
<span class="token keyword">SELECT</span> STR_TO_DATE<span class="token punctuation">(</span><span class="token string">'2021-10-31'</span><span class="token punctuation">,</span><span class="token string">'%Y年%m月%d日'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 案例一 : 查询入职日期为 1992-4-3 的员工信息</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	hiredate <span class="token operator">=</span> STR_TO_DATE<span class="token punctuation">(</span><span class="token string">'4-3 1992'</span><span class="token punctuation">,</span><span class="token string">'%m-%d %Y'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 6. DATE_FORMAT(date,format) : 将日期转换成字符</span>
<span class="token keyword">SELECT</span> DATE_FORMAT<span class="token punctuation">(</span><span class="token string">'2021-10-31'</span><span class="token punctuation">,</span><span class="token string">'%Y-%m-%d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 案例二 : 查询有奖金的员工名和入职日期 (xx月/xx日 xx年)</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	DATE_FORMAT<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>hiredate<span class="token punctuation">,</span><span class="token string">'%m月/%d日 %Y年'</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h5 id="其它函数"><a href="#其它函数" class="header-anchor">#</a> 其它函数</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>version : 当前数据库服务器的版本
<span class="token keyword">database</span> :打开当前的数据库
<span class="token keyword">user</span> : 当前用户
password<span class="token punctuation">(</span><span class="token string">'字符'</span><span class="token punctuation">)</span> : 返回该字符的密码形式<span class="token punctuation">(</span>加密<span class="token punctuation">)</span>
md5<span class="token punctuation">(</span><span class="token string">'字符'</span><span class="token punctuation">)</span> : 以 md5 方式加密该字符
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 四. 其它函数</span>

<span class="token keyword">SELECT</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token keyword">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># password</span>
<span class="token keyword">SELECT</span>
	PASSWORD<span class="token punctuation">(</span><span class="token string">'0815'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	MD5<span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="流程控制函数"><a href="#流程控制函数" class="header-anchor">#</a> 流程控制函数</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">if</span><span class="token punctuation">(</span>条件表达式<span class="token punctuation">,</span> 表达式 <span class="token number">1</span><span class="token punctuation">,</span> 表达式 <span class="token number">2</span><span class="token punctuation">)</span> : 如果条件表达式成立<span class="token punctuation">,</span> 则返回表达式 <span class="token number">1</span><span class="token punctuation">,</span> 否则返回表达式 <span class="token number">2</span>

<span class="token keyword">case</span> 情况 <span class="token number">1</span>
<span class="token keyword">case</span> 变量或者表达式或者字段
<span class="token keyword">when</span> 常量 <span class="token keyword">then</span> 值 <span class="token number">1</span>
<span class="token keyword">when</span> 常量 <span class="token keyword">then</span> 值 <span class="token number">2</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">else</span> 值 n
<span class="token keyword">end</span>

<span class="token keyword">case</span> 情况 <span class="token number">2</span>
<span class="token keyword">case</span>
<span class="token keyword">when</span> 条件 <span class="token number">1</span> <span class="token keyword">then</span> 值 <span class="token number">1</span>
<span class="token keyword">when</span> 条件 <span class="token number">2</span> <span class="token keyword">then</span> 值 <span class="token number">2</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">else</span> 值 n
<span class="token keyword">end</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 五. 流程控制函数</span>

<span class="token comment"># 1. IF(expr1,expr2,expr3) 函数 : if else 的效果</span>

<span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'大'</span><span class="token punctuation">,</span><span class="token string">'小'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>commission_pct<span class="token punctuation">,</span>
	<span class="token keyword">IF</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token string">'没奖金'</span><span class="token punctuation">,</span><span class="token string">'有奖金'</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
	employees	
	
<span class="token comment"># 2. case 函数的使用一 : switch case 的效果</span>
<span class="token comment">/*
Java 中
switch (变量或者表达式) {
	case 常量 1 : 语句 1; break;
	case 常量 2 : 语句 2; break;
	case 常量 3 : 语句 3; break;
	...
	default : 语句 n; break;


mysql 中
case 要判断的字段或者表达式
when 常量 1 then 要显示的值 1 或语句 1;
when 常量 2 then 要显示的值 2 或语句 2;
when 常量 3 then 要显示的值 3 或语句 3;
...
else 要显示的值 n 或语句 n;
end

*/</span>	

<span class="token comment">/*
案例一 : 查询员工的工资, 要求
部门号 = 30, 显示的工资为1.1倍;
部门号 = 40, 显示的工资为1.2倍;
部门号 = 50, 显示的工资为1.3倍;
其他部门号, 显示原工资;
*/</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 原始工资<span class="token punctuation">,</span>
<span class="token keyword">CASE</span>
		employees<span class="token punctuation">.</span>department_id 
		<span class="token keyword">WHEN</span> <span class="token number">30</span> <span class="token keyword">THEN</span>
		employees<span class="token punctuation">.</span>salary <span class="token operator">*</span> <span class="token number">1.1</span> 
		<span class="token keyword">WHEN</span> <span class="token number">40</span> <span class="token keyword">THEN</span>
		employees<span class="token punctuation">.</span>salary <span class="token operator">*</span> <span class="token number">1.2</span> 
		<span class="token keyword">WHEN</span> <span class="token number">50</span> <span class="token keyword">THEN</span>
		employees<span class="token punctuation">.</span>salary <span class="token operator">*</span> <span class="token number">1.3</span> <span class="token keyword">ELSE</span> employees<span class="token punctuation">.</span>salary 
	<span class="token keyword">END</span> <span class="token keyword">AS</span> 新工资 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
	
<span class="token comment">#  3. case 函数的使用二 : 类似于 多重 if</span>
<span class="token comment">/*
Java 中
if (条件一) {
	语句一;
} else if (条件二) {
	语句二;
} else if (条件二) {
	语句三;
}
...
else {
	语句 n ;
}

mysql 中
case
when 条件一 then 要显示的值 1 或语句 1;
when 条件二 then 要显示的值 2 或语句 2;
when 条件三 then 要显示的值 3 或语句 3;
...
else 要显示的值 n 或语句 n;
end
*/</span>	
	
<span class="token comment"># 案例 : 查询员工的工资情况</span>
<span class="token comment">/*
如果工资大于 2w, 显示 A 级别	
如果工资大于 1.5w, 显示 B 级别	
如果工资大于 1w, 显示 C 级别	
否则, 显示 D 级别
*/</span>	

<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
<span class="token keyword">CASE</span>
		
		<span class="token keyword">WHEN</span> employees<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> <span class="token number">20000</span> <span class="token keyword">THEN</span>
		<span class="token string">'A'</span> 
		<span class="token keyword">WHEN</span> employees<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> <span class="token number">15000</span> <span class="token keyword">THEN</span>
		<span class="token string">'B'</span> 
		<span class="token keyword">WHEN</span> employees<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> <span class="token number">10000</span> <span class="token keyword">THEN</span>
		<span class="token string">'C'</span> <span class="token keyword">ELSE</span> <span class="token string">'D'</span> 
	<span class="token keyword">END</span> <span class="token keyword">AS</span> 工资级别 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br></div></div><h5 id="练习-4"><a href="#练习-4" class="header-anchor">#</a> 练习</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 显示系统时间(注：日期+时间)</span>
<span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 2. 查询员工号，姓名，工资，以及工资提高百分之 20%后的结果（new salary）</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary <span class="token keyword">AS</span> 原工资<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">*</span> <span class="token number">1.2</span> <span class="token keyword">AS</span> 现工资
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>

<span class="token comment"># 3. 将员工的姓名按首字母排序，并写出姓名的长度（length）</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	SUBSTR<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> 首字符<span class="token punctuation">,</span>
	LENGTH<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">)</span> 字符长度
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	SUBSTR<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
做一个查询，产生下面的结果
&lt;last_name&gt; earns &lt;salary&gt; monthly but wants &lt;salary*3&gt;
			Dream Salary
King earns 24000 monthly but wants 72000
*/</span>
<span class="token keyword">SELECT</span>
	CONCAT<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span><span class="token string">' earns '</span><span class="token punctuation">,</span> employees<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> <span class="token string">' monthly but wants '</span><span class="token punctuation">,</span> employees<span class="token punctuation">.</span>salary <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">'Dream Salary'</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">LIMIT</span>
	<span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">/*
5. 使用 case-when，按照下面的条件：
job grade
AD_PRES A
ST_MAN B
IT_PROG C
SA_REP D
ST_CLERK E
产生下面的结果
Last_name 	Job_id 		Grade
king 		AD_PRES 	A
*/</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> 
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span> 
<span class="token keyword">CASE</span>
	<span class="token keyword">WHEN</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> <span class="token string">'AD_PRES'</span> <span class="token keyword">THEN</span> <span class="token string">'A'</span>
	<span class="token keyword">WHEN</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> <span class="token string">'ST_MAN'</span> <span class="token keyword">THEN</span> <span class="token string">'B'</span>
	<span class="token keyword">WHEN</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> <span class="token string">'IT_PROG'</span> <span class="token keyword">THEN</span> <span class="token string">'C'</span>
	<span class="token keyword">WHEN</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> <span class="token string">'SA_REP'</span> <span class="token keyword">THEN</span> <span class="token string">'D'</span>
	<span class="token keyword">WHEN</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> <span class="token string">'ST_CLERK'</span> <span class="token keyword">THEN</span> <span class="token string">'E'</span>
	<span class="token keyword">END</span> <span class="token keyword">as</span> <span class="token string">'Grade'</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>	
	employees<span class="token punctuation">.</span>job_id <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token string">'AD_PRES'</span><span class="token punctuation">,</span><span class="token string">'ST_MAN'</span><span class="token punctuation">,</span><span class="token string">'IT_PROG'</span><span class="token punctuation">,</span><span class="token string">'ST_CLERK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h4 id="分组函数"><a href="#分组函数" class="header-anchor">#</a> 分组函数</h4> <blockquote><p>分类</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>max : 最大值
min : 最小值
avg : 平均值
count : 计算个数
sum : 和
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	<span class="token function">max</span><span class="token punctuation">(</span>字段<span class="token punctuation">)</span>
<span class="token keyword">from</span>
	表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>特点</p></blockquote> <ul><li><p>支持的类型</p> <ul><li>sum 和 avg 一般用于处理数值型</li> <li>max min count 可以处理任何数据类型</li></ul></li> <li><p>以上分组函数都忽略 null</p></li> <li><p>都可以搭配 distinct 使用, 实现去重的统计</p> <p><code>select sum(distinct 字段) from 表;</code></p></li> <li><p>count 函数</p> <p>count(字段) : 统计该字段非空值的个数</p> <p>count(*) : 统计结果集的行数</p> <p>count(1) : 统计结果集的行数</p> <ul><li><p>效率上 :</p> <p>MyISAM 存储引擎，count(*)最高</p> <p>InnoDB 存储引擎，count(* ) 和count(1)效率&gt;count(字段)</p></li></ul></li> <li><p>和分组函数一同查询的字段, 要求是 group by 后出现的字段</p></li></ul> <h5 id="代码-4"><a href="#代码-4" class="header-anchor">#</a> 代码</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 二. 分组函数</span>

<span class="token comment">/*
功能 : 用作统计使用, 又称为聚合函数, 或统计函数或组函数

分类 : 
	sum : 求和
	avg : 平均值
	max : 最大值
	min : 最小值
	count : 计算个数
	
特点 : 
		1. sum, avg 一般用于处理数值型
		   max, min, count 可以处理任何数据类型
		
		2. 以上分组函数都忽略 null 值	 
		3. 可以和 DISTINCT 搭配实现去重
		4. count 函数的单独介绍
			一般用 COUNT(*) 用作统计行数
		5. 和分组函数一同查询的字段要求是 GROUP BY 后的字段
*/</span>

<span class="token comment"># 1. 简单使用</span>
<span class="token keyword">SELECT</span> 
	<span class="token function">SUM</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 总和<span class="token punctuation">,</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 最大值<span class="token punctuation">,</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 最小值<span class="token punctuation">,</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 平均数<span class="token punctuation">,</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 总个数
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span> 
	<span class="token function">SUM</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 总和<span class="token punctuation">,</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 最大值<span class="token punctuation">,</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 最小值<span class="token punctuation">,</span>
	<span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> 平均数<span class="token punctuation">,</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 总个数
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	

<span class="token comment"># 2. 参数支持哪些类型</span>

<span class="token keyword">SELECT</span> 
	<span class="token function">SUM</span><span class="token punctuation">(</span>last_name<span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token function">AVG</span><span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span>last_name<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>commission_pct<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 3. 是否忽略 null 值</span>

<span class="token keyword">SELECT</span>
		<span class="token function">SUM</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">AVG</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">MAX</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">MIN</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">COUNT</span><span class="token punctuation">(</span>commission_pct<span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
		employees<span class="token punctuation">;</span>
		
<span class="token comment"># 5. 和 DISTINCT 搭配</span>
<span class="token keyword">SELECT</span>
			<span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token function">SUM</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token function">COUNT</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
			employees<span class="token punctuation">;</span>
			
<span class="token comment"># 6. count 函数的详细介绍</span>
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment">/*
 效率问题 : 
	INNODB : count(*) 和 COUNT(1) 的效率最高, 比 COUNT(字段) 高
	MYISAM : count(*) 的效率最高
 */</span>
 
 <span class="token comment"># 6. 和分组函数一同查询的字段有要求</span>
  
 <span class="token comment">/*
 错误的
 SELECT 
	AVG(employees.salary), employees.employee_id
 FROM	
	employees;
	*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br></div></div><h5 id="练习-5"><a href="#练习-5" class="header-anchor">#</a> 练习</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 6. 查询公司员工工资的最大值, 最小值, 平均值, 总和</span>
<span class="token keyword">SELECT</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 最大值<span class="token punctuation">,</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 最小值<span class="token punctuation">,</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 平均值<span class="token punctuation">,</span>
	<span class="token function">SUM</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 总和
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 7. 查询员工表中的最大入职时间与最小入职时间的相差天数</span>
<span class="token keyword">SELECT</span>
	DATEDIFF<span class="token punctuation">(</span><span class="token function">MAX</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">)</span> DIFFERENCE
<span class="token keyword">FROM</span>
	employees
	
<span class="token comment"># 8. 查询部门编号为 90 的员工个数</span>
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> 个数
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token number">90</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="进阶五-分组查询"><a href="#进阶五-分组查询" class="header-anchor">#</a> 进阶五 : 分组查询</h3> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询列表
<span class="token keyword">from</span>
	表名
<span class="token punctuation">[</span><span class="token keyword">where</span>
	筛选条件<span class="token punctuation">]</span>
<span class="token keyword">group</span> <span class="token keyword">by</span>
	分组的字段
<span class="token punctuation">[</span><span class="token keyword">having</span>
	分组后的筛选条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span>
	排序列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">limit</span>
	限制子句<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>特点</p></blockquote> <div class="language- extra-class"><pre><code>						使用关键字					筛选的表					位置
</code></pre></div><p>分组前筛选		 where							原始表						group by的前面
分组后筛选		 having						   分组后的结果			 group by 的后面</p> <h4 id="代码-5"><a href="#代码-5" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 进阶五 : 分组查询</span>

<span class="token comment">/*
语法 : 
SELECT 分组函数 , 列 (要求出现在 GROUP BY 后面)
FROM 表名
[WHERE 筛选条件]
GROUP BY 分组的列表
[ORDER BY 子句]

注意 : 查询列表必须特殊, 要求是分组函数和 GROUP BY 后出现的字段

特点 :
	1. 分组查询中的筛选条件可以分为两类
			
										筛选源						位置										关键字
			分组前筛选		原始表						GROUP BY 子句的前面			WHERE
			分组后筛选		分组后的结果集		GROUP BY 子句的后面			HAVING
			
				1. 分组函数做条件肯定是放在 HAVING 子句中
				2. 能用分组前筛选的, 优先考虑使用分组前筛选
				
	2. GROUP BY 子句支持单个字段分组, 也支持多个字段分组, 多个字段之间用逗号隔开, 没有顺序要求
		 表达式或函数也支持(用的较少)
	3. 也可以添加排序, 排序放在整个分组查询的最后	 
*/</span>

<span class="token comment"># 引入 : 查询每个部门的平均工资</span>
<span class="token keyword">SELECT</span>
 <span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
 employees<span class="token punctuation">;</span>
 
 <span class="token comment"># 案例一 : 查询每个工种的最高工资 简单的分组查询</span>
<span class="token keyword">SELECT</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">;</span>
	
<span class="token comment"># 案例二 : 查询每个位置上的部门个数</span>
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	locations<span class="token punctuation">.</span>location_id
<span class="token keyword">FROM</span>
	locations
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	locations<span class="token punctuation">.</span>location_id<span class="token punctuation">;</span>
	
<span class="token comment"># 添加筛选条件(分组前的筛选)</span>
<span class="token comment"># 案例三 : 查询邮箱中包含 a 字符的, 每个部门的平均工资	</span>
<span class="token keyword">SELECT</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>email <span class="token operator">LIKE</span> <span class="token string">'%a%'</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
	
<span class="token comment"># 案例四 : 查询有奖金的每个领导收下员工的最高工资</span>
<span class="token keyword">SELECT</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>manager_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>manager_id<span class="token punctuation">;</span>
	
<span class="token comment"># 添加复杂的筛选条件 (分组后的筛选)	</span>
<span class="token comment"># 案例五 : 	查询哪个部门的员工个数 &gt; 2</span>

<span class="token comment"># 1. 查询每个部门的员工个数</span>
<span class="token comment"># 2. 根据 1 的结果进行筛选, 查询哪个部门的员工个数 &gt; 2</span>
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> count<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>department_id
<span class="token keyword">HAVING</span>
	count <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment"># 案例六 : 查询每个工种有奖金的员工的最高工资 &gt; 12000 的工种编号和最高工资</span>
<span class="token keyword">SELECT</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> MAX_salary<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>job_id
<span class="token keyword">HAVING</span>
	MAX_salary <span class="token operator">&gt;</span> <span class="token number">12000</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例七 : 	查询领导编号 &gt; 102 的每个领导手下的最低工资 &gt; 5000 的领导编号是哪个, 以及其最低工资</span>
<span class="token keyword">SELECT</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> minSalary<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>manager_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>manager_id <span class="token operator">&gt;</span> <span class="token number">120</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>manager_id
<span class="token keyword">HAVING</span>
	minSalary <span class="token operator">&gt;</span> <span class="token number">5000</span><span class="token punctuation">;</span>
	
<span class="token comment"># 按表达式 或 函数 进行分组</span>

<span class="token comment"># 案例八 : 	按员工姓名的长度分组, 查询每一组的员工个数, 筛选员工个数 &gt; 5 的有哪些, 并按员工个数排序</span>
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	LENGTH<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">)</span>
<span class="token keyword">FROM</span>	
	employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	LENGTH<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">)</span>
<span class="token keyword">HAVING</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">5</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> c<span class="token punctuation">,</span>
	LENGTH<span class="token punctuation">(</span>employees<span class="token punctuation">.</span>last_name<span class="token punctuation">)</span> l
<span class="token keyword">FROM</span>	
	employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	l
<span class="token keyword">HAVING</span>
	c
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	c <span class="token keyword">DESC</span><span class="token punctuation">;</span>	
	
<span class="token comment"># 按多个字段分组</span>

<span class="token comment"># 案例一 : 查询每个部门每个工种的员工的平均工资(顺序无所谓)</span>
<span class="token keyword">SELECT</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>manager_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>manager_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">;</span>
	
<span class="token comment"># 添加排序</span>

<span class="token comment"># 	案例一 : 查询每个部门每个工种的员工的平均工资(顺序无所谓), 并且按平均工资的高低显示</span>
<span class="token keyword">SELECT</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>manager_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
		employees<span class="token punctuation">.</span>department_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> 
		<span class="token operator">and</span> employees<span class="token punctuation">.</span>manager_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>manager_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id
<span class="token keyword">HAVING</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">10000</span>	
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br></div></div><h4 id="练习-6"><a href="#练习-6" class="header-anchor">#</a> 练习</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 查询各 job_id 的员工工资的最大值，最小值，平均值，总和，并按 job_id 升序</span>
<span class="token keyword">SELECT</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 最大值<span class="token punctuation">,</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 最小值<span class="token punctuation">,</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 平均值<span class="token punctuation">,</span>
	<span class="token function">SUM</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> 总和<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>job_id	
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">;</span>

<span class="token comment"># 2. 查询员工最高工资和最低工资的差距（DIFFERENCE）</span>
<span class="token keyword">SELECT</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> DIFFERENCE
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>

<span class="token comment"># 3. 查询各个管理者手下员工的最低工资，其中最低工资不能低于 6000，没有管理者的员工不计算在内</span>
<span class="token keyword">SELECT</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> minSalary<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>manager_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>manager_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>manager_id
<span class="token keyword">HAVING</span>
	minSalary <span class="token operator">&gt;=</span> <span class="token number">6000</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	minSalary <span class="token keyword">DESC</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 查询所有部门的编号，员工数量和工资平均值,并按平均工资降序</span>
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> avgSalary<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>department_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>department_id
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	avgSalary<span class="token punctuation">;</span>
	

<span class="token comment"># 5. 选择具有各个 job_id 的员工人数</span>
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h3 id="进阶六-连接查询"><a href="#进阶六-连接查询" class="header-anchor">#</a> 进阶六 : 连接查询</h3> <h4 id="概念-2"><a href="#概念-2" class="header-anchor">#</a> 概念</h4> <blockquote><p>含义</p></blockquote> <p>当查询中涉及到了多个表的字段，需要使用多表连接</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 
	字段<span class="token number">1</span>，字段<span class="token number">2</span>
<span class="token keyword">from</span> 
	表<span class="token number">1</span>，表<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>笛卡尔乘积：当查询多个表时，没有添加有效的连接条件，导致多个表所有行实现完全连接</p> <p>如何解决：添加有效的连接条件</p> <blockquote><p>分类 : 按年代分类</p></blockquote> <ul><li><p>sql 92</p> <ul><li><p>等值</p></li> <li><p>非等值</p></li> <li><p>自连接</p> <p>也支持一部分外连接 (用于 oracle, SqlServer, 但是 MySQL不支持)</p></li></ul></li> <li><p>sql 99 [推荐使用]</p> <ul><li>内连接
<ul><li>等值</li> <li>非等值</li> <li>自连接</li></ul></li> <li>外连接
<ul><li>左外</li> <li>右外</li> <li>全外(MySQL 不支持)</li></ul></li> <li>交叉连接(笛卡尔乘积)</li></ul></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 进阶六 : 连接查询</span>

<span class="token comment">/*
含义 : 又称为多表查询, 当查询的字段来着多个表时, 就会用到连接查询

笛卡尔乘积现象 : 表一有 m 行, 表二有 n 行, 结果 = m * n 行
发生原因 : 没有有效的连接条件
解决原因 : 添加有效的连接条件

分类 : 
	按年代分类
		sql 92 标准 : 仅仅支持内连接
		sql 99 标准 [推荐] : 只是不支持全外连接, 其余均支持
		
	按功能分类
		内连接 :
			等值连接
			非等值连接
			自连接
			
		外连接 :
			左外连接
			右外连接
			全外连接
			
		交叉分类	

*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h4 id="sql-92"><a href="#sql-92" class="header-anchor">#</a> sql 92</h4> <h5 id="等值连接"><a href="#等值连接" class="header-anchor">#</a> 等值连接</h5> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询列表
<span class="token keyword">from</span>
	表 <span class="token number">1</span> 别名<span class="token punctuation">,</span> 表 <span class="token number">2</span> 别名
<span class="token keyword">where</span>
	连接条件 <span class="token punctuation">(</span>表 <span class="token number">1.</span><span class="token keyword">key</span> <span class="token operator">=</span> 表 <span class="token number">2.</span><span class="token keyword">key</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token operator">and</span>
	筛选条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span>
	分组列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">having</span>
	分组后的筛选条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span>
	排序列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">limit</span>
	限制子句<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>特点</p></blockquote> <ul><li>一般为表起别名</li> <li>多表的顺序可以调换</li> <li>n 表连接至少需要 n - 1 个连接条件</li> <li>等值连接的结果是多表的交集部分</li></ul> <h5 id="非等值连接"><a href="#非等值连接" class="header-anchor">#</a> 非等值连接</h5> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询字段
<span class="token keyword">from</span>
	表 <span class="token number">1</span> 别名<span class="token punctuation">,</span> 表 <span class="token number">2</span> 别名
<span class="token keyword">where</span>
	非等值的连接条件<span class="token punctuation">(</span><span class="token operator">IN</span> <span class="token operator">|</span> <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token operator">|</span> <span class="token keyword">ANY</span> <span class="token operator">|</span> <span class="token keyword">ALL</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token operator">and</span>
	筛选列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span>
	分组列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">having</span>
	分组后的筛选条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span>
	排序列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">limit</span>
	限制子句<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="自连接"><a href="#自连接" class="header-anchor">#</a> 自连接</h5> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询列表
<span class="token keyword">from</span>
	表 <span class="token number">1</span> 别名<span class="token punctuation">,</span> 表 <span class="token number">2</span> 别名
<span class="token keyword">where</span>
	等值的连接条件
<span class="token punctuation">[</span><span class="token operator">and</span>
	筛选列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span>
	分组列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">having</span>
	分组后的筛选条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span>
	排序列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">limit</span>
	限制子句<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="代码-6"><a href="#代码-6" class="header-anchor">#</a> 代码</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 一. sql 92 标准</span>

<span class="token comment"># 1. 等值连接 </span>

<span class="token comment">/*
1. 多表等值连接的结果为多表的交集部分
2. n 表连接, 至少需要 n - 1 个连接条件
3. 多表的顺序没有要求
4. 一般需要为表取别名
5. 可以搭配签名介绍的所有子句使用, 如 排序, 分组, 筛选等
*/</span>
<span class="token comment"># 案例一 : 查询女神名和对应的男神名</span>
<span class="token keyword">SELECT</span>
	beauty<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>
	boys<span class="token punctuation">.</span>boyName
<span class="token keyword">FROM</span>
	beauty<span class="token punctuation">,</span>
	boys
<span class="token keyword">WHERE</span>
	beauty<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> boys<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

<span class="token comment"># 案例二 : 查询员工名和对应的部门名</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_name
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">,</span>
	departments
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>department_id <span class="token operator">=</span> departments<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
	
<span class="token comment"># 2. 为表起别名	</span>

<span class="token comment">/*
1. 提高语句的简介度
2. 区分多个重名的字段

注意 : 如果为表起了别名, 则查询的字段就不能使用原来的表名去限定

*/</span>
<span class="token comment"># 案例三 :	查询员工名 工种号 工种名</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	j<span class="token punctuation">.</span>job_title
<span class="token keyword">FROM</span>
	employees e<span class="token punctuation">,</span>
	jobs j
<span class="token keyword">WHERE</span>
	j<span class="token punctuation">.</span>job_id <span class="token operator">=</span> e<span class="token punctuation">.</span>job_id<span class="token punctuation">;</span>
	
<span class="token comment"># 3. 两个表的顺序是否可用调换 ? 可以</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	j<span class="token punctuation">.</span>job_title
<span class="token keyword">FROM</span>
	jobs j<span class="token punctuation">,</span>
	employees e
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>job_id <span class="token operator">=</span> j<span class="token punctuation">.</span>job_id<span class="token punctuation">;</span>
	
<span class="token comment"># 4. 可以加筛选吗 ? 可以	</span>

<span class="token comment"># 案例四 : 查询有奖金的员工名, 部门名</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>commission_pct
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">,</span>
	departments
<span class="token keyword">WHERE</span>
	departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id
	<span class="token operator">AND</span> employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例五 : 查询城市中第二个字符为 'o' 的, 对应的部门名和城市名	</span>
<span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>
	l<span class="token punctuation">.</span>city
<span class="token keyword">FROM</span>
	locations l<span class="token punctuation">,</span>
	departments d
<span class="token keyword">WHERE</span>
	d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> l<span class="token punctuation">.</span>location_id
	<span class="token operator">AND</span> l<span class="token punctuation">.</span>city <span class="token operator">LIKE</span> <span class="token string">'_o%'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 5. 可以加分组吗 ? 可以	</span>

<span class="token comment"># 案例一 : 查询每个城市的部门个数</span>
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	locations<span class="token punctuation">.</span>city
<span class="token keyword">FROM</span>
	locations<span class="token punctuation">,</span>
	departments
<span class="token keyword">WHERE</span>
	locations<span class="token punctuation">.</span>location_id <span class="token operator">=</span> departments<span class="token punctuation">.</span>location_id
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	locations<span class="token punctuation">.</span>city
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例二 : 查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</span>
<span class="token keyword">SELECT</span>
	departments<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>manager_id<span class="token punctuation">,</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> minSalary
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">,</span>
	departments
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>department_id <span class="token operator">=</span> departments<span class="token punctuation">.</span>department_id
	<span class="token operator">AND</span> employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>manager_id
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	minSalary <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 6. 可以加排序吗 ? 可以</span>

<span class="token comment"># 案例三 : 查询每个工种的工种名和员工的个数, 并且按员工个数降序</span>
<span class="token keyword">SELECT</span>
	jobs<span class="token punctuation">.</span>job_title<span class="token punctuation">,</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
	jobs<span class="token punctuation">,</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> jobs<span class="token punctuation">.</span>job_id
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	jobs<span class="token punctuation">.</span>job_id
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 7. 是否可以实现三表连接 ? 可以</span>

<span class="token comment"># 案例四 : 	查询员工名 部门名 和所在的城市, 并按照工资降序</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
	locations<span class="token punctuation">.</span>city
<span class="token keyword">FROM</span>
	locations<span class="token punctuation">,</span>
	employees<span class="token punctuation">,</span>
	departments
<span class="token keyword">WHERE</span>
	departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id 
	<span class="token operator">AND</span> departments<span class="token punctuation">.</span>location_id <span class="token operator">=</span> locations<span class="token punctuation">.</span>location_id
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	locations<span class="token punctuation">.</span>city<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary <span class="token keyword">DESC</span><span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_name<span class="token punctuation">;</span>
	
<span class="token comment"># 2. 非等值连接</span>


<span class="token comment"># 案例一 : 查询员工的工资和工资级别</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
	job_grades<span class="token punctuation">.</span>grade_level
<span class="token keyword">FROM</span>
	job_grades<span class="token punctuation">,</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">BETWEEN</span> job_grades<span class="token punctuation">.</span>lowest_sal <span class="token operator">AND</span> job_grades<span class="token punctuation">.</span>highest_sal
	<span class="token operator">AND</span> job_grades<span class="token punctuation">.</span>grade_level <span class="token operator">=</span> <span class="token string">'A'</span><span class="token punctuation">;</span>


<span class="token comment"># 3. 自连接</span>

<span class="token comment"># 案例一 : 查询员工名和上级的名称</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	m<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	m<span class="token punctuation">.</span>last_name
<span class="token keyword">FROM</span>
	employees e<span class="token punctuation">,</span>
	employees m
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> m<span class="token punctuation">.</span>employee_id<span class="token punctuation">;</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br></div></div><h5 id="练习-7"><a href="#练习-7" class="header-anchor">#</a> 练习</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 显示所有员工的姓名，部门号和部门名称。</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_name
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">,</span>
	departments
<span class="token keyword">WHERE</span>
	departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>

<span class="token comment"># 2. 查询 90 号部门员工的 job_id 和 90 号部门的 location_id</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>location_id<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">,</span>
	departments
<span class="token keyword">WHERE</span>
	departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id
	<span class="token operator">AND</span> departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token number">90</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 选择所有有奖金的员工的 last_name , department_name , location_id , city</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>location_id<span class="token punctuation">,</span>
	locations<span class="token punctuation">.</span>city
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">,</span>
	departments<span class="token punctuation">,</span>
	locations
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
	<span class="token operator">AND</span> departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id
	<span class="token operator">AND</span> departments<span class="token punctuation">.</span>location_id <span class="token operator">=</span> locations<span class="token punctuation">.</span>location_id<span class="token punctuation">;</span>

<span class="token comment"># 4. 选择city在 Toronto 工作的员工的 last_name , job_id , department_id , department_name</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>
	locations<span class="token punctuation">.</span>city
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">,</span>
	departments<span class="token punctuation">,</span>
	locations
<span class="token keyword">WHERE</span>
	departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id
	<span class="token operator">AND</span> departments<span class="token punctuation">.</span>location_id <span class="token operator">=</span> locations<span class="token punctuation">.</span>location_id
	<span class="token operator">AND</span> locations<span class="token punctuation">.</span>city <span class="token operator">=</span> <span class="token string">'Toronto'</span><span class="token punctuation">;</span>

<span class="token comment"># 5.查询每个工种、每个部门的部门名、工种名和最低工资</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>
	jobs<span class="token punctuation">.</span>job_title<span class="token punctuation">,</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">,</span>
	jobs<span class="token punctuation">,</span>
	departments
<span class="token keyword">WHERE</span>
	departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id
	<span class="token operator">AND</span> jobs<span class="token punctuation">.</span>job_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>job_id
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_name
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span>employees<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>

<span class="token comment"># 6.查询每个国家下的部门个数大于 2 的国家编号</span>
<span class="token keyword">SELECT</span>
	locations<span class="token punctuation">.</span>country_id<span class="token punctuation">,</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
	locations<span class="token punctuation">,</span>
	departments
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	locations<span class="token punctuation">.</span>country_id
<span class="token keyword">HAVING</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>

<span class="token comment"># 7、选择指定员工的姓名，员工号，以及他的管理者的姓名和员工号，结果类似于下面的格式</span>
<span class="token comment"># employees Emp# manager Mgr#</span>
<span class="token comment"># kochhar 101 king 100</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name <span class="token keyword">AS</span> <span class="token string">'employees'</span><span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>employee_id <span class="token keyword">AS</span> <span class="token string">'Emp#'</span><span class="token punctuation">,</span>
	m<span class="token punctuation">.</span>last_name <span class="token keyword">AS</span> <span class="token string">'manager'</span><span class="token punctuation">,</span>
	m<span class="token punctuation">.</span>manager_id <span class="token keyword">AS</span> <span class="token string">'Mgr#'</span>
<span class="token keyword">FROM</span>
	employees e<span class="token punctuation">,</span>
	employees m
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> m<span class="token punctuation">.</span>employee_id
	<span class="token operator">AND</span> m<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> <span class="token number">100</span>
	<span class="token operator">AND</span> e<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br></div></div><h4 id="sql-99"><a href="#sql-99" class="header-anchor">#</a> sql 99</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 二. sql 99 语法</span>

<span class="token comment">/*
语法 :
	select 查询列表
	from 表一 别名 [连接类型]
	join 表二 别名 
	on 连接条件
	[where 筛选条件]
	[group by 分组子句]
	[having 筛选条件]
	[order by 排序条件]

内连接 (*) : inner
外连接
	左外(*) : letf [outer]
	右外(*) : right [outer]
	全外 : full [outer]
交叉连接 : cross	


# sql 92 和 sql 99
 
功能 : sql 99 支持的较多
可读性 : sql 99 实现连接条件和筛选条件的分离, 可读性较高
*/</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h5 id="内连接"><a href="#内连接" class="header-anchor">#</a> 内连接</h5> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询列表
<span class="token keyword">from</span>
	表 <span class="token number">1</span> 别名
<span class="token punctuation">[</span><span class="token keyword">inner</span><span class="token punctuation">]</span> <span class="token keyword">join</span>
	表 <span class="token number">2</span> 别名
<span class="token keyword">on</span>
	连接条件
<span class="token punctuation">[</span><span class="token keyword">where</span>
	筛选条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span>
	分组列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">having</span>
	分组后的筛选条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span>
	排序列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">limit</span>
	限制子句<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><p>特点</p></blockquote> <ul><li>表的顺序可以调换</li> <li>内连接的结果 = 多表的交集</li> <li>n 表连接至少需要 n - 1 个连接条件</li> <li>一般为表取别名</li></ul> <blockquote><p>分类</p></blockquote> <ul><li>等值连接</li> <li>非等值连接</li> <li>自连接</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 内连接</span>

<span class="token comment">/*
语法 : 
	select 查询列表
	from 表一 别名
	inner join 表二 别名
	on 连接条件
	[where 筛选条件]
	[group by 分组子句]
	[having 筛选条件]
	[order by 排序条件]
	
分类 : 
		等值
		非等值
		自连接
		
特点 : 
	1. 添加排序 分组 筛选
	2. inner 可以省略
	3. 筛选条件放在 where 后面, 连接条件放在 on 后面, 提高分离线, 便于阅读
	4. inner join 连接 和 sql 92 语法中的等值连接效果是一样的, 都是查询多表的交集
*/</span>

<span class="token comment"># 等值连接</span>

<span class="token comment"># 案例一 : 查询员工名 部门名</span>
<span class="token keyword">SELECT</span> 
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> 
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>department_id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> 
	d<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>department_name<span class="token punctuation">`</span></span>
<span class="token keyword">FROM</span> 
	<span class="token identifier"><span class="token punctuation">`</span>employees<span class="token punctuation">`</span></span> e
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> 
	<span class="token identifier"><span class="token punctuation">`</span>departments<span class="token punctuation">`</span></span> d
<span class="token keyword">ON</span> 
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>department_id<span class="token punctuation">`</span></span> <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>department_id<span class="token punctuation">`</span></span><span class="token punctuation">;</span>

<span class="token comment"># 案例二 : 查询名字中包含 e 的员工名和工种名</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>last_name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>
	j<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>job_title<span class="token punctuation">`</span></span>
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span>
	jobs j
<span class="token keyword">ON</span>
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>job_id<span class="token punctuation">`</span></span> <span class="token operator">=</span> j<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>job_id<span class="token punctuation">`</span></span>
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>last_name<span class="token punctuation">`</span></span> <span class="token operator">LIKE</span> <span class="token string">'%e%'</span><span class="token punctuation">;</span>

<span class="token comment"># 案例三 : 查询部门个数 &gt; 3 的城市名和部门个数</span>
<span class="token keyword">SELECT</span>
	city<span class="token punctuation">,</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
	departments d
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span>
	locations l
<span class="token keyword">ON</span>
	d<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>location_id<span class="token punctuation">`</span></span> <span class="token operator">=</span> l<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>location_id<span class="token punctuation">`</span></span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	city
<span class="token keyword">HAVING</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例四 : 查询哪个部门的部门员工个数 &gt; 3 的部门名和员工个数, 并按个数降序</span>
<span class="token keyword">SELECT</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	department_name
<span class="token keyword">FROM</span>
	departments d
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span>
	employees e
<span class="token keyword">ON</span>
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>department_id<span class="token punctuation">`</span></span> <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>department_id<span class="token punctuation">`</span></span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	d<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>department_id<span class="token punctuation">`</span></span>
<span class="token keyword">HAVING</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span> 
	
<span class="token comment"># 案例五 : 查询员工名 部门名 工种名 并按部门名排序</span>
<span class="token keyword">SELECT</span>
	last_name<span class="token punctuation">,</span>
	department_name<span class="token punctuation">,</span>
	job_title
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span>
	departments d
<span class="token keyword">ON</span>
	d<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>department_id<span class="token punctuation">`</span></span> <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>department_id<span class="token punctuation">`</span></span>
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span>	
	jobs j
<span class="token keyword">ON</span>
	j<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>job_id<span class="token punctuation">`</span></span> <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>job_id<span class="token punctuation">`</span></span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	d<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>department_name<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
	
<span class="token comment"># 非等值连接</span>

<span class="token comment"># 案例一 : 查询员工的工资级别</span>
<span class="token keyword">SELECT</span>
	salary<span class="token punctuation">,</span>
	grade_level
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">JOIN</span>
	job_grades j
<span class="token keyword">ON</span>
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>salary<span class="token punctuation">`</span></span> <span class="token operator">BETWEEN</span> j<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>lowest_sal<span class="token punctuation">`</span></span> <span class="token operator">AND</span> j<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>highest_sal<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
	
<span class="token comment"># 查询每个工资级别的个数大于 &gt; B 的个数, 并降序</span>
<span class="token keyword">SELECT</span>
	j<span class="token punctuation">.</span>grade_level<span class="token punctuation">,</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">JOIN</span>
	job_grades j
<span class="token keyword">ON</span>
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>salary<span class="token punctuation">`</span></span> <span class="token operator">BETWEEN</span> j<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>lowest_sal<span class="token punctuation">`</span></span> <span class="token operator">AND</span> j<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>highest_sal<span class="token punctuation">`</span></span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	j<span class="token punctuation">.</span>grade_level
<span class="token keyword">HAVING</span>
	j<span class="token punctuation">.</span>grade_level <span class="token operator">&gt;=</span> <span class="token string">'B'</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span>
	
<span class="token comment"># 查询员工的名字和上级的名字</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>last_name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>
	m<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>last_name<span class="token punctuation">`</span></span>
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">JOIN</span>
	employees m
<span class="token keyword">ON</span>
	m<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>employee_id<span class="token punctuation">`</span></span> <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>manager_id<span class="token punctuation">`</span></span><span class="token punctuation">;</span>

<span class="token comment"># 查询姓名中包含 k 的员工的名字和上级的名字</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>last_name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>
	m<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>last_name<span class="token punctuation">`</span></span>
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">JOIN</span>
	employees m
<span class="token keyword">ON</span>
	m<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>employee_id<span class="token punctuation">`</span></span> <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>manager_id<span class="token punctuation">`</span></span>	
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>last_name<span class="token punctuation">`</span></span> <span class="token operator">LIKE</span> <span class="token string">'%k%'</span><span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br></div></div><h5 id="外连接"><a href="#外连接" class="header-anchor">#</a> 外连接</h5> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询列表
<span class="token keyword">from</span>
	表 <span class="token number">1</span> 别名
<span class="token keyword">left</span> <span class="token operator">|</span> <span class="token keyword">right</span> <span class="token operator">|</span> <span class="token keyword">full</span> <span class="token punctuation">[</span><span class="token keyword">outer</span><span class="token punctuation">]</span> <span class="token keyword">join</span>
	表 <span class="token number">2</span> 别名
<span class="token keyword">on</span>
	连接条件
<span class="token punctuation">[</span><span class="token keyword">where</span>
	筛选条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span>
	分组列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">having</span>
	分组后的筛选条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span>
	排序列表<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">limit</span>
	限制子句<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><p>特点</p></blockquote> <ul><li><p>查询的结果 = 主表中所有的行, 如果从表和它屁屁额的将显示匹配行, 如果从表没有匹配的则显示 null</p></li> <li><p>left join 左边的就是主表</p> <p>right join 右边的就是主表</p> <p>full join 两边都是主表</p></li> <li><p>一般用于查询除了交集部分的剩余不匹配的行</p></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 二. 外连接</span>

<span class="token comment">/*
应用场景 : 用于查询一个表中有, 另一个表中没有的记录

特点 : 
	1. 外连接的查询结果为主表中的所有记录
			如果从表中有和它匹配的, 则显示匹配的值
			如果从表中没有和它匹配的, 则显示 null
			外连接查询结果 = 内连接结果 + 主表中有而从表没有的记录
			
	2. 左外连接中, left join左边的是主表
		 右外连接中, right join 右边的是主表
		 
	3. 左外和右外交换两个表的顺序, 可以实现同样的效果	 
	4. 全外连接 = 内连接结果 + 表一有但表二没有的 + 表二有但表一没有的
*/</span>

<span class="token comment"># 引入 : 查询男朋友不在男神表的女神名</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	boys<span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span>	
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	beauty<span class="token punctuation">;</span>	

<span class="token comment"># 1. 左外连接</span>
<span class="token keyword">SELECT</span>
	b<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>
	bo<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	beauty b
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span>
	boys bo
<span class="token keyword">ON</span>
	b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id
<span class="token keyword">WHERE</span>
	bo<span class="token punctuation">.</span>id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span>
	b<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	bo<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	boys bo
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span>
	beauty b
<span class="token keyword">ON</span>
	b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

<span class="token comment"># 右外连接</span>
<span class="token keyword">SELECT</span>
	b<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>
	bo<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	boys bo
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span>
	beauty b
<span class="token keyword">ON</span>
	b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id
<span class="token keyword">WHERE</span>
	bo<span class="token punctuation">.</span>id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token comment"># 案例一 : 查询哪个部门没有员工</span>
<span class="token comment"># 左外</span>
<span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>employee_id
<span class="token keyword">FROM</span>
	departments d
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span>
	employees e
<span class="token keyword">on</span>
	e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>employee_id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
	
<span class="token comment"># 右外</span>
<span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>employee_id
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span>
	departments d
<span class="token keyword">on</span>
	e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>employee_id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>	
	
<span class="token comment"># 全外</span>
<span class="token keyword">SELECT</span>
	b<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	bo<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	beauty b
<span class="token keyword">FULL</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span>
	boys bo
<span class="token keyword">ON</span>
	bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id	
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br></div></div><h5 id="交叉连接"><a href="#交叉连接" class="header-anchor">#</a> 交叉连接</h5> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询列表
<span class="token keyword">from</span>
	表 <span class="token number">1</span> 别名
<span class="token keyword">cross</span> <span class="token keyword">join</span>
	表 <span class="token number">2</span> 别名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>特点</p></blockquote> <ul><li>类似于笛卡尔乘积</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 交叉连接 就是笛卡尔乘积</span>

<span class="token keyword">SELECT</span>
	b<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	bo<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	beauty b
<span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span>
	boys bo<span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="练习-8"><a href="#练习-8" class="header-anchor">#</a> 练习</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 查询编号&gt;3 的女神的男朋友信息，如果有则列出详细，如果没有，用 null 填充</span>
<span class="token keyword">SELECT</span>
	beauty<span class="token punctuation">.</span>id 女神id<span class="token punctuation">,</span>
	beauty<span class="token punctuation">.</span>name 女神名字<span class="token punctuation">,</span>
	boys<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	beauty
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span>
	boys
<span class="token keyword">ON</span>
	boys<span class="token punctuation">.</span>id <span class="token operator">=</span> beauty<span class="token punctuation">.</span>boyfriend_id
<span class="token keyword">WHERE</span>
	beauty<span class="token punctuation">.</span>id <span class="token operator">&gt;</span> <span class="token number">3</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	beauty<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
	

<span class="token comment"># 2. 查询哪个城市没有部门</span>
<span class="token keyword">SELECT</span>
	city<span class="token punctuation">,</span>
	department_id
<span class="token keyword">FROM</span>
	departments
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span>
	locations
<span class="token keyword">ON</span>
	locations<span class="token punctuation">.</span>location_id <span class="token operator">=</span> departments<span class="token punctuation">.</span>location_id
<span class="token keyword">WHERE</span>
	departments<span class="token punctuation">.</span>location_id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 查询部门名为 SAL 或 IT 的员工信息</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>department_name
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span>
	departments
<span class="token keyword">ON</span>
	departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id
<span class="token keyword">WHERE</span>
	departments<span class="token punctuation">.</span>department_name <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'SAL'</span><span class="token punctuation">,</span> <span class="token string">'IT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="进阶七-子查询"><a href="#进阶七-子查询" class="header-anchor">#</a> 进阶七 : 子查询</h3> <h4 id="概念-3"><a href="#概念-3" class="header-anchor">#</a> 概念</h4> <blockquote><p>含义</p></blockquote> <p>嵌套在其他语句内部的 select 语句称为子查询或内查询</p> <p>外面的语句可以是 insert update delete ==select== 等, 一般 select 作为外面语句较多</p> <p>外面如果为 select 语句 ,则称此语句为外查询或主查询</p> <blockquote><p>分类</p></blockquote> <p>按出现位置分类</p> <ul><li>select 后面
<ul><li>仅仅支持表两只查询</li></ul></li> <li>from 后面
<ul><li>表子查询</li></ul></li> <li>==where 或者 having 后面==
<ul><li>==标量子查询==</li> <li>==列子查询==</li> <li>行子查询</li></ul></li> <li>exists 后面
<ul><li>标量子查询</li> <li>列子查询</li> <li>行子查询</li> <li>表子查询</li></ul></li></ul> <p>按结果集的行列</p> <ul><li>==标量子查询 (单行子查询) : 结果集为一行一列==</li> <li>==列子查询 (多行子查询) : 结果集为多行一列==</li> <li>行子查询 : 结果集为多行多列</li> <li>表子查询 : 结果集为多行多列</li></ul> <h4 id="代码-7"><a href="#代码-7" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 进阶七 : 子查询</span>

<span class="token comment">/*
含义 : 出现在其他语句的 SELECT 语句, 成为子查询或内查询

外部的查询语句, 成为主查询或外查询

分类 :
	1. 按子查询出现的位置 : 
		1. SELECT 后面
				仅仅支持标量子查询
		2. FROM 后面
				支持表子查询
		3. WHERE 或 HAVING 后面 ☆
				标量子查询 (单行) √
				列子查询 	 (多行) √
				行子查询 (用的较少)
		4. EXISTS 后面 (相关子查询)
				表子查询
		
	2. 按结果集的行列数不同 : 
		1. 标量子查询 (结果集只有一行一列)
		2. 列子查询 (结果集只有一列多行)
		3. 行子查询 (结果集有一行多列)
		4. 表子查询 (结果集一般为多行多列)	
*/</span>


<span class="token comment"># 一. WHERE 或 HAVING 后面</span>

<span class="token comment">/*
1. 标量子查询 (单行子查询)

2. 列子查询 (多行子查询)

3. 行子查询 (多列多行)

特点 :
	1. 子查询放在小括号内
	2. 一般放在条件的右侧
	3. 标量子查询, 一般搭配着单行操作符使用
			&gt; &lt; &gt;= &lt;= = &lt;&gt;
	4. 列子查询, 一般搭配着多行操作符使用
			IN / NOT IN   ANY / SOME   ALL	
	5. 子查询的执行优先于主查询执行, 主查询的条件用到了子查询的结果	
*/</span>

<span class="token comment"># 1. 标量子查询 (单行子查询)</span>

<span class="token comment"># 案例一 : 谁的工资比 'Abel' 高 ?</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> employees<span class="token punctuation">.</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>last_name <span class="token operator">=</span> <span class="token string">'Abel'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例二 : 返回 job_id 与 141 号员工相同, salary 比 143号员工多的员工, 姓名, job_id, 工资</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> employees<span class="token punctuation">.</span>job_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> <span class="token number">141</span> <span class="token punctuation">)</span> 
	<span class="token operator">AND</span> employees<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> employees<span class="token punctuation">.</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> <span class="token number">143</span> <span class="token punctuation">)</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例三 : 返回公司中工资最少的员工的 last_name, job_id, salary</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例四 : 查询最低工资大于	50 号部门最低工资的部门 id 和其最低工资</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>department_id 
<span class="token keyword">HAVING</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token number">50</span> <span class="token punctuation">)</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 非法使用标量子查询 是错误的</span>
<span class="token keyword">SELECT</span>
	departments<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	employees
	<span class="token keyword">JOIN</span> departments <span class="token keyword">ON</span> departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	departments<span class="token punctuation">.</span>department_id 
<span class="token keyword">HAVING</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> employees<span class="token punctuation">.</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">JOIN</span> departments <span class="token keyword">WHERE</span> departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token number">250</span> <span class="token punctuation">)</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 2. 列子查询 (多行子查询)</span>

<span class="token comment"># 案例一 : 返回 location_id 是 1400 或者 1700 的部门中的所有员工姓名</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	departments<span class="token punctuation">.</span>location_id 
<span class="token keyword">FROM</span>
	employees
	<span class="token keyword">JOIN</span> departments <span class="token keyword">ON</span> departments<span class="token punctuation">.</span>department_id <span class="token operator">=</span> employees<span class="token punctuation">.</span>department_id 
<span class="token keyword">WHERE</span>
	departments<span class="token punctuation">.</span>location_id <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token string">'1400'</span><span class="token punctuation">,</span> <span class="token string">'1700'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>last_name 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>department_id <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> departments<span class="token punctuation">.</span>department_id <span class="token keyword">FROM</span> departments <span class="token keyword">WHERE</span> departments<span class="token punctuation">.</span>location_id <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token string">'1400'</span><span class="token punctuation">,</span> <span class="token string">'1700'</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例二 : 	返回其他工种中比 job_id 为 'IT_PROG' 工种任一工资低的员工的 : 工号 姓名 job_id salary</span>
<span class="token comment"># 方式一 : 使用 ANY</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">&lt;</span> <span class="token keyword">ANY</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> employees<span class="token punctuation">.</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> <span class="token string">'IT_PROG'</span> <span class="token punctuation">)</span> 
	<span class="token operator">AND</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">&lt;&gt;</span> <span class="token string">'IT_PROG'</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>

<span class="token comment"># 方式二 : 使用 MAX</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">&lt;</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> <span class="token string">'IT_PROG'</span> <span class="token punctuation">)</span> 
	<span class="token operator">AND</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">&lt;&gt;</span> <span class="token string">'IT_PROG'</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 案例三 : 	返回其他工种中比 job_id 为 'IT_PROG' 工种所有工资低的员工的 : 工号 姓名 job_id salary</span>
<span class="token comment"># 方式一 : 使用 ALL</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">&lt;</span> <span class="token keyword">ALL</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> employees<span class="token punctuation">.</span>salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> <span class="token string">'IT_PROG'</span> <span class="token punctuation">)</span> 
	<span class="token operator">AND</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">&lt;&gt;</span> <span class="token string">'IT_PROG'</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>

<span class="token comment"># 方式二 : 使用 MIN</span>
<span class="token keyword">SELECT</span>
	employees<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
	employees<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>salary <span class="token operator">&lt;</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">=</span> <span class="token string">'IT_PROG'</span> <span class="token punctuation">)</span> 
	<span class="token operator">AND</span> employees<span class="token punctuation">.</span>job_id <span class="token operator">&lt;&gt;</span> <span class="token string">'IT_PROG'</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>
	
<span class="token comment"># 3. 行子查询 (多列多行)</span>
<span class="token comment"># 案例一 : 查询员工编号最小且工资最高的员工信息</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>employee_id <span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token punctuation">)</span> 
	<span class="token operator">AND</span> employees<span class="token punctuation">.</span>salary <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span> 
<span class="token keyword">FROM</span>
	employees 
<span class="token keyword">WHERE</span>
	<span class="token punctuation">(</span> employees<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>employee_id <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token punctuation">)</span> 
	
	
	
<span class="token comment"># 二. 放在 SELECT 后面</span>
<span class="token comment"># 仅仅支持标量子查询</span>

<span class="token comment"># 案例一 : 查询每个部门的员工个数</span>
<span class="token keyword">SELECT</span>
	departments<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>department_id <span class="token operator">=</span> departments<span class="token punctuation">.</span>department_id <span class="token punctuation">)</span> 
<span class="token keyword">FROM</span>
	departments<span class="token punctuation">;</span>
	
<span class="token comment"># 案例二 : 查询员工号 = 102 的部门名</span>
<span class="token keyword">SELECT</span>
	<span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span> 
		departments<span class="token punctuation">.</span>department_name 
	<span class="token keyword">FROM</span> 
		employees<span class="token punctuation">,</span> departments 
	<span class="token keyword">WHERE</span> 
		employees<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> <span class="token number">102</span> 
	<span class="token operator">AND</span> 
		employees<span class="token punctuation">.</span>department_id <span class="token operator">=</span> departments<span class="token punctuation">.</span>department_id
<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment"># 三. 放在 from 后面 </span>

<span class="token comment">/*
要求将子查询结果充当一张表, 要求必须起别名
*/</span>

<span class="token comment"># 案例一 : 查询每个部门的平均工资的工资等级</span>
<span class="token keyword">SELECT</span>
	ag_dep<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	g<span class="token punctuation">.</span>grade_level 
<span class="token keyword">FROM</span>
	<span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span> employees<span class="token punctuation">.</span>salary <span class="token punctuation">)</span> ag<span class="token punctuation">,</span> employees<span class="token punctuation">.</span>department_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> employees<span class="token punctuation">.</span>department_id <span class="token punctuation">)</span> ag_dep
<span class="token keyword">JOIN</span> 
	job_grades g 
<span class="token keyword">ON</span> 
	ag 
<span class="token operator">BETWEEN</span> g<span class="token punctuation">.</span>lowest_sal <span class="token operator">AND</span> g<span class="token punctuation">.</span>highest_sal<span class="token punctuation">;</span>
 

 <span class="token comment"># 四. EXISTS 后面 (相关子查询)</span>
 
 <span class="token comment">/*
 语法 :
 EXISTS (完整的查询语句)
 
 结果 :
 1 或 0
 */</span>
<span class="token keyword">SELECT</span>
 <span class="token keyword">EXISTS</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> employees<span class="token punctuation">.</span>employee_id <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employees<span class="token punctuation">.</span>salary <span class="token operator">=</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	 
<span class="token comment"># 案例一 : 查询有员工部门名</span>
<span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span>department_name
<span class="token keyword">FROM</span>
	departments d
<span class="token keyword">WHERE</span>
	<span class="token keyword">EXISTS</span><span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employees e <span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">)</span>
	
<span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span>department_name
<span class="token keyword">FROM</span>
	departments d
<span class="token keyword">WHERE</span>
	d<span class="token punctuation">.</span>department_id <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>department_id <span class="token keyword">FROM</span> employees e <span class="token punctuation">)</span>
	
<span class="token comment"># 案例二 : 查询没有女朋友的男神信息</span>
<span class="token keyword">SELECT</span>
	bo<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	boys bo
<span class="token keyword">WHERE</span>
	<span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> beauty b <span class="token keyword">WHERE</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id <span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span>
	bo<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	boys bo
<span class="token keyword">WHERE</span>
	bo<span class="token punctuation">.</span>id <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token keyword">FROM</span> beauty b <span class="token punctuation">)</span> <span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br></div></div><h4 id="练习-9"><a href="#练习-9" class="header-anchor">#</a> 练习</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 查询和 Zlotkey 相同部门的员工姓名和工资</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>
	<span class="token punctuation">(</span><span class="token keyword">SELECT</span> z<span class="token punctuation">.</span>department_id <span class="token keyword">FROM</span> employees z <span class="token keyword">WHERE</span> z<span class="token punctuation">.</span>last_name <span class="token operator">=</span> <span class="token string">'Zlotkey'</span> <span class="token punctuation">)</span> zl<span class="token punctuation">,</span>
	employees e
<span class="token keyword">WHERE</span>
	zl<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
	
<span class="token comment"># 2. 查询工资比公司平均工资高的员工的员工号，姓名和工资。</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>salary
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees m <span class="token punctuation">)</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	e<span class="token punctuation">.</span>salary <span class="token keyword">DESC</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 查询各部门中工资比本部门平均工资高的员工的员工号, 姓名和工资</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>	
	employees e<span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> avg<span class="token punctuation">,</span> m<span class="token punctuation">.</span>department_id <span class="token keyword">FROM</span> employees m <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> m<span class="token punctuation">.</span>department_id <span class="token punctuation">)</span> avg_s
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> avg
	<span class="token operator">AND</span> e<span class="token punctuation">.</span>department_id	<span class="token operator">=</span> avg_s<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>	
	employees e
<span class="token keyword">JOIN</span>	
 <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> avg<span class="token punctuation">,</span> m<span class="token punctuation">.</span>department_id <span class="token keyword">FROM</span> employees m <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> m<span class="token punctuation">.</span>department_id <span class="token punctuation">)</span> avg_s
<span class="token keyword">ON</span> 
	e<span class="token punctuation">.</span>department_id	<span class="token operator">=</span> avg_s<span class="token punctuation">.</span>department_id
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>salary <span class="token operator">&gt;</span> avg<span class="token punctuation">;</span>
	
<span class="token comment"># 4. 查询和姓名中包含字母 u 的员工在相同部门的员工的员工号和姓名</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>
	employees e<span class="token punctuation">,</span>
	<span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> m<span class="token punctuation">.</span>department_id <span class="token keyword">FROM</span> employees m <span class="token keyword">WHERE</span> m<span class="token punctuation">.</span>last_name <span class="token operator">LIKE</span> <span class="token string">'%u%'</span> <span class="token punctuation">)</span> u
<span class="token keyword">WHERE</span>
	u<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>

<span class="token comment"># 5. 查询在部门的 location_id 为 1700 的部门工作的员工的员工号</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>department_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> d<span class="token punctuation">.</span>department_id <span class="token keyword">FROM</span> departments d <span class="token keyword">WHERE</span> d<span class="token punctuation">.</span>location_id <span class="token operator">=</span> <span class="token number">1700</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 6. 查询管理者是 King 的员工姓名和工资</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>salary
<span class="token keyword">FROM</span>
	<span class="token punctuation">(</span> <span class="token keyword">SELECT</span> k<span class="token punctuation">.</span>employee_id <span class="token keyword">FROM</span> employees k <span class="token keyword">WHERE</span> k<span class="token punctuation">.</span>last_name <span class="token operator">=</span> <span class="token string">'K_ing'</span> <span class="token punctuation">)</span> king<span class="token punctuation">,</span>
	employees e
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> king<span class="token punctuation">.</span>employee_id<span class="token punctuation">;</span>
	
<span class="token comment"># 7. 查询工资最高的员工的姓名，要求 first_name 和 last_name 显示为一列，列名为 姓.名</span>
<span class="token keyword">SELECT</span>
	CONCAT<span class="token punctuation">(</span>e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span><span class="token string">'.'</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>first_name<span class="token punctuation">)</span><span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>salary
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>salary <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees m <span class="token punctuation">)</span><span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 查询工资最低的员工信息: last_name, salary</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>salary
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>salary <span class="token operator">=</span> <span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		<span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
	<span class="token keyword">FROM</span>
		employees
	<span class="token punctuation">)</span><span class="token punctuation">;</span>	
	
<span class="token comment"># 2. 查询平均工资最低的部门信息</span>
<span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	avgSalary
<span class="token keyword">FROM</span>
	departments d
<span class="token keyword">JOIN</span>
	<span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		department_id<span class="token punctuation">,</span>
		<span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> avgSalary
	<span class="token keyword">FROM</span>
		employees
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
		department_id
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
		avgSalary
	<span class="token keyword">LIMIT</span> <span class="token number">1</span>	
	<span class="token punctuation">)</span>	avg_m
<span class="token keyword">ON</span>
	d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> avg_m<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>


<span class="token comment"># 3. 查询平均工资最低的部门信息和该部门的平均工资</span>
<span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	avgSalary
<span class="token keyword">FROM</span>
	departments d
<span class="token keyword">JOIN</span>
	<span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		department_id<span class="token punctuation">,</span>
		<span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> avgSalary
	<span class="token keyword">FROM</span>
		employees
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
		department_id
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
		avgSalary
	<span class="token keyword">LIMIT</span> <span class="token number">1</span>	
	<span class="token punctuation">)</span>	avg_m
<span class="token keyword">ON</span>
	d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> avg_m<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>
	

<span class="token comment"># 4. 查询平均工资最高的 job 信息</span>
<span class="token keyword">SELECT</span>
	j<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	jobs j
<span class="token keyword">JOIN</span>
	<span class="token punctuation">(</span> <span class="token keyword">SELECT</span>
		e<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span>
		<span class="token function">AVG</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> avgSalary
	<span class="token keyword">FROM</span>
		employees e
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
		e<span class="token punctuation">.</span>job_id
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
		avgSalary <span class="token keyword">DESC</span>
	<span class="token keyword">LIMIT</span>
		<span class="token number">1</span> <span class="token punctuation">)</span> avg_j
<span class="token keyword">ON</span>
	j<span class="token punctuation">.</span>job_id <span class="token operator">=</span> avg_j<span class="token punctuation">.</span>job_id	<span class="token punctuation">;</span>

<span class="token comment"># 5. 查询平均工资高于公司平均工资的部门有哪些?</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	<span class="token function">AVG</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> avg_m
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	e<span class="token punctuation">.</span>department_id
<span class="token keyword">HAVING</span>
	avg_m <span class="token operator">&gt;</span> <span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		<span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
	<span class="token keyword">FROM</span>
		employees
	<span class="token punctuation">)</span><span class="token punctuation">;</span>	
	


<span class="token comment"># 6. 查询出公司中所有 manager 的详细信息.</span>
<span class="token keyword">SELECT</span>
	m<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees m
<span class="token keyword">WHERE</span>
	m<span class="token punctuation">.</span>employee_id <span class="token operator">IN</span> <span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		<span class="token keyword">DISTINCT</span> e<span class="token punctuation">.</span>manager_id
	<span class="token keyword">FROM</span>
		employees e
	<span class="token keyword">WHERE</span>
		e<span class="token punctuation">.</span>manager_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment"># 7. 各个部门中 最高工资中最低的那个部门的 最低工资是多少</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">JOIN</span>
	<span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		<span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> maxSalary<span class="token punctuation">,</span>
		department_id
	<span class="token keyword">FROM</span>
		employees
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
		department_id
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
		maxSalary
	<span class="token keyword">limit</span> 
		<span class="token number">1</span>
	<span class="token punctuation">)</span> min_m
<span class="token keyword">ON</span>
	min_m<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	e<span class="token punctuation">.</span>salary
<span class="token keyword">LIMIT</span>
	<span class="token number">1</span><span class="token punctuation">;</span>
	
	
	

<span class="token comment"># 8. 查询平均工资最高的部门的 manager 的详细信息: last_name, department_id, email,salary</span>
<span class="token keyword">SELECT</span>
	m<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	m<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	m<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
	m<span class="token punctuation">.</span>salary 
<span class="token keyword">FROM</span>
	employees m
	<span class="token keyword">JOIN</span> departments d <span class="token keyword">ON</span> m<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> d<span class="token punctuation">.</span>manager_id 
<span class="token keyword">WHERE</span>
	d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token keyword">SELECT</span> department_id <span class="token keyword">FROM</span> employees <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">AVG</span><span class="token punctuation">(</span> salary <span class="token punctuation">)</span> <span class="token keyword">DESC</span> <span class="token keyword">LIMIT</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br></div></div><h3 id="进阶八-分页查询"><a href="#进阶八-分页查询" class="header-anchor">#</a> 进阶八 : 分页查询</h3> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询列表
<span class="token keyword">from</span>
	表
<span class="token keyword">limit</span> <span class="token punctuation">[</span><span class="token keyword">offset</span><span class="token punctuation">]</span><span class="token punctuation">,</span> size<span class="token punctuation">;</span>

<span class="token comment"># 注意 : offset 代表的是其实的条目索引. 默认从 0 开始</span>
<span class="token comment"># 		size 代表的是显示的条目数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>应用场景</p></blockquote> <p>当要查询的条目数太多, 一页显示不全</p> <blockquote><p>公式</p></blockquote> <p>加入要显示的页数为 page, 每一页条目数为 size</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询列表
<span class="token keyword">from</span>
	表
<span class="token keyword">limit</span>
	<span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">,</span> size<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="代码-8"><a href="#代码-8" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 进阶八 : 分页查询</span>

<span class="token comment">/*
应用场景 : 当要显示的数据, 一页显示不全, 需要分页提交 sql 请求

语法 : 
	SELECT 查询列表
	FROM 表名一
	[join type JOIN 表名二		
	ON 连接条件
	WHERE 筛选条件
	GROUP BY 分组字段
	HAVING 分组后的筛选
	ORDER BY 排序的字段]
	LIMIT [offset,] size;
	
	offset 要显示条目的起始索引 (起始索引从 0 开始)
	size 要显示的条目个数
	
特点 : 
	1. LIMIT 语句放在查询语句的最后
	2. 公式 :
		要显示的页数 page, 每页的条目数 size
		SELECT 查询列表
		FROM 表
		LIMIT (page - 1) * size,size;
		
		size = 10
		page 
		1				0
		2				10
		3				20
*/</span>

<span class="token comment"># 案例一 : 查询前五条员工信息</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">LIMIT</span>
	<span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">LIMIT</span>
	<span class="token number">5</span><span class="token punctuation">;</span>	
	
<span class="token comment"># 查询第十一条到第二十五条</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">LIMIT</span>
	<span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">;</span>
	
<span class="token comment"># 查询有奖金的员工信息, 并且工资较高的前十名显示出来</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>commission_pct <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	employees<span class="token punctuation">.</span>salary <span class="token keyword">DESC</span>
<span class="token keyword">LIMIT</span>
	<span class="token number">10</span><span class="token punctuation">;</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><h3 id="进阶九-联合查询"><a href="#进阶九-联合查询" class="header-anchor">#</a> 进阶九 : 联合查询</h3> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>查询语句 <span class="token number">1</span>
<span class="token keyword">union</span> <span class="token punctuation">[</span><span class="token keyword">all</span><span class="token punctuation">]</span>
查询语句 <span class="token number">2</span>
<span class="token keyword">union</span> <span class="token punctuation">[</span><span class="token keyword">all</span><span class="token punctuation">]</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>含义</p></blockquote> <p>union : 合并, 联合, 将多次查询结果合并成为一个结果</p> <blockquote><p>意义</p></blockquote> <ul><li>将一条比较复杂的查询语句拆分成为多条语句</li> <li>适用于查询多个表的时候, 查询的列基本是一致</li></ul> <blockquote><p>特点</p></blockquote> <ul><li>要求多条查询语句的查询列数必须一致</li> <li>要求多条查询语句的查询各列类型, 顺序最好一致</li> <li>union 去重, union all 包含重复项</li></ul> <h4 id="代码-9"><a href="#代码-9" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 进阶九 : 联合查询</span>

<span class="token comment">/*
UNION 联合 合并 : 将多条查询语句的结构合并成为一个结果

语法 : 
	查询语句一
	UNION
	查询语句而
	UNION
	...

应用场景 : 要查询的结果来自于多个表, 且多个表没有直接的连接关系, 但查询的信息一致时

特点 : 
	1. 要求多条查询语句的查询列数是一致的
	2. 要求多条查询语句的查询的每一列的类型和顺序最好一致
	3. 使用 UNION 关键字默认去重
		 使用 UNION ALL 可以包含重复项
*/</span>

<span class="token comment"># 引入案例 : 查询部门编号 &gt; 90 或 邮箱包含 a 的员工信息</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>email <span class="token operator">LIKE</span> <span class="token string">'%a%'</span> 
	<span class="token operator">OR</span> employees<span class="token punctuation">.</span>department_id <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>email <span class="token operator">LIKE</span> <span class="token string">'%a%'</span> 
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	employees
<span class="token keyword">WHERE</span>
	employees<span class="token punctuation">.</span>department_id <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">;</span>		
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span>
	查询列表				<span class="token number">7</span>
<span class="token keyword">from</span>
	表 <span class="token number">1</span> 别名				<span class="token number">1</span>
连接类型 <span class="token keyword">join</span>
	表 <span class="token number">2</span> 别名				<span class="token number">2</span>
<span class="token keyword">on</span>		
	连接条件				<span class="token number">3</span>
<span class="token keyword">where</span>
	筛选条件				<span class="token number">4</span>
<span class="token keyword">group</span> <span class="token keyword">by</span>
	分组列表				<span class="token number">5</span>
<span class="token keyword">having</span>
	分组之后的筛选条件		<span class="token number">6</span>
<span class="token keyword">order</span> <span class="token keyword">by</span>	
	排序列表				<span class="token number">8</span>	
<span class="token keyword">limit</span>
	起始条目索引<span class="token punctuation">,</span> 条目数		<span class="token number">9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="dml-语言的学习"><a href="#dml-语言的学习" class="header-anchor">#</a> DML 语言的学习</h2> <h3 id="插入"><a href="#插入" class="header-anchor">#</a> 插入</h3> <blockquote><p>方式一</p></blockquote> <ul><li><p>语法：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 
	表名<span class="token punctuation">(</span>字段名<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> 
<span class="token keyword">values</span>
	<span class="token punctuation">(</span>值<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>特点：</p> <ul><li>要求值的类型和字段的类型要一致或兼容</li> <li>字段的个数和顺序不一定与原始表中的字段个数和顺序一致
但必须保证值和字段一一对应</li> <li>假如表中有可以为null的字段，注意可以通过以下两种方式插入null值
<ul><li>字段和值都省略</li> <li>字段写上，值使用null</li></ul></li> <li>字段和值的个数必须一致</li> <li>字段名可以省略，默认所有列</li></ul></li></ul> <blockquote><p>方式二</p></blockquote> <ul><li><p>语法：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 
	表名 
<span class="token keyword">set</span> 
	字段<span class="token operator">=</span>值<span class="token punctuation">,</span>字段<span class="token operator">=</span>值<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <blockquote><p>两种方式 的区别：</p></blockquote> <ul><li><p>方式一支持一次插入多行，语法如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 
	表名<span class="token punctuation">[</span><span class="token punctuation">(</span>字段名<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span> 
<span class="token keyword">values</span>
	<span class="token punctuation">(</span>值，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>值，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>方式一支持子查询，语法如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 
	表名
查询语句<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h3 id="修改"><a href="#修改" class="header-anchor">#</a> 修改</h3> <blockquote><p><strong>==修改单表的记录==</strong></p></blockquote> <ul><li><p>语法：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> 
	表名 
<span class="token keyword">set</span> 
	字段<span class="token operator">=</span>值<span class="token punctuation">,</span>字段<span class="token operator">=</span>值 
<span class="token punctuation">[</span><span class="token keyword">where</span> 
 筛选条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <blockquote><p>修改多表的记录[补充]</p></blockquote> <ul><li><p>语法 :</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> 
	表<span class="token number">1</span> 别名 
<span class="token keyword">left</span><span class="token operator">|</span><span class="token keyword">right</span><span class="token operator">|</span><span class="token keyword">inner</span> <span class="token keyword">join</span> 
	表<span class="token number">2</span> 别名 
<span class="token keyword">on</span> 
	连接条件  
<span class="token keyword">set</span> 
	字段<span class="token operator">=</span>值<span class="token punctuation">,</span>字段<span class="token operator">=</span>值 
<span class="token punctuation">[</span><span class="token keyword">where</span> 
 筛选条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul> <blockquote><p>方式一：使用delete</p></blockquote> <ul><li><p>语法 :</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> 
	别名<span class="token number">1</span><span class="token punctuation">,</span>别名<span class="token number">2</span> 
<span class="token keyword">from</span> 
	表<span class="token number">1</span> 别名 
<span class="token keyword">inner</span><span class="token operator">|</span><span class="token keyword">left</span><span class="token operator">|</span><span class="token keyword">right</span> <span class="token keyword">join</span> 
	表<span class="token number">2</span> 别名 
<span class="token keyword">on</span> 
	连接条件
<span class="token punctuation">[</span><span class="token keyword">where</span> 
	筛选条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul> <blockquote><p>方式二：使用truncate</p></blockquote> <ul><li><p>语法 :</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">truncate</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <blockquote><p>==两种方式的区别[面试题]==</p></blockquote> <ol><li>truncate删除后，如果再插入，标识列从1开始
delete删除后，如果再插入，标识列从断点开始</li> <li>delete可以添加筛选条件
truncate不可以添加筛选条件</li> <li>truncate效率较高</li> <li>truncate没有返回值
delete可以返回受影响的行数</li> <li>truncate不可以回滚
delete可以回滚</li></ol> <h3 id="代码-10"><a href="#代码-10" class="header-anchor">#</a> 代码</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># DML 语言</span>

<span class="token comment">/*
数据操作语言 : 
	插入 INSERT
	删除 UPDATE
	修改 DELETE
	
	
*/</span>

<span class="token comment"># 一. 插入 INSERT</span>
<span class="token comment"># 方式一 : 经典插入</span>
<span class="token comment">/*

语法 : 
	INSERT INTO 表名(列名, ...)
	VALUES(值 1, ...);

*/</span>

<span class="token comment"># 1. 插入的值的类型要与列的类型一致或兼容</span>


<span class="token comment"># 2. 不可以为 null 的值必须插入值, 可以为 null 的列如何插入值 ?</span>

<span class="token comment"># 方式一 : </span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>sex<span class="token punctuation">,</span>borndate<span class="token punctuation">,</span>phone<span class="token punctuation">,</span>photo<span class="token punctuation">,</span> boyfriend_id<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">'小橘'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'2001-08-08'</span><span class="token punctuation">,</span> <span class="token string">'12345678999'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 方式二 : </span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span>sex<span class="token punctuation">,</span>borndate<span class="token punctuation">,</span>phone<span class="token punctuation">,</span> boyfriend_id<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">'裙裙'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'2001-08-08'</span><span class="token punctuation">,</span> <span class="token string">'12345678999'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 列的顺序是否可以调换</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> sex<span class="token punctuation">,</span> id<span class="token punctuation">,</span> phone<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'蒋欣'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">'110'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 列数和值的个数必须一致</span>
<span class="token comment"># Column count doesn't match value count at row 1</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> sex<span class="token punctuation">,</span> id<span class="token punctuation">,</span> phone<span class="token punctuation">,</span> boyfriend_id<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'关晓彤'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token string">'110'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#5. 可以省略列名, 默认所有列, 而且列的顺序和表中列的顺序一致</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'张飞'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'119'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 方式二 </span>
<span class="token comment">/*
语法 :
INSERT INTO 表名
SET 列名 = 值, 列名 = 值 ...
*/</span>

<span class="token comment"># 案例一 </span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty
<span class="token keyword">SET</span> id <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> <span class="token string">'刘涛'</span><span class="token punctuation">,</span> phone <span class="token operator">=</span> <span class="token string">'999'</span><span class="token punctuation">;</span>

<span class="token comment"># 两种方式大 pk</span>
<span class="token comment">/*
1. 方式一支持插入多行, 方式二不支持
2. 方式一支持子查询, 方式二不支持'

so, 一般用方式一比较多
*/</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">'小橘1'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'2001-08-08'</span><span class="token punctuation">,</span> <span class="token string">'12345678999'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">'小橘2'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'2001-08-08'</span><span class="token punctuation">,</span> <span class="token string">'12345678999'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">'小橘3'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'2001-08-08'</span><span class="token punctuation">,</span> <span class="token string">'12345678999'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'小橘4'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'2001-08-08'</span><span class="token punctuation">,</span> <span class="token string">'12345678999'</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> beauty<span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> phone<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span>
	<span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">'宋玺'</span><span class="token punctuation">,</span> <span class="token string">'11185766'</span><span class="token punctuation">;</span>
	
	
	
<span class="token comment"># 二. 修改语句</span>

<span class="token comment">/*
1. 修改单表的记录

语法
	UPDATE 表名
	set 列 = 新值, 列 = 新值, ...
	WHERE 筛选条件;
	
2. 修改多表的记录

语法
sql 92
	UPDATE 表一 别名, 表二 别名
	SET 列 = 值, ...
	WHERE 连接条件
	AND 筛选条件
	
sql 99
	UPDATE 表一 别名
	INNER| LEFT | RIGHT JOIN 表二 别名
	ON 连接条件
	SET 列 = 值, ...
	WHERE 筛选条件;
*/</span>
	
<span class="token comment"># 1. 修改单表的记录</span>
<span class="token comment"># 案例一 : 修改beauty 表中姓小的女神的电话为 13899888899</span>
<span class="token keyword">UPDATE</span> 
	beauty
<span class="token keyword">SET</span> 
	phone <span class="token operator">=</span> <span class="token string">'13899888899'</span>
<span class="token keyword">WHERE</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">LIKE</span> <span class="token string">'小%'</span><span class="token punctuation">;</span>

<span class="token comment"># 案例二 : 把二号男神名改成我自己</span>
<span class="token keyword">UPDATE</span>
	boys
<span class="token keyword">SET</span>
	boyName <span class="token operator">=</span> <span class="token string">'易曦翰'</span><span class="token punctuation">,</span> userCP <span class="token operator">=</span> <span class="token number">1000</span>
<span class="token keyword">WHERE</span>
	id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	
	
<span class="token comment"># 2. 修改多表的记录</span>

<span class="token comment"># 修改张无忌的女朋友手机号为 	11799888899</span>
<span class="token keyword">UPDATE</span>
	boys b
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span>
	beauty be
<span class="token keyword">ON</span>
	b<span class="token punctuation">.</span>id <span class="token operator">=</span> be<span class="token punctuation">.</span>boyfriend_id
<span class="token keyword">SET</span>
	be<span class="token punctuation">.</span>phone <span class="token operator">=</span> <span class="token string">'11799888899'</span>
<span class="token keyword">WHERE</span>
	b<span class="token punctuation">.</span>boyName <span class="token operator">=</span> <span class="token string">'张无忌'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 修改没有男朋友的女神的男朋友编号都为 2 号</span>
<span class="token keyword">UPDATE</span>
	beauty b
<span class="token keyword">SET</span>
	b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">WHERE</span>
	b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		bo<span class="token punctuation">.</span>id
	<span class="token keyword">FROM</span>
		boys bo
	<span class="token punctuation">)</span> <span class="token operator">OR</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
		
<span class="token keyword">UPDATE</span>
	boys bo
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> 
	beauty b
<span class="token keyword">ON</span>
	bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id
<span class="token keyword">SET</span>
	b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">WHERE</span>
	bo<span class="token punctuation">.</span>id <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
	

<span class="token comment"># 三. 删除</span>

<span class="token comment">/*
方式一 : DELETE

1. 单表的删除
语法 :
	DELETE FROM 表名 WHERE 筛选条件

2. 多表的删除
sql 92
DELETE 表一的别名 , 表一的别名 
FROM 表一 别名, 表二 别名
WHERE 连接条件
AND 筛选条件;

sql 99
DELETE 表一的别名 , 表一的别名 
FROM 表一
INNER | LEFT | RIGHT JOIN 表二 别名
ON 连接条件
WHERE 筛选条件

方式二 : TRUNCATE
语法 : 
	TRUNCATE TABLE 表名

*/</span>

<span class="token comment"># 方式一 : DELETE</span>
<span class="token comment"># 1. 单表的删除</span>
<span class="token comment"># 案例一 : 删除手机号以 9 结尾的女神信息</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span>
	beauty
<span class="token keyword">WHERE</span>
	phone <span class="token operator">LIKE</span> <span class="token string">'%9'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 2. 多表的删除</span>
<span class="token comment"># 案例二 : 删除张无忌的女朋友信息</span>
<span class="token keyword">DELETE</span> 
	b
<span class="token keyword">FROM</span>
	beauty b
<span class="token keyword">JOIN</span>
	boys bo
<span class="token keyword">ON</span>
	b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id
<span class="token keyword">WHERE</span>
	bo<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment"># 案例三 : 删除黄晓明的信息以及他女朋友的信息</span>
<span class="token keyword">DELETE</span> 
	b<span class="token punctuation">,</span> bo
<span class="token keyword">FROM</span>
	beauty b
<span class="token keyword">JOIN</span>
	boys bo
<span class="token keyword">ON</span>
	bo<span class="token punctuation">.</span>id <span class="token operator">=</span> b<span class="token punctuation">.</span>boyfriend_id
<span class="token keyword">WHERE</span>
	bo<span class="token punctuation">.</span>boyName <span class="token operator">=</span> <span class="token string">'黄晓明'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 方式二 : TRUNCATE</span>

<span class="token comment"># 案例一 : 将所有男神信息删除</span>
<span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> boys	
	
<span class="token comment"># DELETE vs TRUNCATE</span>
<span class="token comment">/*
1. DELETE 可以加 WHERE 条件, TRUNCATE 不能加
2. TRUNCATE 删除, 效率更高
3. 假如要删除的表有自增长列, 
	 如果使用 DELETE 删除后, 再插入数据, 自增长列的值从断点开始
	 如果使用 TRUNCATE 删除后, 再插入数据, 自增长列的值从 1 开始
4. TRUNCATE 删除没有返回值, DELETE 删除有返回值
5. TRUNCATE 删除不能回滚, DELETE 可以回滚
*/</span>	
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> boys<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> boys<span class="token punctuation">(</span>boyName<span class="token punctuation">,</span> userCP<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'张飞'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'刘备'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'关羽'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> boys	<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> boys<span class="token punctuation">(</span>boyName<span class="token punctuation">,</span> userCP<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'张飞'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'刘备'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'关羽'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br></div></div><h3 id="练习-10"><a href="#练习-10" class="header-anchor">#</a> 练习</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 运行以下脚本创建表 my_employees</span>
<span class="token keyword">Create</span> <span class="token keyword">table</span> my_employees<span class="token punctuation">(</span>
Id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
First_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
Last_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
Userid <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
Salary <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> users<span class="token punctuation">(</span>
id <span class="token keyword">int</span><span class="token punctuation">,</span>
userid <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
department_id <span class="token keyword">int</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 2. 显示表 my_employees 的结构</span>
<span class="token keyword">DESC</span> my_employees<span class="token punctuation">;</span>

<span class="token comment"># 3. 向 my_employees 表中插入下列数据 </span>
<span class="token comment">/*
ID FIRST_NAME LAST_NAME USERID SALARY
1 patel Ralph Rpatel 895
2 Dancs Betty Bdancs 860
3 Biri Ben Bbiri 1100
4 Newman Chad Cnewman 750
5 Ropeburn Audrey Aropebur 1550
*/</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span>
	my_employees

	<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'patel'</span><span class="token punctuation">,</span> <span class="token string">'Ralph'</span><span class="token punctuation">,</span> <span class="token string">'Rpatel'</span><span class="token punctuation">,</span> <span class="token number">895</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Dancs'</span><span class="token punctuation">,</span> <span class="token string">'Betty'</span><span class="token punctuation">,</span> <span class="token string">'Bdancs'</span><span class="token punctuation">,</span> <span class="token number">860</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Biri'</span><span class="token punctuation">,</span> <span class="token string">'Ben'</span><span class="token punctuation">,</span> <span class="token string">'Bbiri'</span><span class="token punctuation">,</span> <span class="token number">1100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Newman'</span><span class="token punctuation">,</span> <span class="token string">'Chad'</span><span class="token punctuation">,</span> <span class="token string">'Cnewman'</span><span class="token punctuation">,</span> <span class="token number">750</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'Ropeburn'</span><span class="token punctuation">,</span> <span class="token string">'Audrey'</span><span class="token punctuation">,</span> <span class="token string">'Aropebur'</span><span class="token punctuation">,</span> <span class="token number">1550</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 向 users 表中插入数据</span>
<span class="token comment">/*
1 Rpatel 10
2 Bdancs 10
3 Bbiri 20
4 Cnewman 30
5 Aropebur 40
*/</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span>
	users
<span class="token keyword">VALUES</span>
	<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Rpatel'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Bdancs'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Bbiri'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Cnewman'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'Aropebur'</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 5. 将 3 号员工的 last_name 修改为“drelxer”</span>
<span class="token keyword">UPDATE</span>
	my_employees
<span class="token keyword">SET</span>
	last_name <span class="token operator">=</span> <span class="token string">'drelxer'</span>
<span class="token keyword">WHERE</span>
	Id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment"># 6. 将所有工资少于 900 的员工的工资修改为 1000</span>
<span class="token keyword">UPDATE</span>
	my_employees
<span class="token keyword">SET</span>
	Salary <span class="token operator">=</span> <span class="token number">1000</span>
<span class="token keyword">WHERE</span>
	Salary <span class="token operator">&lt;</span> <span class="token number">900</span><span class="token punctuation">;</span>

<span class="token comment"># 7. 将 userid 为 biri 的 user 表和 my_employees 表的记录全部删除</span>
<span class="token keyword">DELETE</span> 
	u<span class="token punctuation">,</span> m
<span class="token keyword">FROM</span>
	users u
<span class="token keyword">JOIN</span>
	my_employees m
<span class="token keyword">ON</span>
	u<span class="token punctuation">.</span>userid <span class="token operator">=</span> 	m<span class="token punctuation">.</span>Userid
<span class="token keyword">WHERE</span>
	u<span class="token punctuation">.</span>userid <span class="token operator">=</span> 	<span class="token string">'Bbiri'</span><span class="token punctuation">;</span>
	
	
<span class="token comment"># 8. 删除所有数据</span>
<span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> my_employees<span class="token punctuation">;</span>
<span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> users<span class="token punctuation">;</span>

<span class="token comment"># 9. 检查所作的修正</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_employees<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users<span class="token punctuation">;</span>

<span class="token comment"># 10. 清空表 my_employees</span>
<span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> my_employees

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">2022/12/31 下午3:20:26</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/blogs/MySQL/MySQL2.html">
          MySQL2
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#数据库简介" class="sidebar-link reco-side-数据库简介" data-v-b57cc07c>数据库简介</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#dml" class="sidebar-link reco-side-dml" data-v-b57cc07c>DML</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#ddl" class="sidebar-link reco-side-ddl" data-v-b57cc07c>DDL</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#dcl" class="sidebar-link reco-side-dcl" data-v-b57cc07c>DCL</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#mysql安装" class="sidebar-link reco-side-mysql安装" data-v-b57cc07c>MySQL安装</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#mysql基本使用" class="sidebar-link reco-side-mysql基本使用" data-v-b57cc07c>MySQL基本使用</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#mysql的语法规范" class="sidebar-link reco-side-mysql的语法规范" data-v-b57cc07c>MySQL的语法规范</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#dql语言的学习" class="sidebar-link reco-side-dql语言的学习" data-v-b57cc07c>DQL语言的学习</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#进阶一-基础查询" class="sidebar-link reco-side-进阶一-基础查询" data-v-b57cc07c>进阶一：基础查询</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#进阶二-条件查询" class="sidebar-link reco-side-进阶二-条件查询" data-v-b57cc07c>进阶二 : 条件查询</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#进阶三-排序查询" class="sidebar-link reco-side-进阶三-排序查询" data-v-b57cc07c>进阶三 : 排序查询</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#进阶四-常见函数" class="sidebar-link reco-side-进阶四-常见函数" data-v-b57cc07c>进阶四 : 常见函数</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#进阶五-分组查询" class="sidebar-link reco-side-进阶五-分组查询" data-v-b57cc07c>进阶五 : 分组查询</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#进阶六-连接查询" class="sidebar-link reco-side-进阶六-连接查询" data-v-b57cc07c>进阶六 : 连接查询</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#进阶七-子查询" class="sidebar-link reco-side-进阶七-子查询" data-v-b57cc07c>进阶七 : 子查询</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#进阶八-分页查询" class="sidebar-link reco-side-进阶八-分页查询" data-v-b57cc07c>进阶八 : 分页查询</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#进阶九-联合查询" class="sidebar-link reco-side-进阶九-联合查询" data-v-b57cc07c>进阶九 : 联合查询</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#总结" class="sidebar-link reco-side-总结" data-v-b57cc07c>总结</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#dml-语言的学习" class="sidebar-link reco-side-dml-语言的学习" data-v-b57cc07c>DML 语言的学习</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#插入" class="sidebar-link reco-side-插入" data-v-b57cc07c>插入</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#修改" class="sidebar-link reco-side-修改" data-v-b57cc07c>修改</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#代码-10" class="sidebar-link reco-side-代码-10" data-v-b57cc07c>代码</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL1.html#练习-10" class="sidebar-link reco-side-练习-10" data-v-b57cc07c>练习</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/assets/js/app.826229b0.js" defer></script><script src="/assets/js/3.45d84e5d.js" defer></script><script src="/assets/js/1.9cec7de7.js" defer></script><script src="/assets/js/23.9de4c1b2.js" defer></script>
  </body>
</html>
