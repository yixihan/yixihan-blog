<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL2 | 摸鱼小屋</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="花开亦花散">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.06583efc.css" as="style"><link rel="preload" href="/assets/js/app.85b4c572.js" as="script"><link rel="preload" href="/assets/js/3.f0cbca55.js" as="script"><link rel="preload" href="/assets/js/1.457bae34.js" as="script"><link rel="preload" href="/assets/js/24.d6fe7445.js" as="script"><link rel="prefetch" href="/assets/js/10.a6bf59f6.js"><link rel="prefetch" href="/assets/js/11.3f481dd0.js"><link rel="prefetch" href="/assets/js/12.4d6e4613.js"><link rel="prefetch" href="/assets/js/13.e208ef95.js"><link rel="prefetch" href="/assets/js/14.720f9b5d.js"><link rel="prefetch" href="/assets/js/15.6f81eb40.js"><link rel="prefetch" href="/assets/js/16.d7028bdb.js"><link rel="prefetch" href="/assets/js/17.536a57d7.js"><link rel="prefetch" href="/assets/js/18.58b713c0.js"><link rel="prefetch" href="/assets/js/19.c7ed148c.js"><link rel="prefetch" href="/assets/js/20.7f562445.js"><link rel="prefetch" href="/assets/js/21.b94d7d0d.js"><link rel="prefetch" href="/assets/js/22.e0bbe20b.js"><link rel="prefetch" href="/assets/js/23.ff94cac6.js"><link rel="prefetch" href="/assets/js/25.839567da.js"><link rel="prefetch" href="/assets/js/26.ae1b218d.js"><link rel="prefetch" href="/assets/js/27.e2145dff.js"><link rel="prefetch" href="/assets/js/28.d3979a75.js"><link rel="prefetch" href="/assets/js/29.ea89e756.js"><link rel="prefetch" href="/assets/js/30.3418ef75.js"><link rel="prefetch" href="/assets/js/31.548b0737.js"><link rel="prefetch" href="/assets/js/32.63df52d9.js"><link rel="prefetch" href="/assets/js/33.ae3cab3b.js"><link rel="prefetch" href="/assets/js/34.0546e12e.js"><link rel="prefetch" href="/assets/js/35.89441f91.js"><link rel="prefetch" href="/assets/js/36.378bebe5.js"><link rel="prefetch" href="/assets/js/37.89c1b6a9.js"><link rel="prefetch" href="/assets/js/38.83fa5f6b.js"><link rel="prefetch" href="/assets/js/39.0b362766.js"><link rel="prefetch" href="/assets/js/4.4f5a0d25.js"><link rel="prefetch" href="/assets/js/40.a582dbc0.js"><link rel="prefetch" href="/assets/js/41.ec6e0343.js"><link rel="prefetch" href="/assets/js/42.f6851b3d.js"><link rel="prefetch" href="/assets/js/43.32920414.js"><link rel="prefetch" href="/assets/js/44.e7a48050.js"><link rel="prefetch" href="/assets/js/5.e37fb802.js"><link rel="prefetch" href="/assets/js/6.5c1f2a21.js"><link rel="prefetch" href="/assets/js/7.4be34a0e.js"><link rel="prefetch" href="/assets/js/8.c6933fa8.js"><link rel="prefetch" href="/assets/js/9.99813f43.js">
    <link rel="stylesheet" href="/assets/css/0.styles.06583efc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>摸鱼小屋</h3> <p class="description" data-v-59e6cb88>花开亦花散</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>易曦翰</span>
          
        <!---->
        2022
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/yixihan.png" alt="摸鱼小屋" class="logo"> <span class="site-name">摸鱼小屋</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/MySQL/" class="nav-link"><i class="undefined"></i>
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/categories/面经/" class="nav-link"><i class="undefined"></i>
  面经
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/RabbitMQ/" class="nav-link"><i class="undefined"></i>
  RabbitMQ
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程环境搭建/" class="nav-link"><i class="undefined"></i>
  编程环境搭建
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-gongju"></i>
      工具箱
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://xpdf.net/?s" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  PDF转Word
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  在线工具箱
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://openyyy.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  音乐格式转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.shopify.com/tools/logo-maker" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  logo 生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sms-activate.ru/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  虚拟短信接收
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://fanyi.phpstudyhelper.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  代码变量名称翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/yixihan.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    易曦翰
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>34</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>32</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Go/" class="nav-link"><i class="undefined"></i>
  Go
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/MySQL/" class="nav-link"><i class="undefined"></i>
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/categories/面经/" class="nav-link"><i class="undefined"></i>
  面经
</a></li><li class="dropdown-item"><!----> <a href="/categories/Nginx/" class="nav-link"><i class="undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/categories/RabbitMQ/" class="nav-link"><i class="undefined"></i>
  RabbitMQ
</a></li><li class="dropdown-item"><!----> <a href="/categories/编程环境搭建/" class="nav-link"><i class="undefined"></i>
  编程环境搭建
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-gongju"></i>
      工具箱
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://xpdf.net/?s" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  PDF转Word
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  在线工具箱
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://openyyy.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  音乐格式转换
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.shopify.com/tools/logo-maker" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  logo 生成
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://sms-activate.ru/cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  虚拟短信接收
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://fanyi.phpstudyhelper.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  代码变量名称翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-account"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/yixihan" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/blogs/MySQL/MySQL1.html" class="sidebar-link">MySQL1</a></li><li><a href="/blogs/MySQL/MySQL2.html" aria-current="page" class="active sidebar-link">MySQL2</a></li><li><a href="/blogs/MySQL/MySQL3.html" class="sidebar-link">MySQL3</a></li><li><a href="/blogs/MySQL/MySQL4.html" class="sidebar-link">MySQL4</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>MySQL2</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>易曦翰</span>
          
        <!---->
        2022
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">MySQL2</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>易曦翰</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2022/10/30</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>MySQL</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="mysql"><a href="#mysql" class="header-anchor">#</a> MySQL</h1> <h2 id="ddl-语言的学习"><a href="#ddl-语言的学习" class="header-anchor">#</a> DDL 语言的学习</h2> <h3 id="库的管理"><a href="#库的管理" class="header-anchor">#</a> 库的管理</h3> <blockquote><p>创建库</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">]</span> 库名<span class="token punctuation">[</span> <span class="token keyword">character</span> <span class="token keyword">set</span> 字符集名<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>修改库</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">database</span> 库名 <span class="token keyword">character</span> <span class="token keyword">set</span> 字符集名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>删除库</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token keyword">exists</span><span class="token punctuation">]</span> 库名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="表的管理"><a href="#表的管理" class="header-anchor">#</a> 表的管理</h3> <blockquote><p>创建表</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">]</span> 表名<span class="token punctuation">(</span>
	字段名 字段类型 <span class="token punctuation">[</span>约束<span class="token punctuation">]</span><span class="token punctuation">,</span>
	字段名 字段类型 <span class="token punctuation">[</span>约束<span class="token punctuation">]</span><span class="token punctuation">,</span>
	。。。
	字段名 字段类型 <span class="token punctuation">[</span>约束<span class="token punctuation">]</span> 

<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>修改表</p></blockquote> <ul><li><p>添加列</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token keyword">column</span> 列名 类型 <span class="token punctuation">[</span><span class="token keyword">first</span><span class="token operator">|</span><span class="token keyword">after</span> 字段名<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>修改列的类型或约束</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> <span class="token keyword">column</span> 列名 新类型 <span class="token punctuation">[</span>新约束<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>修改列名</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 change <span class="token keyword">column</span> 旧列名 新列名 类型<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>删除列</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">column</span> 列名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>修改表名</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">rename</span> <span class="token punctuation">[</span><span class="token keyword">to</span><span class="token punctuation">]</span> 新表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <blockquote><p>删除表</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span><span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token keyword">exists</span><span class="token punctuation">]</span> 表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>复制表</p></blockquote> <ul><li><p>复制表的结构</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token operator">like</span> 旧表<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>复制表的结构+数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表名
<span class="token keyword">select</span> 查询列表 <span class="token keyword">from</span> 旧表<span class="token punctuation">[</span><span class="token keyword">where</span> 筛选<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h3 id="代码"><a href="#代码" class="header-anchor">#</a> 代码</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># DDL</span>

<span class="token comment">/*
数据定义语言

库和表的管理

一. 库的管理
创建, 修改, 删除

二. 表的管理
创建, 修改, 删除

创建 : CREATE 
修改 : ALTER
删除 : DROP
*/</span>

<span class="token comment"># 一. 库的管理</span>
<span class="token comment"># 1. 库的创建</span>

<span class="token comment">/*
CREATE DATABASE [IF NOT EXISTS] 库名;
*/</span>

<span class="token comment"># 案例一 : 创建库 books</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> books<span class="token punctuation">;</span>

<span class="token comment"># 2. 库的修改</span>

<span class="token comment">#更改库的字符集</span>
<span class="token keyword">ALTER</span> <span class="token keyword">DATABASE</span> books <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8<span class="token punctuation">;</span>


<span class="token comment"># 3. 库的删除</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> books<span class="token punctuation">;</span>


<span class="token comment"># 二. 表的管理</span>

<span class="token comment"># 1. 表的创建</span>
<span class="token comment">/*
CREATE TABLE 表名 (
	列名 列的类型 [(长度) 约束],
	列名 列的类型 [(长度) 约束],
	列名 列的类型 [(长度) 约束],
	...
	列名 列的类型 [(长度) 约束]
)	
*/</span>

<span class="token comment"># 案例 : 创建 book 表</span>
<span class="token keyword">USE</span> books<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> book <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token comment"># 编号</span>
	bname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 书名</span>
	price <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span> <span class="token comment"># 价格</span>
	authorId <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token comment"># 作者 ID</span>
	publishDate <span class="token keyword">DATETIME</span> <span class="token comment"># 出版日期</span>
<span class="token punctuation">)</span>	

<span class="token keyword">DESC</span> book<span class="token punctuation">;</span>

<span class="token comment"># 案例二 : 创建 author 表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> author <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	nation <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">DESC</span> author<span class="token punctuation">;</span>

<span class="token comment"># 2. 表的修改</span>
<span class="token comment">/*
语法 : 
ALTER TABLE 表名 CHANGE | MODIFY | ADD | DROP | RENAME COLUMN 列名 [列类型 约束]

1. 修改列名
2. 修改列的类型或约束
3. 添加新列
4. 删除列
5. 修改表名
*/</span>

<span class="token comment"># 1. 修改列名</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> book CHANGE <span class="token keyword">COLUMN</span> publishDate pubDate DATATIME<span class="token punctuation">;</span>

<span class="token comment"># 2. 修改列的类型或约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> book <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> pubDate <span class="token keyword">TIMESTAMP</span>

<span class="token comment"># 3. 添加新列</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> author <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> annual <span class="token keyword">DOUBLE</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 删除列</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> author <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> annual<span class="token punctuation">;</span>

<span class="token comment"># 5. 修改表名</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> author <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> book_author<span class="token punctuation">;</span>

<span class="token keyword">DESC</span> book_author

<span class="token comment"># 3. 表的删除</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> book_author<span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> <span class="token keyword">TABLES</span><span class="token punctuation">;</span>


<span class="token comment"># 通用的写法</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> 旧库名<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> 新库名<span class="token punctuation">;</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> 旧表名<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 表的复制</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 
	book<span class="token punctuation">(</span>id<span class="token punctuation">,</span> bname<span class="token punctuation">,</span> price<span class="token punctuation">,</span> authorId<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> 
	<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'123'</span><span class="token punctuation">,</span> <span class="token number">123.4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'45'</span><span class="token punctuation">,</span> <span class="token number">12.34</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'wad'</span><span class="token punctuation">,</span> <span class="token number">1.234</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'rg'</span><span class="token punctuation">,</span> <span class="token number">12.34</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment"># 1. 仅仅复制表的结构</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy <span class="token operator">LIKE</span> book	

<span class="token comment"># 2. 复制表的结构和数据</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy2
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	book<span class="token punctuation">;</span>
	
<span class="token comment"># 只复制部分数据</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy3
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	book
<span class="token keyword">WHERE</span>
	price <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
	
<span class="token comment"># 仅仅复制某些字段</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> copy4
<span class="token keyword">SELECT</span>
	id<span class="token punctuation">,</span> bname
<span class="token keyword">FROM</span>
	book
<span class="token keyword">WHERE</span>
	<span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br></div></div><h3 id="练习"><a href="#练习" class="header-anchor">#</a> 练习</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 创建表 dept1</span>
<span class="token comment">/*
name Null? type
id int(7)
name varchar(25)
*/</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> dept1 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 2. 将表 departments 中的数据插入新表 dept2 中</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> dept2
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	departments<span class="token punctuation">;</span>


<span class="token comment"># 3. 创建表 emp5</span>
<span class="token comment">/*
name Null? type
id int(7)
First_name Varchar (25)
Last_name Varchar(25)
Dept_id int(7)
*/</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> emp5 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	First_name <span class="token keyword">Varchar</span> <span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	Last_name <span class="token keyword">Varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	Dept_id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 将列 Last_name 的长度增加到 50</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp5 <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> Last_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">DESC</span> emp5<span class="token punctuation">;</span>
 
<span class="token comment"># 5. 根据表 employees 创建 employees2</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> employees2 <span class="token operator">LIKE</span> employees<span class="token punctuation">;</span>

<span class="token comment"># 6. 删除表 emp5</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> emp5<span class="token punctuation">;</span>

<span class="token comment"># 7. 将表 employees2 重命名为 emp5</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employees2 <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> emp5<span class="token punctuation">;</span>

<span class="token comment"># 8 在表 dept 和 emp5 中添加新列 test_column，并检查所作的操作</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> dept1 <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> test_column <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp5 <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> test_column <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">DESC</span> dept1<span class="token punctuation">;</span>
<span class="token keyword">DESC</span> emp5<span class="token punctuation">;</span>

<span class="token comment"># 9.直接删除表 emp5 中的列 dept_id</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp5 <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> dept_id <span class="token keyword">INT</span><span class="token punctuation">;</span>
<span class="token keyword">DESC</span> emp5<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp5 <span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span>  dept_id<span class="token punctuation">;</span>
<span class="token keyword">DESC</span> emp5<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><h3 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h3> <h4 id="数值型"><a href="#数值型" class="header-anchor">#</a> 数值型</h4> <blockquote><p>整型</p></blockquote> <p>tinyint		smallint		mediumint		int/integer		bigint
1         		2        			3          				4          			  8</p> <blockquote><p>特点</p></blockquote> <ul><li>都可以设置无符号和有符号，默认有符号，通过unsigned设置无符号</li> <li>如果超出了范围，会报out or range异常, 不会插入值</li> <li>长度可以不指定，默认会有一个长度</li> <li>长度代表显示的最大宽度，如果不够则左边用0填充，但需要搭配zerofill，并且默认变为无符号整型 (即不能插入负数)</li></ul> <h4 id="浮点型"><a href="#浮点型" class="header-anchor">#</a> 浮点型</h4> <blockquote><p>定点数：</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">decimal</span><span class="token punctuation">(</span>M<span class="token punctuation">,</span>D<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>浮点数:</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">float</span><span class="token punctuation">(</span>M<span class="token punctuation">,</span>D<span class="token punctuation">)</span>   <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">double</span><span class="token punctuation">(</span>M<span class="token punctuation">,</span>D<span class="token punctuation">)</span>  <span class="token number">8</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>特点</p></blockquote> <ul><li>M代表整数部位+小数部位的个数，D代表小数部位</li> <li>如果超出范围，则报out or range异常，不会插入值</li> <li>M和D都可以省略，但对于定点数，M默认为10，D默认为0</li> <li>如果精度要求较高，则优先考虑使用定点数</li> <li>如果总位数大于 M , 会直接报错
如果总位数大于 D , 会进行四舍五入
如果总位数小于 D , 会填充 0</li></ul> <h4 id="字符型"><a href="#字符型" class="header-anchor">#</a> 字符型</h4> <p>char		varchar		binary		varbinary		enum		set		text		blob</p> <p>char : 固定长度的字符，写法为char(M)，最大长度不能超过M，其中M可以省略，默认为1
varchar : 可变长度的字符，写法为varchar(M)，最大长度不能超过M，其中M不可以省略</p> <h4 id="日期型"><a href="#日期型" class="header-anchor">#</a> 日期型</h4> <p>year年
date日期
time时间
datetime 日期+时间          8</p> <p>timestamp 日期+时间         4   比较容易受时区、语法模式、版本的影响，更能反映当前时区的真实时间</p> <h4 id="代码-2"><a href="#代码-2" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 常见的数据类型</span>

<span class="token comment">/*
数值型 : 
	整型
	小数 :
		定点数
		浮点数
		
字符型 : 
			较短的文本 : char VARCHAR
			较长的文本 : text blob(较长的二进制数据)

日期型 :			

*/</span>

<span class="token comment"># 一. 整型</span>

<span class="token comment">/*
分类 :
	TINYINT		SMALLINT		MEDIUMINT		INT | INTEGER		BIGINT
	1					2						3						4								8					
	
特点 : 
		1. 如果不设置无符号还是有符号, 默认是有符号, 如果想设置无符号, 需要添加 UNSIGNED 关键字
		2. 如果插入的数组超出了范围, 则直接报错 Out of range value
		3. 如果不设置长度, 会有默认长度
			 长度代表了显示的最大宽度,如果不够会用 0 在左边填充, 但必须搭配 ZEROFILL (使用之后不能插入负数)
*/</span>

<span class="token comment"># 1. 如何设置无符号和有符号</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> tab_int<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tab_int <span class="token punctuation">(</span>
	t1 <span class="token keyword">INT</span><span class="token punctuation">,</span>
	t2 <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span><span class="token punctuation">,</span>
	t3 <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	t4 <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> ZEROFILL
	<span class="token comment"># Duplicate column name 't3</span>
	<span class="token comment"># t3 INT(17)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">DESC</span> tab_int<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_int
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">264135</span><span class="token punctuation">,</span> <span class="token number">54684</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">123</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tab_int<span class="token punctuation">;</span>

<span class="token comment"># 二. 小数</span>

<span class="token comment">/*
浮点数
FLOAT(M, D)
DOUBLE(M, D)

定点数
DEC(M,D)
DECIMAL(M,D)

特点 : 
	1. M 和 D 可以省略
		 如果是 DECIMAL, 则默认 M 为 10, D 为 0
		 如果是 FLOAT 和 DOUBLE, 则会根据插入的数值的精度来决定精度
		 
		 
		 
	2. M 代表的整数部位 + 小数部位
		 D 代表的是小数部位
		 如果总位数大于 M , 会直接报错
		 如果总位数大于 D , 会进行四舍五入
		 如果总位数小于 D , 会填充 0
		 
	3. 定点型的精确度较高, 如果要求插入数值的精确度较高, 如获取运算等则使用定点型
		 其余使用浮点型即可
*/</span>

<span class="token comment"># 测试 M 和 D</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> tab_float<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> tab_float <span class="token punctuation">(</span>
	t1 <span class="token keyword">DOUBLE</span><span class="token punctuation">,</span>
	t2 <span class="token keyword">FLOAT</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	t3 <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">DESC</span> tab_float<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_float <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">123.45</span><span class="token punctuation">,</span> <span class="token number">123.45</span><span class="token punctuation">,</span> <span class="token number">123.45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_float <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">123.456</span><span class="token punctuation">,</span> <span class="token number">123.456</span><span class="token punctuation">,</span> <span class="token number">123.456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_float <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">123.4</span><span class="token punctuation">,</span> <span class="token number">123.4</span><span class="token punctuation">,</span> <span class="token number">123.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_float <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">12323.45</span><span class="token punctuation">,</span> <span class="token number">123.45</span><span class="token punctuation">,</span> <span class="token number">12323.45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	tab_float<span class="token punctuation">;</span>
	
<span class="token comment"># 原则</span>
<span class="token comment">/*
所选择的类型越简单越好, 能保存的数值类型越小越好
*/</span>		

<span class="token comment"># 三. 字符型</span>

<span class="token comment">/*
较短的文本 : 
char
varchar
较长的文本
text
blob

其他 : 
binary 和 varbinary 用于保存较短的二进制
enum 用于保存枚举
set 用于保存集合

特点 : 
						写法								M 的意思														特点								空间的耗费			效率
char				char(M)							最大的字符数, 可以省略, 默认为一		固定长度的字符串		比较耗费				高

varchar			varchar(M)					最大的字符数, 不可以省略						可变长度的字符串		比较节省				低


*/</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> tab_char <span class="token punctuation">(</span>
	c1 <span class="token keyword">enum</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span>

<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_char <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_char <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_char <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_char <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># Data truncated for column 'c1' at row 1</span>
<span class="token comment"># INSERT INTO tab_char VALUES ('M');</span>


<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tab_char<span class="token punctuation">;</span>


<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> tab_set <span class="token punctuation">(</span>
	s1 <span class="token keyword">SET</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span>

<span class="token punctuation">)</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_set <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 逗号后面不能加空格</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_set <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'a,b,c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_set <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tab_set<span class="token punctuation">;</span>


<span class="token comment"># 日期型</span>

<span class="token comment">/*
分类 : 
date : 只保存日期
 
time : 只保存时间

year : 只保存年

datetime : 保存 日期 + 时间

timestamp : 保存 日期 + 时间

特点 : 
	
								字节									范围								时区等的影响
datetime				8											1000-9999						5.7中已受时区影响

timestamp				4											1970-2039						受


*/</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> tab_date<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tab_date <span class="token punctuation">(</span>
	t1 <span class="token keyword">DATETIME</span><span class="token punctuation">,</span>
	t2 <span class="token keyword">TIMESTAMP</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_date <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tab_date<span class="token punctuation">;</span>

<span class="token comment"># 查看时区</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'time_zone'</span><span class="token punctuation">;</span>

<span class="token keyword">SET</span> time_zone <span class="token operator">=</span> <span class="token string">'-8:00'</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br></div></div><h3 id="约束"><a href="#约束" class="header-anchor">#</a> 约束</h3> <h4 id="常见约束"><a href="#常见约束" class="header-anchor">#</a> 常见约束</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token operator">NOT</span> <span class="token boolean">NULL</span> : 非空<span class="token punctuation">,</span> 该字段的值必填
<span class="token keyword">UNIQUE</span> : 唯一<span class="token punctuation">,</span> 该字段的值不可重复
<span class="token keyword">DEFAULT</span> : 默认<span class="token punctuation">,</span> 该字段的值不用手动插入有默认值
<span class="token keyword">CHECK</span> : 检查<span class="token punctuation">,</span> MySQL 不支持
<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> : 主键<span class="token punctuation">,</span> 该字段的值不可重复并且非空<span class="token punctuation">,</span> <span class="token keyword">UNIQUE</span> <span class="token operator">+</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> : 外键<span class="token punctuation">,</span> 该字段的值引用了另外的表的字段
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>主键和唯一</p></blockquote> <ul><li>区别
<ul><li>一个表至多有一个主键, 但可以有多个唯一</li> <li>主键不允许为空, 唯一可以为空</li></ul></li> <li>相同点
<ul><li>都具有唯一性</li> <li>都支持组合键, 但不推荐</li></ul></li></ul> <blockquote><p>外键</p></blockquote> <ul><li><p>用于限制两个表的关系, 从表的字段值引用了主表的某字段值</p></li> <li><p>外键列和主表的被引用列要求类型一致, 意义一样, 名称无要求</p></li> <li><p>主表的被引用列要求是一个 key (一般就是主键)</p></li> <li><p>插入数据, 先插入主表</p> <p>删除数据, 先删除从表</p> <p>可以通过以下两种方式来删除主表的记录</p> <ul><li>方式一 : 级联删除<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fk_stu_major <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>majorid<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>方式二 : 级联置空<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fk_stu_major <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>majorid<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h4 id="创建表是添加约束"><a href="#创建表是添加约束" class="header-anchor">#</a> 创建表是添加约束</h4> <blockquote><p>语法</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
	字段名 字段类型 <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token comment"># 非空</span>
	字段名 字段类型 <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> <span class="token comment"># 主键</span>
	字段名 字段类型 <span class="token keyword">unique</span><span class="token punctuation">,</span> <span class="token comment"># 唯一</span>
	字段名 字段类型 <span class="token keyword">default</span> 值<span class="token punctuation">,</span> <span class="token comment"># 默认</span>

	<span class="token keyword">constraint</span> 约束名 <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>字段名<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表（被引用列）
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>注意</p></blockquote> <table><thead><tr><th style="text-align:center;">分类</th> <th style="text-align:center;">支持类型</th> <th style="text-align:center;">可以起约束名</th></tr></thead> <tbody><tr><td style="text-align:center;">列级约束</td> <td style="text-align:center;">除了外键</td> <td style="text-align:center;">不可以</td></tr> <tr><td style="text-align:center;">表级约束</td> <td style="text-align:center;">除了非空和默认</td> <td style="text-align:center;">可以, 但是对主键无效</td></tr></tbody></table> <h4 id="修改表时添加或者删除约束"><a href="#修改表时添加或者删除约束" class="header-anchor">#</a> 修改表时添加或者删除约束</h4> <ul><li><p>非空</p> <ul><li>添加非空<div class="language-sql line-numbers-mode"><pre class="language-sql"><code>  <span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> <span class="token keyword">column</span> 字段名 字段类型 <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
  
<span class="token operator">-</span> 删除非空

    <span class="token identifier"><span class="token punctuation">`</span><span class="token punctuation">`</span></span><span class="token punctuation">`</span><span class="token keyword">sql</span>
    <span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> <span class="token keyword">column</span> 字段名 字段类型<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul></li> <li><p>默认</p> <ul><li>添加默认<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> <span class="token keyword">column</span> 字段名 字段类型 <span class="token keyword">default</span> 值<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>删除默认<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> <span class="token keyword">column</span> 字段名 字段类型<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>主键</p> <ul><li>添加主键<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token punctuation">[</span> <span class="token keyword">constraint</span> 约束名<span class="token punctuation">]</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>字段名<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>删除主键<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>唯一</p> <ul><li>添加唯一<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token punctuation">[</span> <span class="token keyword">constraint</span> 约束名<span class="token punctuation">]</span> <span class="token keyword">unique</span><span class="token punctuation">(</span>字段名<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>删除唯一<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">index</span> 索引名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>外键</p> <ul><li>添加外键<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token punctuation">[</span> <span class="token keyword">constraint</span> 约束名<span class="token punctuation">]</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>字段名<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表（被引用列）<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>删除外键<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> 约束名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h4 id="自增长列"><a href="#自增长列" class="header-anchor">#</a> 自增长列</h4> <blockquote><p>特点</p></blockquote> <ol><li>不用手动插入值, 可以自动提供序列值, 默认从 1 开始, 步长为 1
auto_increment_increment  ---&gt; 步长
如果要更改起始值 : 手动插入值
如果要更改步长 : 更改系统变量
<code>set auto_increment_increment = 值</code></li> <li>一个表至多有一个自增长列</li> <li>自增长列只能支持数值型</li> <li>自增长列必须为一个 key</li></ol> <ul><li>创建表是设置自增长列<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表<span class="token punctuation">(</span>
    字段名 字段类型 约束 <span class="token keyword">auto_increment</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li>修改表时设置自增长列<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表 <span class="token keyword">modify</span> <span class="token keyword">column</span> 字段名 字段类型 约束 <span class="token keyword">auto_increment</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>删除自增长列<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表 <span class="token keyword">modify</span> <span class="token keyword">column</span> 字段名 字段类型 约束<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h5 id="代码-3"><a href="#代码-3" class="header-anchor">#</a> 代码</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 标识列</span>

<span class="token comment">/*
又称为自增长列

含义 : 可以不用手动的插入值, 系统提供默认的序列值

特点 : 
	1. 标识列必须和主键搭配吗 ? 
		 不一定, 要要求是一个 key
	
	2. 一个表中, 最多只有一个标识列		 
	
	3. 标识列的类型只能是数值类型
	
	4. 标识列可以通过 SET AUTO_INCREMENT_increment = 1; 设置步长
		 也可以通过手动插入值设置起始值
		 

							创建语法的关键字				是否实际占用物理空间																使用
	
	视图				CREATE VIEW							没有(没有为数据开辟空间, 只是保存了 sql 逻辑)			增删改查, 一般不能增删改
	
	表	 				CREATE TABLE						占用(为数据开辟了空间)														增删改查

*/</span>

<span class="token comment"># 一. 创建表时设置标识列</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> tab_identity<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> tab_identity <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> tab_identity<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_identity<span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_identity<span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tab_identity<span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%auto_increment%'</span><span class="token punctuation">;</span>

<span class="token keyword">SET</span> AUTO_INCREMENT_increment <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>


<span class="token comment"># 二. 修改表时设置标识列</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> tab_identity<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> tab_identity <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tab_identity <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">;</span>


<span class="token comment"># 三. 修改表时删除标识列</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tab_identity <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> id <span class="token keyword">INT</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h4 id="代码-4"><a href="#代码-4" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 常见约束</span>

<span class="token comment">/*

含义 : 一种限制, 用于限制表中的数据,为了保证表中的数据的准确和可靠性(一致性)

分类 : 六大约束
	
	NOT NULL : 非空, 用于保证该字段的值不能为空
	比如 : 姓名, 学号等
	
	DEFAULT : 默认, 用于保证该字段有默认值
	比如 : 性别等
	
	PRIMARY : 主键, 用于保证该字段的值具有唯一性, 且非空
	比如 : 学号, 员工编号等
	
	UNIQUE : 唯一, 用于保证该字段的值具有唯一性, 可以为空
	比如 : 座位号, 身份证号等
	
	CHECK : 检查约束 [MySQL 中不支持], 用于加条件, 符合条件才能插入
	比如 : 性别(男 | 女), 年龄(0 ~ 120)等
	
	
	FOREIGN KEY : 外键, 用于限制两个表的关系, 用于保证该字段的值必须来自于主表的关联列的值
								在从表中添加外键约束, 用于引用主表中某列的值
	比如 : 专业编号, 员工表的部门编号等
	
添加约束的时机 : 
	1. 创建表时
	2. 修改表时
								
约束的添加分类 :
	
	列级约束 :
		1. 六大约束语法上都支持, 但外键约束没有效果
		
	表级约束
		2. 除了非空和默认, 其他的都支持

语法 : 
CREATE TABLE 表名 (
	字段名 字段类型 列级约束,
	字段名 字段类型
	表记约束
)

主键和唯一的大对比 : 
		
							保证唯一性							是否允许为空						一个表中可以有多少个									是否允许组合
	主键				√												x												至多有一个(5.7可以有多个?)						√, 但不推荐
	唯一				√												√												可以有多个														√, 但不推荐
	INSERT into major VALUES(1, 'java');
	INSERT into major VALUES(2, 'h5');
	INSERT into stuinfo VALUES(2, 'join', '男', null , null, 1);
	INSERT into stuinfo VALUES(2, 'join', '男', null , null, 1);
	TRUNCATE TABLE stuinfo;
	
	
外键 :
		1. 要求在从表设置外键关系
		2. 从表的外键列的类型和主表的关联列的类型要求一致或兼容, 名称五要求
		3. 主表的关联列必须是一个key (一般是主键或者唯一键)
		4. 插入数据时, 先插主表的数据, 再插入从表的数据
			 删除数据时, 先删除从表的数据, 再删除主表的数据
			 
			 
							位置										支持的约束类型												是否可以起约束名
	列级约束		列的后面								语法上都支持, 但是外键没有效果				不可以
	表级约束		所有列的后面						默认和非空不支持, 其他都支持					可以(主键没有效果)
*/</span>

<span class="token comment"># 一. 创建表是添加约束</span>

<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> students<span class="token punctuation">;</span>
<span class="token keyword">USE</span> students<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> stuinfo<span class="token punctuation">;</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> major<span class="token punctuation">;</span>


<span class="token comment"># 1. 添加列级约束</span>

<span class="token comment">/*

语法 : 

直接在字段名和类型后面追加 约束类型即可

只支持 : 默认 非空 主键 唯一

*/</span>


<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> stuinfo <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span> <span class="token comment"># 主键</span>
	stuName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment"># 非空</span>
	gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">CHECK</span><span class="token punctuation">(</span>gender <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">#检查 </span>
	seat <span class="token keyword">INT</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span> <span class="token comment"># 唯一约束</span>
	age <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token comment"># 默认约束</span>
	majorId <span class="token keyword">INT</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token comment"># 外键</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> major<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	majorName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">DESC</span> stuinfo<span class="token punctuation">;</span>

<span class="token comment"># 查看 stuinfo, 包括主键 外键 唯一</span>
<span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> stuinfo<span class="token punctuation">;</span>

<span class="token comment"># 添加外键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> majorId <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token keyword">REFERENCES</span> major <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span>


<span class="token comment"># 2. 添加表级约束</span>

<span class="token comment">/*

语法 : 在各个字段的最下面
[CONSTRAINT 约束名] 约束类型 (字段名)
*/</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> stuinfo <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token comment"># 主键</span>
	stuName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 非空</span>
	gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">#检查 </span>
	seat <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token comment"># 唯一约束</span>
	age <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token comment"># 默认约束</span>
	majorId <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token comment"># 外键</span>
	
	<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> stuName<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 主键</span>
	<span class="token keyword">UNIQUE</span> <span class="token punctuation">(</span>seat<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 唯一键</span>
	<span class="token keyword">CHECK</span> <span class="token punctuation">(</span>gender <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment"># 检查</span>
	<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>majorId<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token comment"># 外键</span>
	
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> stuinfo<span class="token punctuation">;</span>

<span class="token comment"># 通用的写法 : </span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> stuinfo <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
	stuName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	age <span class="token keyword">INT</span><span class="token punctuation">,</span>
	seat <span class="token keyword">INT</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>
	majorId <span class="token keyword">INT</span><span class="token punctuation">,</span>
	
	<span class="token keyword">CONSTRAINT</span> fk_stuinfo_major <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>majorId<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment"># 二. 修改表时添加约束</span>

<span class="token comment">/*
1. 添加列级约束
ALTER TABLE 表名 MODIFY COLUMN 字段名 字段类型 新约束

2. 添加表级约束
ALTER TABLE 表名 ADD [CONSTRAINT 约束名] 约束类型(字段名) [外键的引用]

*/</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> stuinfo<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> stuinfo <span class="token punctuation">(</span>
    id <span class="token keyword">INT</span><span class="token punctuation">,</span>
    stuName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    gender <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    age <span class="token keyword">INT</span><span class="token punctuation">,</span>
    seat <span class="token keyword">INT</span><span class="token punctuation">,</span>
    majorId <span class="token keyword">INT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">DESC</span> stuinfo<span class="token punctuation">;</span>

<span class="token comment"># 1. 添加非空约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> stuName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>


<span class="token comment"># 2. 添加默认约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> age <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">18</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 添加主键</span>
<span class="token comment"># 列级约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>
<span class="token comment"># 表级约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 添加唯一键</span>
<span class="token comment"># 列级约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> seat <span class="token keyword">INT</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">;</span>
<span class="token comment"># 表级约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> <span class="token punctuation">(</span>seat<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 5. 添加外键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fk_stuinfo_major <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>majorId<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> major<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment"># 三. 修改表时删除约束</span>

<span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> stuinfo<span class="token punctuation">;</span>

<span class="token comment"># 1. 删除非空约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> stuName <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 2. 删除默认约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> age <span class="token keyword">INT</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 删除主键</span>
<span class="token comment"># 列级约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> id <span class="token keyword">INT</span><span class="token punctuation">;</span>
<span class="token comment"># 表级约束 (推荐)</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 删除唯一键</span>
<span class="token comment"># 列级约束</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> seat<span class="token punctuation">;</span>
<span class="token comment"># 表级约束(推荐)</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> seat<span class="token punctuation">;</span>

<span class="token comment"># 5. 删除外键</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stuinfo <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> fk_stuinfo_major<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br></div></div><h4 id="练习-2"><a href="#练习-2" class="header-anchor">#</a> 练习</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 向表 emp2 的 id 列中添加 PRIMARY KEY 约束（my_emp_id_pk）</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp2 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> my_emp_id_pk <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 2. 向表 dept2 的 id 列中添加 PRIMARY KEY 约束（my_dept_id_pk）</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> dept2 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> my_dept_id_pk <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 向表 emp2 中添加列 dept_id，并在其中定义 FOREIGN KEY 约束，与之相关联的列是dept2 表中的 id 列。</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp2 <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> dept_id <span class="token keyword">INT</span><span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp2 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> fk_emp2_dept2 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>dept_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> dept2<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="tcl-语言"><a href="#tcl-语言" class="header-anchor">#</a> TCL 语言</h2> <h3 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h3> <h4 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h4> <blockquote><p>含义</p></blockquote> <p>事务 : 一条或多条 sql 语句组成一个执行单位, 一组 sql 语句要么都执行, 要么都不执行</p> <blockquote><p>特点(ACID)</p></blockquote> <ul><li>原子性 : 一个事务是不可再分割的整体, 要么都执行, 要么都不执行</li> <li>一致性 : 一个事务可以使数据从一个一致状态切换到另一个一致的状态</li> <li>隔离性 : 一个事务不受其他事务的干扰, 多个事务互相隔离的</li> <li>持久性 : 一个事务一但提交了, 则永久的持久化到本地</li></ul> <h4 id="事务的使用步骤"><a href="#事务的使用步骤" class="header-anchor">#</a> 事务的使用步骤</h4> <blockquote><p>了解</p></blockquote> <p>隐式(自动)事务 : 没有明显的开启和结束, 本身就是一条事务可以自动提交, 比如 insert, update, delete
显式事务 : 具有明显的开启和结束</p> <blockquote><p>使用显示事务</p></blockquote> <ul><li><p>开启事务</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment"># 可以省略</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>编写一组逻辑 sql 语句
注意 : sql 语句支持的是 insert update delete</p> <ul><li>设置回滚点<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">savepoint</span> 回滚点名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li><p>结束事务</p> <ul><li>提交 : <code>commit;</code></li> <li>回滚 : <code>rollback;</code></li> <li>回滚到指定地方 : <code>rollback to 回滚点名</code></li></ul></li></ul> <h4 id="并发事务"><a href="#并发事务" class="header-anchor">#</a> 并发事务</h4> <blockquote><p>事务的并发问题是如何发生的 ?</p></blockquote> <p>多个事务同时操作同一个数据库的相同数据时</p> <blockquote><p>并发问题都有哪些 ?</p></blockquote> <ul><li>脏读 : 一个事务读取了其他事务还没有提交的数据, 读到的是其他事务 '更新' 的数据</li> <li>不可重复读 : 一个事务多次读取, 结果不一样</li> <li>幻读 : 一个事务读取了其他事务还没有提交的数据, 只是读到的是其他事务 '插入' 的数据</li></ul> <blockquote><p>如何解决并发问题 ?</p></blockquote> <p>通过设置隔离级别来解决并发问题</p> <blockquote><p>隔离级别</p></blockquote> <table><thead><tr><th style="text-align:center;">分类</th> <th style="text-align:center;">脏读</th> <th style="text-align:center;">不可重复度</th> <th style="text-align:center;">幻读</th></tr></thead> <tbody><tr><td style="text-align:center;">read uncommitted : 读未提交</td> <td style="text-align:center;">x</td> <td style="text-align:center;">x</td> <td style="text-align:center;">x</td></tr> <tr><td style="text-align:center;">read committed : 读已提交</td> <td style="text-align:center;">√</td> <td style="text-align:center;">x</td> <td style="text-align:center;">x</td></tr> <tr><td style="text-align:center;">repeatable read : 可重复读</td> <td style="text-align:center;">√</td> <td style="text-align:center;">√</td> <td style="text-align:center;">x</td></tr> <tr><td style="text-align:center;">serializable : 串行化</td> <td style="text-align:center;">√</td> <td style="text-align:center;">√</td> <td style="text-align:center;">√</td></tr></tbody></table> <h4 id="代码-5"><a href="#代码-5" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># TCL</span>

<span class="token comment">/*
Transaction Control Language 事务控制语言

事务 : 
	一个或者一组 sql 语句组成一个执行单元, 这个执行单元要么全部执行, 要么全部不执行
	
案例 : 转账

张三丰		1000
郭襄			1000
UPDATE 表 SET 张三丰的余额 = 500 WHERE name = '张三丰';	
UPDATE 表 SET 张三丰的余额 = 1500 WHERE name = '张三丰';

事务的特性 :
	ACID
	原子性 : 一个事务不可再分割, 要么都执行, 要么都不执行
	一致性 : 一个事务执行会使数据从一个一致状态切换到另一个一致状态
	隔离性 : 一个事务的执行不收其他事务的干扰
	持久性 : 一个事务一旦提交, 就会永久的改变数据库的数据
	
	
事务的创建
	隐式的事务 : 事务没有明显的开启和结束的标记
	比如 insert update delete 语句
	
	delete from 表 where id = 1;
	
	显式事务 : 事务具有明显的开启和结束的标记
	前提 : 必须先设置自动提交功能为禁用
	
	set autocommit = 0;
	
	开启事务的语句;
	UPDATE 表 SET 张三丰的余额 = 500 WHERE name = '张三丰';	
	UPDATE 表 SET 张三丰的余额 = 1500 WHERE name = '张三丰';
	结束事务的语句;
	
	
	步骤一 : 开始事务
	set autocommit = 0;
	start TRANSACTION; 可选的
	
	步骤二 : 编写事务中的 sql 语句 (select insert update delete)
	语句 1
	语句 2
	语句 3
	...
	
	步骤三 : 结束事务
	commit; 提交事务
	rollback; 回滚事务
	
	
	SAVEPOINT 节点名; : 保存点
	
事务的隔离级别

															脏读				不可重复读				幻读
		read uncommitted :					√							√								√
		read commited :							x							√								√
		repeatable read : 					x							x								√
		serializable : 							x							x								x
		
		mysql 中默认第三个隔离级别 : repeatable read
		oracle 中默认第二个隔离级别 : read commited
		
		
		查看隔离级别 : 
			select @@tx_isolation;
		设置隔离级别 :
			set session | global transaction isolation level 隔离级别;
*/</span>


<span class="token comment"># 查看数据库引擎</span>
<span class="token keyword">SHOW</span> ENGINES<span class="token punctuation">;</span>

<span class="token comment"># 查看是否开启自动提交</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%autocommit%'</span><span class="token punctuation">;</span>


<span class="token comment"># 演示事务的使用步骤</span>

<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> account<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> account <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	balance <span class="token keyword">DOUBLE</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 
	account<span class="token punctuation">(</span>username<span class="token punctuation">,</span> balance<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> 
	<span class="token punctuation">(</span><span class="token string">'张无忌'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'赵敏'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> account<span class="token punctuation">;</span>

<span class="token comment"># 开启事务</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment"># 编写一组事务的语句 </span>
<span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance <span class="token operator">=</span> <span class="token number">1500</span> <span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">'张无忌'</span><span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> account <span class="token keyword">SET</span> balance <span class="token operator">=</span> <span class="token number">1500</span> <span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">'赵敏'</span><span class="token punctuation">;</span>

<span class="token comment"># 关闭事务;</span>

<span class="token comment"># 回滚</span>
<span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>
<span class="token comment"># 提交</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 演示 savepoint 的使用</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> account <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>

<span class="token keyword">SAVEPOINT</span> a<span class="token punctuation">;</span> <span class="token comment"># 设置保存点</span>

<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> account <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>

<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> a<span class="token punctuation">;</span> <span class="token comment"># 回滚到保存点</span>

<span class="token comment"># DELETE 和 TRUNCATE 的区别</span>

<span class="token comment">/*

DELETE 支持回滚
TRUNCATE 不支持回滚
*/</span>

<span class="token comment"># 演示 DELETE</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> account<span class="token punctuation">;</span>
<span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>

<span class="token comment"># 演示 TRUNCATE</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> account<span class="token punctuation">;</span>
<span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br></div></div><h4 id="练习-3"><a href="#练习-3" class="header-anchor">#</a> 练习</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1. 创建一个表，里面有 id 为主键，stuname 唯一键，seat 座位号，要求将 id 设置成自增</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tab_1 <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	stuname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>
	seat <span class="token keyword">INT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">DESC</span> tab_1<span class="token punctuation">;</span>

<span class="token comment"># 2. 要求用事务的方式插入 3 行数据</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tab_1
<span class="token keyword">VALUES</span>
	<span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'李四'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'王麻子'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	tab_1<span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>	


<span class="token comment"># 3. 要求用事务的方式删除数据，并回滚</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> tab_1<span class="token punctuation">;</span>
<span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tab_1<span class="token punctuation">;</span>


<span class="token comment"># 4. 创建表 Book 表, 字段如下 :</span>
<span class="token comment">/*
	bid 整型, 要求主键,
	bname 字符型 要求设置唯一键, 并非空,
	price 浮点型 要求有默认值 10,
	btypeId 类型编号, 要求引用 bookType 表的 id 字段
	
	已知 bookType 表, 字段如下
	id
	name
*/</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Book <span class="token punctuation">(</span>
	bid <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	bname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>
	price <span class="token keyword">DOUBLE</span> <span class="token keyword">DEFAULT</span> <span class="token number">10</span><span class="token punctuation">,</span>
	btypeId <span class="token keyword">INT</span><span class="token punctuation">,</span>
	
	<span class="token keyword">CONSTRAINT</span> fk_stuinfo_major <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>btypeId<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> bookType<span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> bookType <span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 5. 开启事务, 向表中插入一行数据, 并结束</span>
<span class="token keyword">SET</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 
	Book
<span class="token keyword">VALUES</span>
	<span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'白雪公主4'</span><span class="token punctuation">,</span> <span class="token number">93</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>	 
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Book<span class="token punctuation">;</span>

<span class="token comment"># 6. 创建视图, 实现查询价格大于 100 的书名和类型名</span>
<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> v1
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	b<span class="token punctuation">.</span>bname<span class="token punctuation">,</span>
	b<span class="token punctuation">.</span>btypeId
<span class="token keyword">FROM</span>
	Book b
<span class="token keyword">JOIN</span>
	bookType bt
<span class="token keyword">ON</span>
	b<span class="token punctuation">.</span>btypeId <span class="token operator">=</span> bt<span class="token punctuation">.</span>id
<span class="token keyword">WHERE</span>
	b<span class="token punctuation">.</span>price <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> v1<span class="token punctuation">;</span>	

<span class="token comment"># 7. 修改视图, 实现查询价格在 90 ~ 120 之间的书名和价格</span>
<span class="token keyword">ALTER</span> <span class="token keyword">VIEW</span> v1
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	bname<span class="token punctuation">,</span>
	price
<span class="token keyword">FROM</span>
	Book
<span class="token keyword">WHERE</span>
	price <span class="token operator">BETWEEN</span> <span class="token number">90</span> <span class="token operator">AND</span> <span class="token number">120</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> v1<span class="token punctuation">;</span>

<span class="token comment"># 7. 删除刚才建的视图</span>
<span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> v1<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br></div></div><h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <h3 id="视图"><a href="#视图" class="header-anchor">#</a> 视图</h3> <blockquote><p>含义</p></blockquote> <p>mysql 5.1 版本出现的新特性, 本身是一个虚拟表, 它的数据来自于表, 通过执行时动态生成</p> <p>==好处 :==</p> <ul><li>简化了 sql 语句</li> <li>提高了 sql 的重用性</li> <li>保护基表的数据, 提高了安全性</li></ul> <h4 id="使用视图"><a href="#使用视图" class="header-anchor">#</a> 使用视图</h4> <blockquote><p>创建视图</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">view</span> 视图名
<span class="token keyword">as</span>
查询语句<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>修改视图</p></blockquote> <ul><li><p>方式一 :</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">view</span> 视图名
<span class="token keyword">as</span>
查询语句<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>方式二 :</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">view</span> 视图名
<span class="token keyword">as</span>
查询语句<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <blockquote><p>删除视图</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">view</span> 视图名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>查看视图</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">desc</span> 视图名<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">view</span> 视图名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>使用视图</p></blockquote> <ul><li>插入 :
<code>insert</code></li> <li>修改 : 	
<code>update</code></li> <li>删除 : 	
<code>delete</code></li> <li>查看 : 	
<code>select</code></li></ul> <p><strong>注意 : 视图一般用于查询的, 而不是更新的, 所以具备以下特点的视图都不允许更新</strong></p> <ul><li>包含分组函数, group by, distinct, having, union</li> <li>join</li> <li>常量视图</li> <li>where 后的子查询用到了 from 中的表</li> <li>用到了不可更新的视图</li></ul> <h4 id="视图和表的对比"><a href="#视图和表的对比" class="header-anchor">#</a> 视图和表的对比</h4> <table><thead><tr><th style="text-align:center;">分类</th> <th style="text-align:center;">关键字</th> <th style="text-align:center;">占用物理空间大小</th> <th style="text-align:center;">使用</th></tr></thead> <tbody><tr><td style="text-align:center;">视图</td> <td style="text-align:center;">view</td> <td style="text-align:center;">占用很小, 只保存 sql 逻辑</td> <td style="text-align:center;">一般用于查询</td></tr> <tr><td style="text-align:center;">表</td> <td style="text-align:center;">table</td> <td style="text-align:center;">保存实际的数据, 占用较大</td> <td style="text-align:center;">增删改查</td></tr></tbody></table> <h4 id="代码-6"><a href="#代码-6" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 视图</span>

<span class="token comment">/*
含义 : 虚拟表, 和普通表一样使用

mysql 5.1 版本出现的新特性, 是通过动态表生成的数据

比如 : 关于舞蹈班和普通班的区别

特点 : 
	1. 临时性

*/</span>

<span class="token keyword">USE</span> students<span class="token punctuation">;</span>

<span class="token comment"># 案例 : 查询姓张的学生名和专业名</span>
<span class="token keyword">SELECT</span>
	stuName<span class="token punctuation">,</span> 
	majorName
<span class="token keyword">FROM</span>
	stuinfo s
<span class="token keyword">JOIN</span>
	major m
<span class="token keyword">ON</span>
	m<span class="token punctuation">.</span>id <span class="token operator">=</span> s<span class="token punctuation">.</span>majorId
<span class="token keyword">WHERE</span>
	s<span class="token punctuation">.</span>stuName <span class="token operator">LIKE</span> <span class="token string">'张%'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 封装成视图</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> v1
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	stuName<span class="token punctuation">,</span> 
	majorName
<span class="token keyword">FROM</span>
	stuinfo s
<span class="token keyword">JOIN</span>
	major m
<span class="token keyword">ON</span>
	m<span class="token punctuation">.</span>id <span class="token operator">=</span> s<span class="token punctuation">.</span>majorId
<span class="token keyword">WHERE</span>
	s<span class="token punctuation">.</span>stuName <span class="token operator">LIKE</span> <span class="token string">'张%'</span><span class="token punctuation">;</span>	
	
<span class="token keyword">SELECT</span>
	<span class="token operator">*</span>
<span class="token keyword">FROM</span>
	v1	
<span class="token keyword">WHERE</span>
	stuName <span class="token operator">LIKE</span> <span class="token string">'张%'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 一. 创建视图</span>

<span class="token comment">/*

语法 :
CREATE VIEW 视图名
AS
查询语句;

*/</span>	

<span class="token comment"># 案例一 : 查询邮箱中包含 'a' 字符的员工名 部门名和工种信息</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> v1
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>
	j<span class="token punctuation">.</span>job_title<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>email
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">JOIN</span>
	departments d
<span class="token keyword">ON</span>
	e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token keyword">JOIN</span>
	jobs j
<span class="token keyword">ON</span>
	j<span class="token punctuation">.</span>job_id <span class="token operator">=</span> e<span class="token punctuation">.</span>job_id
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>email <span class="token operator">LIKE</span> <span class="token string">'%a%'</span><span class="token punctuation">;</span>
	
	
<span class="token comment"># 案例二 : 查询各部门的平均工资级别</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> v2
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	avg_s<span class="token punctuation">.</span>avgSalary<span class="token punctuation">,</span>
	j<span class="token punctuation">.</span>grade_level<span class="token punctuation">,</span>
	avg_s<span class="token punctuation">.</span>department_id
<span class="token keyword">FROM</span>
	<span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		<span class="token function">AVG</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> avgSalary<span class="token punctuation">,</span>
		e<span class="token punctuation">.</span>department_id
	<span class="token keyword">FROM</span>
		employees e
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
		e<span class="token punctuation">.</span>department_id
		<span class="token punctuation">)</span> avg_s
<span class="token keyword">JOIN</span>
	job_grades j
<span class="token keyword">ON</span>
	avg_s<span class="token punctuation">.</span>avgSalary <span class="token operator">BETWEEN</span> j<span class="token punctuation">.</span>lowest_sal <span class="token operator">AND</span> j<span class="token punctuation">.</span>highest_sal<span class="token punctuation">;</span>


<span class="token comment"># 案例三 : 查询平均工资最低的部门信息</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> v3
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>
	minAvg<span class="token punctuation">.</span>avgSalary
<span class="token keyword">FROM</span>
	departments d
<span class="token keyword">JOIN</span>
	<span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		<span class="token function">AVG</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> avgSalary<span class="token punctuation">,</span>
		e<span class="token punctuation">.</span>department_id
	<span class="token keyword">FROM</span>
		employees e
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
		e<span class="token punctuation">.</span>department_id
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
		avgSalary
	<span class="token keyword">limit</span>
		<span class="token number">1</span>
	<span class="token punctuation">)</span> minAvg
<span class="token keyword">ON</span>
	d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> minAvg<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>	
		

<span class="token comment"># 案例四 : 查询平均工资最低的部门名和工资</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> v4
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span>
	minAvg<span class="token punctuation">.</span>avgSalary
<span class="token keyword">FROM</span>
	departments d
<span class="token keyword">JOIN</span>
	<span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>
		<span class="token function">AVG</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> avgSalary<span class="token punctuation">,</span>
		e<span class="token punctuation">.</span>department_id
	<span class="token keyword">FROM</span>
		employees e
	<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
		e<span class="token punctuation">.</span>department_id
	<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
		avgSalary
	<span class="token keyword">limit</span>
		<span class="token number">1</span>
	<span class="token punctuation">)</span> minAvg
<span class="token keyword">ON</span>
	d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> minAvg<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>	
	

<span class="token comment"># 二. 视图的修改</span>

<span class="token comment"># 方式一 :</span>

<span class="token comment">/*

CREATE OR REPLACE VIEW 视图名
AS
查询语句;

*/</span>	


<span class="token comment"># 方式二 :</span>
<span class="token comment">/*

ALTER VIEW 视图名
AS
查询语句;

*/</span>

<span class="token comment"># 三. 删除视图</span>

<span class="token comment">/*

语法 :
DROP VIEW 视图名 1, 视图名 2, ....;
*/</span>
<span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> v1<span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v3<span class="token punctuation">;</span>


<span class="token comment"># 四. 查看视图</span>

<span class="token keyword">DESC</span> v4<span class="token punctuation">;</span>

<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> v4<span class="token punctuation">;</span>

<span class="token comment"># 五. 视图的更新</span>

<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> myv1
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	Last_name<span class="token punctuation">,</span>
	email
<span class="token keyword">FROM</span>
	employees<span class="token punctuation">;</span>
	
<span class="token comment"># 1. 插入	</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> myv1
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'张飞'</span><span class="token punctuation">,</span> <span class="token string">'zf@qq.com'</span><span class="token punctuation">)</span>

<span class="token comment"># 2. 修改</span>
<span class="token keyword">UPDATE</span>
	myv1
<span class="token keyword">SET</span>
	last_name <span class="token operator">=</span> <span class="token string">'张无忌'</span>
<span class="token keyword">WHERE</span>
	last_name <span class="token operator">=</span> <span class="token string">'张飞'</span><span class="token punctuation">;</span>
	
<span class="token comment"># 3. 删除</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> myv1
<span class="token keyword">WHERE</span> last_name <span class="token operator">=</span> <span class="token string">'张无忌'</span>	

<span class="token comment"># 具备以下特点的视图是不允许更新的</span>

<span class="token comment">/*
1. 包含以下关键字的 sql 语句 : 分组函数, DISTINCT, GROUP BY, HAVING, UNION, UNION ALL

2. 常量视图

3. SELECT 中包含子查询的

4. JOIN

5. FROM 一个不能更新的视图

6. WHERE 子句的子查询引用了 FROM 子句中的表

*/</span>


<span class="token comment"># 1. 包含以下关键字的sql语句：分组函数、distinct、group  by、having、union或者union all</span>

<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> myv1
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> m<span class="token punctuation">,</span>department_id
<span class="token keyword">FROM</span> employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> myv1<span class="token punctuation">;</span>

<span class="token comment">#更新</span>
<span class="token keyword">UPDATE</span> myv1 <span class="token keyword">SET</span> m<span class="token operator">=</span><span class="token number">9000</span> <span class="token keyword">WHERE</span> department_id<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment"># 2. 常量视图</span>
<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> myv2
<span class="token keyword">AS</span>

<span class="token keyword">SELECT</span> <span class="token string">'john'</span> NAME<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> myv2<span class="token punctuation">;</span>

<span class="token comment">#更新</span>
<span class="token keyword">UPDATE</span> myv2 <span class="token keyword">SET</span> NAME<span class="token operator">=</span><span class="token string">'lucy'</span><span class="token punctuation">;</span>





<span class="token comment"># 3. Select中包含子查询</span>

<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> myv3
<span class="token keyword">AS</span>

<span class="token keyword">SELECT</span> department_id<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> employees<span class="token punctuation">)</span> 最高工资
<span class="token keyword">FROM</span> departments<span class="token punctuation">;</span>

<span class="token comment">#更新</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> myv3<span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> myv3 <span class="token keyword">SET</span> 最高工资<span class="token operator">=</span><span class="token number">100000</span><span class="token punctuation">;</span>


<span class="token comment"># 4. join</span>
<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> myv4
<span class="token keyword">AS</span>

<span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>department_name
<span class="token keyword">FROM</span> employees e
<span class="token keyword">JOIN</span> departments d
<span class="token keyword">ON</span> e<span class="token punctuation">.</span>department_id  <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>

<span class="token comment">#更新</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> myv4<span class="token punctuation">;</span>
<span class="token comment"># 这个可以</span>
<span class="token keyword">UPDATE</span> myv4 <span class="token keyword">SET</span> last_name  <span class="token operator">=</span> <span class="token string">'张飞'</span> <span class="token keyword">WHERE</span> last_name<span class="token operator">=</span><span class="token string">'Whalen'</span><span class="token punctuation">;</span>
<span class="token comment"># 这个不行</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> myv4 <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'陈真'</span><span class="token punctuation">,</span><span class="token string">'xxxx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token comment"># 5. from一个不能更新的视图</span>
<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> myv5
<span class="token keyword">AS</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> myv3<span class="token punctuation">;</span>

<span class="token comment">#更新</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> myv5<span class="token punctuation">;</span>

<span class="token keyword">UPDATE</span> myv5 <span class="token keyword">SET</span> 最高工资<span class="token operator">=</span><span class="token number">10000</span> <span class="token keyword">WHERE</span> department_id<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">;</span>



<span class="token comment"># 6. where子句的子查询引用了from子句中的表</span>

<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> myv6
<span class="token keyword">AS</span>

<span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span>email<span class="token punctuation">,</span>salary
<span class="token keyword">FROM</span> employees
<span class="token keyword">WHERE</span> employee_id <span class="token operator">IN</span><span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span>  manager_id
	<span class="token keyword">FROM</span> employees
	<span class="token keyword">WHERE</span> manager_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#更新</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> myv6<span class="token punctuation">;</span>
<span class="token keyword">UPDATE</span> myv6 <span class="token keyword">SET</span> salary<span class="token operator">=</span><span class="token number">10000</span> <span class="token keyword">WHERE</span> last_name <span class="token operator">=</span> <span class="token string">'k_ing'</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br><span class="line-number">307</span><br><span class="line-number">308</span><br><span class="line-number">309</span><br><span class="line-number">310</span><br><span class="line-number">311</span><br><span class="line-number">312</span><br><span class="line-number">313</span><br><span class="line-number">314</span><br><span class="line-number">315</span><br><span class="line-number">316</span><br><span class="line-number">317</span><br><span class="line-number">318</span><br><span class="line-number">319</span><br><span class="line-number">320</span><br><span class="line-number">321</span><br><span class="line-number">322</span><br><span class="line-number">323</span><br><span class="line-number">324</span><br><span class="line-number">325</span><br><span class="line-number">326</span><br><span class="line-number">327</span><br><span class="line-number">328</span><br><span class="line-number">329</span><br><span class="line-number">330</span><br><span class="line-number">331</span><br><span class="line-number">332</span><br></div></div><h4 id="练习-4"><a href="#练习-4" class="header-anchor">#</a> 练习</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1、创建视图 emp_v1,要求查询电话号码以‘011’开头的员工姓名和工资、邮箱</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> emp_v1
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>phone_number
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>phone_number <span class="token operator">LIKE</span> <span class="token string">'011%'</span><span class="token punctuation">;</span>

<span class="token comment"># 2、要求将视图 emp_v1 修改为查询电话号码以‘011’开头的并且邮箱中包含 e 字符的员工姓名和邮箱、电话号码</span>
<span class="token keyword">ALTER</span> <span class="token keyword">VIEW</span> emp_v1
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
	e<span class="token punctuation">.</span>phone_number
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">WHERE</span>
	e<span class="token punctuation">.</span>phone_number <span class="token operator">LIKE</span> <span class="token string">'011%'</span>
	<span class="token operator">AND</span> e<span class="token punctuation">.</span>email <span class="token operator">LIKE</span> <span class="token string">'%e%'</span><span class="token punctuation">;</span>

 
<span class="token comment"># 3、向 emp_v1 插入一条记录，是否可以？ 可以</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> emp_v1
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'Javk'</span><span class="token punctuation">,</span> <span class="token string">'31134rt@gamil.com'</span><span class="token punctuation">,</span> <span class="token string">'011.43.1344.429268'</span><span class="token punctuation">)</span>


<span class="token comment"># 4、修改刚才记录中的电话号码为‘0119’</span>



<span class="token comment"># 5、删除刚才记录</span>


<span class="token comment"># 6、创建视图 emp_v2，要求查询部门的最高工资高于 12000 的部门信息</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> emp_v2
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>
	e<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span>
	<span class="token function">MAX</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>salary<span class="token punctuation">)</span>	max
<span class="token keyword">FROM</span>
	employees e
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
	e<span class="token punctuation">.</span>department_id
<span class="token keyword">HAVING</span>
	max <span class="token operator">&gt;</span> <span class="token number">12000</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span>
	d<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
	departments d
<span class="token keyword">JOIN</span>
	emp_v2 e
<span class="token keyword">ON</span>
	d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id<span class="token punctuation">;</span>

<span class="token comment"># 7、向 emp_v2 中插入一条记录，是否可以？</span>


<span class="token comment"># 8、删除刚才的 emp_v2 和 emp_v1</span>
<span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> emp_v2<span class="token punctuation">,</span> emp_v1<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><h3 id="变量"><a href="#变量" class="header-anchor">#</a> 变量</h3> <h4 id="系统变量"><a href="#系统变量" class="header-anchor">#</a> 系统变量</h4> <blockquote><p>说明</p></blockquote> <p>变量由系统提供的, 不用自定义</p> <blockquote><p>语法</p></blockquote> <ul><li>查看系统变量<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token punctuation">[</span><span class="token keyword">global</span><span class="token operator">|</span><span class="token keyword">session</span> <span class="token punctuation">]</span>variables <span class="token operator">like</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment"># 如果没有显式声明global还是session，则默认是session</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>查看指定的系统变量的值<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> @@<span class="token punctuation">[</span><span class="token keyword">global</span><span class="token operator">|</span><span class="token keyword">session</span> <span class="token punctuation">]</span><span class="token punctuation">.</span>变量名<span class="token punctuation">;</span> <span class="token comment"># 如果没有显式声明global还是session，则默认是session</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>为系统变量赋值
<ul><li><p>方式一 :</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> <span class="token punctuation">[</span><span class="token keyword">global</span><span class="token operator">|</span><span class="token keyword">session</span> <span class="token punctuation">]</span> 变量名<span class="token operator">=</span>值<span class="token punctuation">;</span> <span class="token comment"># 如果没有显式声明global还是session，则默认是session</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>方式二 :</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> @<span class="token variable">@global.</span>变量名<span class="token operator">=</span>值<span class="token punctuation">;</span>
<span class="token keyword">set</span> @@变量名<span class="token operator">=</span>值；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul></li></ul> <blockquote><p>全局变量</p></blockquote> <p>服务器层面上的, 必须拥有 supper 权限才能为系统变量赋值, 作用域为整个服务器, 也就是针对所有连接 (会话) 有效</p> <blockquote><p>会话变量</p></blockquote> <p>服务器为每一个连接的客户端都提供了系统变了, 作用域为当前的连接 (会话)</p> <h4 id="自定义变量"><a href="#自定义变量" class="header-anchor">#</a> 自定义变量</h4> <h5 id="用户变量"><a href="#用户变量" class="header-anchor">#</a> 用户变量</h5> <blockquote><p>说明</p></blockquote> <ul><li>用户变量
<ul><li>作用域 : 针对于当前连接 (会话) 有效</li> <li>位置 : begin end 里面, 也可以放在外面</li></ul></li></ul> <blockquote><p>使用</p></blockquote> <ul><li>声明并赋值 :<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> @变量名 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
<span class="token keyword">set</span> @变量名 :<span class="token operator">=</span> 值<span class="token punctuation">;</span>
<span class="token keyword">select</span> @变量名 :<span class="token operator">=</span> 值<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li>更新值 :
<ul><li>方式一 : 同声明并赋值<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> @变量名 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
<span class="token keyword">set</span> @变量名 :<span class="token operator">=</span> 值<span class="token punctuation">;</span>
<span class="token keyword">select</span> @变量名 :<span class="token operator">=</span> 值<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li>方式二 :<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> xx <span class="token keyword">into</span> @变量名 <span class="token keyword">from</span> 表<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li>使用<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> @变量名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h5 id="局部变量"><a href="#局部变量" class="header-anchor">#</a> 局部变量</h5> <blockquote><p>说明</p></blockquote> <ul><li>局部变量
<ul><li>作用域 : 仅仅在定义它的 begin end 中有效</li> <li>位置 : 只能放在 begin end 中, 而且只能放在第一句</li></ul></li></ul> <blockquote><p>使用</p></blockquote> <ul><li>声明<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">declare</span> 变量名 类型 <span class="token punctuation">[</span><span class="token keyword">default</span> 值<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>赋值或更新
<ul><li>方式一 :<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> @变量名 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
<span class="token keyword">set</span> @变量名 :<span class="token operator">=</span> 值<span class="token punctuation">;</span>
<span class="token keyword">select</span> @变量名 :<span class="token operator">=</span> 值<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li>方式二 :<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> xx <span class="token keyword">into</span> 变量名 <span class="token keyword">from</span> 表<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li> <li>使用<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 变量名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h4 id="代码-7"><a href="#代码-7" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 变量</span>

<span class="token comment">/*
 系统变量 :
    全局变量
    会话变量

 自定义变量
    用户变量
    局部变量

 */</span>

<span class="token comment"># 一. 系统变量</span>
<span class="token comment">/*
 说明 : 变量是由系统提供的, 不是用户定义, 属于服务器层面

 注意 :
    如果是全局级别, 则需要加 global
    如果是会话级别, 则需要加 session
    如果不写, 则默认 session

 使用的语法 :
    1. 查看所有的系统变量
    show global | [session] variables;

    2. 查看满足条件的部分系统变量
    show global | [session] variables like '%char%';

    3. 查看某个指定的某个系统变量的值
    select @@global | [session].系统变量名;

    4. 为某个具体的系统变量赋值
    方式一 :
    set global | [session] .系统变量名 = 值;
    方式二 :
    set @@global | [session] .系统变量名 = 值;

 */</span>

<span class="token comment"># 1. 全局变量</span>

<span class="token comment">/*
 作用域 : 服务器每次启动会将所有的全局变量赋初始值, 针对于所有的会话 (连接) 有效, 但不能跨重启
 */</span>

<span class="token comment"># 查看所有的全局变量</span>
<span class="token keyword">show</span> <span class="token keyword">global</span> variables<span class="token punctuation">;</span>

<span class="token comment"># 查看部分的全局变量</span>
<span class="token keyword">show</span> <span class="token keyword">global</span> variables <span class="token operator">like</span> <span class="token string">'%char%'</span><span class="token punctuation">;</span>

<span class="token comment"># 查看指定的全局变量的值</span>
<span class="token keyword">select</span> @<span class="token variable">@global.autocommit</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>

<span class="token comment"># 为某个指定的全局变量赋值</span>
<span class="token keyword">set</span> @<span class="token variable">@global.autocommit</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>


<span class="token comment"># 2. 会话变量</span>
<span class="token comment">/*
 作用域 : 仅仅针对于当前会话 (连接) 有效
 */</span>

<span class="token comment"># 查看所有的会话变量</span>
<span class="token keyword">show</span> <span class="token keyword">session</span> variables<span class="token punctuation">;</span>
<span class="token keyword">show</span> variables<span class="token punctuation">;</span>

<span class="token comment"># 查看部分的会话变量</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%char%'</span><span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">session</span> variables <span class="token operator">like</span> <span class="token string">'%char%'</span><span class="token punctuation">;</span>

<span class="token comment"># 查看指定的某个会话变量</span>
<span class="token keyword">select</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> @<span class="token variable">@session.tx_isolation</span><span class="token punctuation">;</span>

<span class="token comment"># 为某个会话变量赋值</span>
<span class="token comment"># 方式一</span>
<span class="token keyword">set</span> @<span class="token variable">@session.tx_isolation</span> <span class="token operator">=</span> <span class="token string">'read-uncommitted'</span><span class="token punctuation">;</span>
<span class="token comment"># 方式二</span>
<span class="token keyword">set</span> <span class="token keyword">session</span> tx_isolation <span class="token operator">=</span> <span class="token string">'read-committed'</span><span class="token punctuation">;</span>


<span class="token comment"># 二. 自定义变量</span>

<span class="token comment">/*
 说明 : 变量是用户自定义的, 不是由系统的

 使用步骤 :
    声明
    赋值
    使用 (查看 比较 运算等)

 */</span>

<span class="token comment"># 1. 用户变量</span>

<span class="token comment">/*
 作用域 : 针对于当前会话 (连接) 有效, 同于会话变量的作用域
 应用在任何地方, 也就是 begin end 里面或者 begin end 外面
 */</span>

<span class="token comment"># 1. 声明并初始化</span>

<span class="token comment">/*
    set @用户变量名 = 值;
    set @用户变量名 := 值;
    select @用户变量名 := 值;
 */</span>


<span class="token comment"># 2. 赋值 (更新用户变量的值)</span>

<span class="token comment">/*
 方式一 : 通过 set 或者 select
        set @用户变量名 = 值;
        set @用户变量名 := 值;
        select @用户变量名 := 值;

 方式二 : 通过 select into
        select 字段 into @用户变量名
        form 表;
 */</span>


<span class="token comment"># 3. 使用 (查看用户变量的值)</span>
<span class="token comment">/*
 select @用户变量名;
 */</span>


<span class="token comment"># 案例 :</span>
<span class="token comment"># 声明并初始化</span>
<span class="token keyword">set</span> <span class="token variable">@name</span> <span class="token operator">=</span> <span class="token string">'join'</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token variable">@name</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token variable">@count</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment"># 赋值</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">into</span> <span class="token variable">@count</span>
<span class="token keyword">from</span> employees<span class="token punctuation">;</span>

<span class="token comment"># 查看</span>
<span class="token keyword">select</span> <span class="token variable">@count</span><span class="token punctuation">;</span>


<span class="token comment"># 2. 局部变量</span>
<span class="token comment">/*
 作用域 : 仅仅在定义它的 begin end 中

 步骤 :
    声明
        declare 变量名 类型;
        declare 变量名 类型 default 值;
    赋值 :
        方式一 : 通过 set 或者 select
                set 局部变量名 = 值;
                set 局部变量名 := 值;
                select @局部变量名 := 值;

        方式二 : 通过 select into
                select 字段 into 局部变量名
                form 表;

    使用 :
        select 局部变量名

    应用在 begin end 中的第一句话
 */</span>

<span class="token comment"># 对比用户变量和局部变量</span>
<span class="token comment">/*
                    作用域                 定义和使用的位置                            语法
 用户变量           当前会话                会话中的任何地方                        必须加 @ 符号, 不用限定类型
 局部变量           begin end 中           只能在 begin end 中, 且为第一句话        一般不用加 @ 符号, 需要限定类型

 */</span>

<span class="token comment"># 案例 : 声明两个变量并赋处置, 求和, 并打印</span>
<span class="token keyword">set</span> <span class="token variable">@m</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token variable">@n</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token variable">@sum</span> <span class="token operator">=</span> <span class="token variable">@m</span> <span class="token operator">+</span> <span class="token variable">@n</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@sum</span><span class="token punctuation">;</span>

<span class="token comment"># 局部变量</span>
<span class="token keyword">declare</span> m <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> n <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> sum <span class="token keyword">int</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> sum <span class="token operator">=</span> m <span class="token operator">+</span> n<span class="token punctuation">;</span>
<span class="token keyword">select</span> sum<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br></div></div><h3 id="存储过程和函数"><a href="#存储过程和函数" class="header-anchor">#</a> 存储过程和函数</h3> <blockquote><p>说明</p></blockquote> <p>都类似于 Java 中的方法, 将一组完成特定功能的逻辑语句包装起来, 对外暴露名字</p> <blockquote><p>好处</p></blockquote> <ul><li>提高重用性</li> <li>sql 语句简单</li> <li>减少了和数据库服务器之间的连接次数, 提高了效率</li></ul> <h4 id="存储过程"><a href="#存储过程" class="header-anchor">#</a> 存储过程</h4> <h5 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h5> <blockquote><p>创建</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">procedure</span> 存储过程名<span class="token punctuation">(</span>参数模式 参数名 参数类型<span class="token punctuation">)</span>
<span class="token keyword">begin</span>
	存储过程体<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>注意 :</strong></p> <ul><li>参数模式 : in, out, inout, 其中 in 可以省略</li> <li>存储过程体的每一条 sql 语句都需要用分好结尾</li></ul> <blockquote><p>调用</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">call</span> 存储过程名<span class="token punctuation">(</span>是参类型<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>举例 :</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 调用 in 模式的参数</span>
<span class="token keyword">call</span> sp1（<span class="token string">'值'</span>）<span class="token punctuation">;</span>

<span class="token comment"># 调用 out 模式的参数</span>
<span class="token keyword">set</span> <span class="token variable">@name</span><span class="token punctuation">;</span> 
<span class="token keyword">call</span> sp1<span class="token punctuation">(</span><span class="token variable">@name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@name</span><span class="token punctuation">;</span>

<span class="token comment"># 调用 inout 模式的参数</span>
<span class="token keyword">set</span> <span class="token variable">@name</span><span class="token operator">=</span>值<span class="token punctuation">;</span>
<span class="token keyword">call</span> sp1<span class="token punctuation">(</span><span class="token variable">@name</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">select</span> <span class="token variable">@name</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>查看</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">procedure</span> 存储过程名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>删除</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">procedure</span> 存储过程名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="代码-8"><a href="#代码-8" class="header-anchor">#</a> 代码</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 存储过程和函数</span>

<span class="token comment">/*
 存储过程和函数 : 类似于 Java 中的方法

 好处 :
    1. 提高代码的重用性
    2. 简化操作


 */</span>

<span class="token comment"># 存储操作</span>

<span class="token comment">/*
 含义 : 一组预先编译好的 sql 语句的集合, 理解成批处理语句

 好处 :
    1. 提高代码的重用性
    2. 简化操作
    3. 减少了编译次数, 并且减少了和数据库服务器的连接器, 提高了效率

 */</span>

<span class="token comment"># 一. 创建语法</span>

<span class="token comment">/*
 create procedure 存储过程名 (参数列表)
 begin
    存储过程体 (一组合法的 sql语句);
 end

 注意 :
    1. 参数列表包含三部分
        参数模式    参数名     参数类型
    举例  IN      stuName    varchar(20)
    2. 参数模式
        in : 改参数可以作为输入. 也就是说该参数需要调用方传入值
        out : 该参数可以作为输出, 也就是该参数可以作为返回值
        inout : 该参数既可以作为输入, 也可以作为输出, 也就是该参数既需要传入值, 也可以返回值

    3. 如果存储过程体仅仅只有一句话, begin and 可以省略
       存储过程体重的每条 sql 语句的结尾要求必须加分好
       存储过程的结尾可以使用 delimiter 重新设置
        语法 :
        delimiter $
 */</span>

<span class="token comment"># 二. 调用语法</span>
<span class="token comment">/*
 call 存储过程名(实参列表);
 */</span>

<span class="token comment"># 1. 空参列表</span>
<span class="token comment"># 案例 : 插入到 admin 表中五条记录</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> admin<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">procedure</span> mypl<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>

    <span class="token keyword">insert</span> <span class="token keyword">into</span> admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
    <span class="token keyword">values</span>
           <span class="token punctuation">(</span><span class="token string">'john'</span><span class="token punctuation">,</span> <span class="token number">001</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           <span class="token punctuation">(</span><span class="token string">'rose'</span><span class="token punctuation">,</span> <span class="token number">002</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           <span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">,</span> <span class="token number">003</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           <span class="token punctuation">(</span><span class="token string">'jack'</span><span class="token punctuation">,</span> <span class="token number">004</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           <span class="token punctuation">(</span><span class="token string">'jerry'</span><span class="token punctuation">,</span> <span class="token number">005</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token comment"># 调用</span>
<span class="token keyword">call</span> mypl<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 2. 创建带 in 模式参数的存储过程</span>
<span class="token comment"># 案例一 : 创建存储过程实现, 根据女神名, 查询对应男神的信息</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> myp2 <span class="token punctuation">(</span><span class="token operator">in</span> beautyName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>

    <span class="token keyword">select</span>  <span class="token operator">*</span>
    <span class="token keyword">from</span>    boys bo
    <span class="token keyword">right</span> <span class="token keyword">join</span> beauty b <span class="token keyword">on</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id
    <span class="token keyword">where</span> b<span class="token punctuation">.</span>name <span class="token operator">=</span> beautyName<span class="token punctuation">;</span>

<span class="token keyword">end</span><span class="token punctuation">;</span>


<span class="token keyword">call</span> myp2 <span class="token punctuation">(</span><span class="token string">'周芷若'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 案例二 : 创建存储过程实现, 用户是否登录成功</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> myp3 <span class="token punctuation">(</span><span class="token operator">in</span> username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">in</span> password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>

    <span class="token keyword">declare</span> result <span class="token keyword">INT</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment"># 声明并初始化</span>

    <span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">into</span> result <span class="token comment"># 赋值</span>
    <span class="token keyword">from</span> admin a
    <span class="token keyword">where</span> username <span class="token operator">=</span> a<span class="token punctuation">.</span>username
    <span class="token operator">AND</span> password <span class="token operator">=</span> a<span class="token punctuation">.</span>password<span class="token punctuation">;</span>

    <span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'登录成功'</span><span class="token punctuation">,</span> <span class="token string">'登录失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 使用</span>

<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> myp3<span class="token punctuation">(</span><span class="token string">'john'</span><span class="token punctuation">,</span> <span class="token string">'8888'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 3. 创建带 out 模式的存储过程</span>
<span class="token comment"># 案例一 : 根据女神名返回对应的男神名</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> myp4 <span class="token punctuation">(</span><span class="token operator">in</span> beautyName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">out</span> boyName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>

    <span class="token keyword">select</span> bo<span class="token punctuation">.</span>boyName <span class="token keyword">into</span> boyName
    <span class="token keyword">from</span> boys bo
    <span class="token keyword">join</span> beauty b <span class="token keyword">on</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id
    <span class="token keyword">where</span> b<span class="token punctuation">.</span>name <span class="token operator">=</span> beautyName<span class="token punctuation">;</span>

<span class="token keyword">end</span><span class="token punctuation">;</span>


<span class="token keyword">call</span> myp4 <span class="token punctuation">(</span><span class="token string">'小昭'</span><span class="token punctuation">,</span> <span class="token variable">@boyName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@boyName</span><span class="token punctuation">;</span>

<span class="token comment"># 案例二 : 根据女神名, 返回对应的男神名和男神魅力值</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> myp5 <span class="token punctuation">(</span><span class="token operator">in</span> beautyName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">out</span> boyName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">out</span> userCp <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span>
           bo<span class="token punctuation">.</span>boyName<span class="token punctuation">,</span> bo<span class="token punctuation">.</span>userCp <span class="token keyword">into</span> boyName<span class="token punctuation">,</span> userCp
    <span class="token keyword">from</span> boys bo
    <span class="token keyword">join</span> beauty b <span class="token keyword">on</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id
    <span class="token keyword">where</span> b<span class="token punctuation">.</span>name <span class="token operator">=</span> beautyName<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> myp5<span class="token punctuation">(</span><span class="token string">'小昭'</span><span class="token punctuation">,</span> <span class="token variable">@bName</span><span class="token punctuation">,</span> <span class="token variable">@bUserCp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@bName</span><span class="token punctuation">,</span> <span class="token variable">@bUserCp</span><span class="token punctuation">;</span>

<span class="token comment"># 4. 创建带 inout 模式参数的存储过程</span>
<span class="token comment"># 案例一 : 传入 a, b 两个值, 最终 a, b 都翻倍并返回</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> myp7<span class="token punctuation">(</span><span class="token keyword">inout</span> a <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token keyword">inout</span>  b <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">set</span> a <span class="token operator">=</span> a <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">set</span> b <span class="token operator">=</span> b <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token comment"># 调用</span>
<span class="token keyword">set</span> <span class="token variable">@m</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> <span class="token variable">@n</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> myp7<span class="token punctuation">(</span><span class="token variable">@m</span><span class="token punctuation">,</span> <span class="token variable">@n</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@m</span><span class="token punctuation">,</span> <span class="token variable">@n</span><span class="token punctuation">;</span>

<span class="token comment"># 二. 删除存储过程</span>

<span class="token comment">/*
 语法 :
    drop procedure 存储过程名称;
 */</span>
<span class="token keyword">drop</span> <span class="token keyword">procedure</span> mypl<span class="token punctuation">;</span>

<span class="token comment"># 三. 查看存储过程的信息</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">procedure</span> myp3<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br></div></div><h5 id="练习-5"><a href="#练习-5" class="header-anchor">#</a> 练习</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 1、创建存储过程或函数实现传入用户名和密码，插入到 admin 表中</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> m1 <span class="token punctuation">(</span><span class="token operator">in</span> userName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">in</span> pwd <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">insert</span> <span class="token keyword">into</span>
        admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
    <span class="token keyword">values</span>
        <span class="token punctuation">(</span>userName<span class="token punctuation">,</span> pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> m1<span class="token punctuation">(</span><span class="token string">'yixihan'</span><span class="token punctuation">,</span> <span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> admin<span class="token punctuation">;</span>

<span class="token comment"># 2、创建存储过程或函数实现传入女神编号，返回女神名称和女神电话</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> m2 <span class="token punctuation">(</span><span class="token operator">in</span> beautyId <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token keyword">out</span> beautyName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">out</span> beautyPhone <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> b<span class="token punctuation">.</span>name<span class="token punctuation">,</span> b<span class="token punctuation">.</span>phone <span class="token keyword">into</span> beautyName<span class="token punctuation">,</span> beautyPhone
    <span class="token keyword">from</span> beauty b
    <span class="token keyword">where</span> b<span class="token punctuation">.</span>id <span class="token operator">=</span> beautyId<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> m2 <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token variable">@beautyName</span><span class="token punctuation">,</span> <span class="token variable">@beautyPhone</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@beautyName</span><span class="token punctuation">,</span> <span class="token variable">@beautyPhone</span><span class="token punctuation">;</span>

<span class="token comment"># 3、创建存储存储过程或函数实现歘人两个女神生日，返回大小</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> m3 <span class="token punctuation">(</span><span class="token operator">in</span> beautyBirth1 <span class="token keyword">datetime</span><span class="token punctuation">,</span> <span class="token operator">in</span> beautyBirth2 <span class="token keyword">datetime</span><span class="token punctuation">,</span> <span class="token keyword">out</span> diff <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> datediff<span class="token punctuation">(</span>beautyBirth1<span class="token punctuation">,</span> beautyBirth2<span class="token punctuation">)</span> <span class="token keyword">into</span> diff<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> m3 <span class="token punctuation">(</span><span class="token string">'1998-1-1'</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">@res</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token variable">@res</span><span class="token punctuation">;</span>

<span class="token comment"># 4、创建存储过程或函数实现传入一个日期，格式化成 xx 年 xx 月 xx 日并返回</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> m4 <span class="token punctuation">(</span><span class="token operator">in</span> <span class="token keyword">date</span> <span class="token keyword">datetime</span><span class="token punctuation">,</span> <span class="token keyword">out</span> formatDate <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> date_format<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">,</span> <span class="token string">'%Y 年 %m 月 %d 日'</span><span class="token punctuation">)</span> <span class="token keyword">into</span> formatDate<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> m4<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">@date</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@date</span><span class="token punctuation">;</span>

<span class="token comment"># 5、创建存储过程或函数实现传入女神名称，返回：女神 and 男神 格式的字符串  如 传入 ：小昭  返回： 小昭 and 张无忌</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> m5 <span class="token punctuation">(</span><span class="token operator">in</span> beautyName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">out</span> result <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> concat<span class="token punctuation">(</span>b<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">' and '</span><span class="token punctuation">,</span> bo<span class="token punctuation">.</span>boyName<span class="token punctuation">)</span> <span class="token keyword">into</span> result
    <span class="token keyword">from</span> beauty b
    <span class="token keyword">join</span> boys bo <span class="token keyword">on</span> b<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id
    <span class="token keyword">where</span> b<span class="token punctuation">.</span>name <span class="token operator">=</span> beautyName<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> m5 <span class="token punctuation">(</span><span class="token string">'小昭'</span><span class="token punctuation">,</span> <span class="token variable">@result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@result</span><span class="token punctuation">;</span>

<span class="token comment"># 6、创建存储过程或函数，根据传入的条目数和起始索引，查询 beauty 表的记录</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> m6 <span class="token punctuation">(</span><span class="token operator">in</span> <span class="token keyword">offset</span> <span class="token keyword">INT</span><span class="token punctuation">,</span> <span class="token operator">in</span> size <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">select</span> <span class="token operator">*</span>
    <span class="token keyword">from</span> beauty
    <span class="token keyword">limit</span> <span class="token keyword">offset</span><span class="token punctuation">,</span> size<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> m6<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h4 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h4> <h5 id="语法-2"><a href="#语法-2" class="header-anchor">#</a> 语法</h5> <blockquote><p>创建</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">function</span> 函数名 <span class="token punctuation">(</span>参数名 参数类型<span class="token punctuation">)</span> <span class="token keyword">returns</span> 返回类型
<span class="token keyword">begin</span>
	函数体<span class="token punctuation">;</span>
	<span class="token keyword">return</span> 返回值<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>注意 : 函数体中肯定需要有 return 语句</strong></p> <blockquote><p>调用</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 函数名 <span class="token punctuation">(</span>实参列表<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>查看</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">function</span> 函数名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>删除</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">function</span> 函数名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="代码-9"><a href="#代码-9" class="header-anchor">#</a> 代码</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 函数</span>

<span class="token comment">/*
 含义 : 一组预先编译好的 sql 语句的集合, 理解成批处理语句

 好处 :
    1. 提高代码的重用性
    2. 简化操作
    3. 减少了编译次数, 并且减少了和数据库服务器的连接器, 提高了效率

 区别 :
    存储过程 : 可以有零个返回, 也可以有多个返回, 适合做批量的插入 批量更新
    函数 : 有且仅有一个返回, 适合做处理数据后返回一个结果


 */</span>

<span class="token comment"># 一. 创建语法</span>
<span class="token comment">/*
 create function 函数名 (参数列表) returns 返回类型
 begin
    函数体;
    return 值;
 end;

注意 :
    1. 参数列表 包含两部分
        参数名 参数类型

    2. 函数体 :
        肯定会有 return 语句, 如果没有不会报错
        如果 return 语句没有放在函数体的最后也不报错, 但不建议

    3. 当函数体重仅有一句话, 则可以省略 begin end

    4. 使用 delimiter 语句设置结束标记 (没必要)

    5. 使用 select 调用函数

 */</span>

<span class="token comment"># 二. 调用方法</span>
<span class="token comment">/*
 select  函数名 (参数列表)

 */</span>

<span class="token comment"># 案例演示 : ----------------------------------------------------------------</span>

<span class="token comment"># 1. 无参有返回的</span>
<span class="token comment"># 案例 : 返回公司的员工个数</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> myf1 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token keyword">INT</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> res <span class="token keyword">INT</span><span class="token punctuation">;</span>
    <span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">into</span> res
    <span class="token keyword">from</span> employees<span class="token punctuation">;</span>

    <span class="token keyword">return</span> res<span class="token punctuation">;</span>

<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> myf1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 2. 有参有返回的</span>
<span class="token comment"># 案例一 : 根据员工名返回他的工资</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> myf2 <span class="token punctuation">(</span>empName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token keyword">DOUBLE</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> res <span class="token keyword">DOUBLE</span><span class="token punctuation">;</span>
    <span class="token keyword">select</span> salary <span class="token keyword">into</span> res
    <span class="token keyword">from</span> employees
    <span class="token keyword">where</span> last_name <span class="token operator">=</span> empName<span class="token punctuation">;</span>

    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> myf2<span class="token punctuation">(</span><span class="token string">'Popp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 案例二 : 根据部门名, 返回该部门的平均工资</span>
<span class="token keyword">drop</span> <span class="token keyword">function</span> myf3<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">function</span> myf3 <span class="token punctuation">(</span>depName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token keyword">DOUBLE</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> res <span class="token keyword">DOUBLE</span><span class="token punctuation">;</span>

    <span class="token keyword">select</span> <span class="token function">AVG</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>salary<span class="token punctuation">)</span> <span class="token keyword">into</span> res
    <span class="token keyword">from</span> employees e
    <span class="token keyword">join</span> departments d <span class="token keyword">on</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id
    <span class="token keyword">where</span> d<span class="token punctuation">.</span>department_name <span class="token operator">=</span> depName
    <span class="token keyword">group</span> <span class="token keyword">by</span> d<span class="token punctuation">.</span>department_id<span class="token punctuation">,</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">;</span>

    <span class="token keyword">return</span> res<span class="token punctuation">;</span>

<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> myf3 <span class="token punctuation">(</span><span class="token string">'Fin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 三. 查看函数</span>

<span class="token comment">/*
 show create function 函数名;
 */</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">function</span> myf3<span class="token punctuation">;</span>

<span class="token comment"># 四. 删除函数</span>

<span class="token comment">/*
 drop function 函数名;
 */</span>
<span class="token keyword">drop</span> <span class="token keyword">function</span> myf3<span class="token punctuation">;</span>

<span class="token comment"># 案例 : 创建函数, 实现传入两个 float, 返回二者之和</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> sumF <span class="token punctuation">(</span>f1 <span class="token keyword">FLOAT</span><span class="token punctuation">,</span> f2 <span class="token keyword">FLOAT</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token keyword">FLOAT</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> res <span class="token keyword">FLOAT</span><span class="token punctuation">;</span>

    <span class="token keyword">select</span> f1 <span class="token operator">+</span> f2 <span class="token keyword">into</span> res<span class="token punctuation">;</span>

    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> sumF<span class="token punctuation">(</span><span class="token number">12.3</span><span class="token punctuation">,</span> <span class="token number">58.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br></div></div><h3 id="流程控制语句"><a href="#流程控制语句" class="header-anchor">#</a> 流程控制语句</h3> <blockquote><p>说明</p></blockquote> <ul><li>顺序结构 : 程序从上往下一次执行</li> <li>分支结构 : 程序按条件进行选择执行, 从两条或多条路径中选择一条执行</li> <li>循环结构 : 程序满足一定条件下, 重复执行一组语句</li></ul> <h4 id="分支结构"><a href="#分支结构" class="header-anchor">#</a> 分支结构</h4> <blockquote><p>if 函数</p></blockquote> <ul><li>功能 : 实现简单的双分支</li> <li>语法 :<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>条件<span class="token punctuation">,</span> 值 <span class="token number">1</span><span class="token punctuation">,</span> 值 <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li>位置 : 可以作为表达式放在任何位置</li></ul> <blockquote><p>case 结构</p></blockquote> <ul><li>功能 : 实现多分支</li> <li>语法 1 :<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">case</span> 表达式或字段
<span class="token keyword">when</span> 值 <span class="token number">1</span> <span class="token keyword">then</span> 语句 <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">when</span> 值 <span class="token number">2</span> <span class="token keyword">then</span> 语句 <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">else</span> 语句 n<span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token punctuation">[</span><span class="token keyword">case</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li>语法 2 :<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">case</span> 
<span class="token keyword">when</span> 条件 <span class="token number">1</span> <span class="token keyword">then</span> 语句 <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">when</span> 条件 <span class="token number">2</span> <span class="token keyword">then</span> 语句 <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">else</span> 语句 n<span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token punctuation">[</span><span class="token keyword">case</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li>位置 : 可以放在任何位置
如果放在 begin end 外面, 作为表达式结合着其他语句使用
如果放在 begin end 里面, 一般作为独立的语句使用</li></ul> <blockquote><p>if 结构</p></blockquote> <ul><li>功能 : 实现多分支</li> <li>语法 :<div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">if</span> 条件 <span class="token number">1</span> <span class="token keyword">then</span> 语句 <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">elseif</span> 条件 <span class="token number">2</span> <span class="token keyword">then</span> 语句 <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">else</span> 语句 n<span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li>位置 : 只能放在 begin end 中</li></ul> <h4 id="循环结构"><a href="#循环结构" class="header-anchor">#</a> 循环结构</h4> <blockquote><p>while</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span>名称 : <span class="token punctuation">]</span> <span class="token keyword">while</span> 循环条件 <span class="token keyword">do</span>
	循环体<span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token keyword">while</span> <span class="token punctuation">[</span>名称<span class="token punctuation">]</span><span class="token punctuation">;</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>loop</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span>名称 : <span class="token punctuation">]</span> <span class="token keyword">loop</span>
	循环体<span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token keyword">loop</span> <span class="token punctuation">[</span>名称<span class="token punctuation">]</span><span class="token punctuation">;</span>	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>repeat</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span>名称 : <span class="token punctuation">]</span> <span class="token keyword">repeat</span>
	循环体<span class="token punctuation">;</span>
until 结束条件<span class="token punctuation">;</span>	
<span class="token keyword">end</span> <span class="token keyword">repeat</span> <span class="token punctuation">[</span>名称<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>循环控制语句</p></blockquote> <ul><li><p>leave : 类似于 break, 用于跳出所在循环</p></li> <li><p>iterate : 类似于 continue, 用户结束本次循环, 继续下一次</p></li> <li><p>位置 : 只能放在 begin end 中</p></li> <li><p>特点 : 都能实现循环结构</p></li> <li><p>对比 :</p> <ul><li>这三种循环都能省略名称, 但如果循环中添加了循环控制语句 (leave 或者 iterate) 则必须添加名称</li> <li>loop 一般用于实现简单的死循环
while 先判断后执行
repeat 先执行后判断, 无条件至少执行一次</li></ul></li></ul> <h4 id="代码-10"><a href="#代码-10" class="header-anchor">#</a> 代码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 流程控制结构</span>

<span class="token comment">/*
 顺序结构 : 程序从上往下一次执行
 分支结构 : 程序从两条或多条路径中选择一条去执行
 循环结构 : 程序在满足一定条件的基础上, 重复执行一段代码

 */</span>

<span class="token comment"># 一. 分支结构</span>

<span class="token comment"># 1. if函数</span>

<span class="token comment">/*
功能 : 实现简单的双分支
语法 :
    IF(表达式 1, 表达式 2, 表达式 3)

    执行顺序 :
        如果表达式 1 成立, 则 if 函数返回表达式 2 的值, 否则返回表达式 3 的值

    应用场景 : 任何地方
 */</span>

<span class="token comment"># 2. case 结构</span>

<span class="token comment">/*
 情况 1 : 类似于 Java 中的 switch 语句, 一般用于实现等值判断

 语法 :
    case 变量 | 表达式 | 字段
    when 要判断的值 then 返回的值 1 或语句 1;
    when 要判断的值 then 返回的值 2 或语句 2;
    ...
    else 要返回的值 n 或语句 n;
    end case;


 情况 2 : 类似于 Java 中的多重 if 语句, 一般用于实现区间判断

 语法 :
    case
    when 条件 1 then 返回的值 1 或语句 1;
    when 条件 2 then 返回的值 2 或语句 2;
    ...
    else 要返回的值 n 或语句 n;
    end case;


 特点 :
    1. 可以作为表达式, 签到在其他语句中使用, 可以放在任何地方, begin end 中或 begin end 外面
       可以作为独立的语句去使用, 只能放在 begin end 中

    2. 如果 when 中的值满足或条件成立, 则执行对应的 then 后面的语句或者值, 并且结束 case
       如果都不满足, 则执行 else 中的语句或值

    3. else 可以省略, 如果 else 省略了, 并且所有的 when 条件都不满足, 则返回 null
 */</span>

<span class="token comment"># 案例 : 创建存储过程, 根据传入的成绩, 显示等级 90 - 100 -&gt; A 80 - 90 -&gt; B 60 - 80 -&gt; C else -&gt; D</span>

<span class="token keyword">create</span> <span class="token keyword">procedure</span> test_case <span class="token punctuation">(</span><span class="token operator">in</span> score <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">case</span>
        <span class="token keyword">when</span> score <span class="token operator">between</span> <span class="token number">90</span> <span class="token operator">and</span> <span class="token number">100</span> <span class="token keyword">then</span> <span class="token keyword">select</span> <span class="token string">'A'</span><span class="token punctuation">;</span>
        <span class="token keyword">when</span> score <span class="token operator">between</span> <span class="token number">80</span> <span class="token operator">and</span> <span class="token number">90</span> <span class="token keyword">then</span> <span class="token keyword">select</span> <span class="token string">'B'</span><span class="token punctuation">;</span>
        <span class="token keyword">when</span> score <span class="token operator">between</span> <span class="token number">60</span> <span class="token operator">and</span> <span class="token number">80</span> <span class="token keyword">then</span> <span class="token keyword">select</span> <span class="token string">'C'</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">select</span> <span class="token string">'D'</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">case</span> <span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> test_case<span class="token punctuation">(</span><span class="token number">59</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment"># 3. if 结构</span>

<span class="token comment">/*
 功能 : 实现多重分支

 语法 :
    if 条件 1 then 语句 1;
    elseif 条件 2 then 语句 2;
    elseif 条件 3 then 语句 3;
    ...
    [else 语句 n;]
    end if;

 应用在 begin end 中
 */</span>

<span class="token comment"># 案例 : 创建存储过程, 根据传入的成绩, 返回等级 90 - 100 -&gt; A 80 - 90 -&gt; B 60 - 80 -&gt; C else -&gt; D</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> test_if <span class="token punctuation">(</span>score <span class="token keyword">INT</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> res <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> score <span class="token operator">between</span> <span class="token number">90</span> <span class="token operator">and</span> <span class="token number">100</span> <span class="token keyword">then</span> <span class="token keyword">select</span> <span class="token string">'A'</span> <span class="token keyword">into</span> res<span class="token punctuation">;</span>
    <span class="token keyword">elseif</span> score <span class="token operator">between</span> <span class="token number">80</span> <span class="token operator">and</span> <span class="token number">90</span> <span class="token keyword">then</span> <span class="token keyword">select</span> <span class="token string">'B'</span> <span class="token keyword">into</span> res<span class="token punctuation">;</span>
    <span class="token keyword">elseif</span> score <span class="token operator">between</span> <span class="token number">60</span> <span class="token operator">and</span> <span class="token number">80</span> <span class="token keyword">then</span> <span class="token keyword">select</span> <span class="token string">'B'</span> <span class="token keyword">into</span> res<span class="token punctuation">;</span>
    <span class="token keyword">else</span> <span class="token keyword">select</span> <span class="token string">'D'</span> <span class="token keyword">into</span> res<span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> res<span class="token punctuation">;</span>

<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> test_if<span class="token punctuation">(</span><span class="token number">69</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 二. 循环结构</span>

<span class="token comment">/*
分类 :
    while
    loop
    repeat

循环控制 :
    iterate 类似于 continue, 继续, 结束本次循环, 继续下一次
    leave 类似于 break, 跳出, 结束当前所在的循环
 */</span>

<span class="token comment"># 1. while</span>

<span class="token comment">/*
 语法 :
    [标签 :] while 循环条件 do
        循环体;
    end while [标签];

 联想 :
    while (循环条件) {
    }
 */</span>

<span class="token comment"># 2. loop</span>

<span class="token comment">/*
 语法 :
    [标签 : ] loop
        循环体
    end loop [标签];

 可以用来模拟简单的死循环
 */</span>

<span class="token comment"># 3. repeat</span>

<span class="token comment">/*
 语法 :
    [标签 : ] repeat
        循环体
    until 结束循环的条件
    end repeat [标签];
 */</span>

<span class="token comment"># 不添加循环控制语句</span>
<span class="token comment"># 案例一 : 批量插入, 根据次数插入到 admin 表中多条数据</span>
<span class="token keyword">drop</span> <span class="token keyword">procedure</span> pro_while1<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">procedure</span> pro_while1 <span class="token punctuation">(</span><span class="token operator">in</span> insertCount <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> i <span class="token keyword">INT</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> i <span class="token operator">&lt;=</span> insertCount <span class="token keyword">do</span>
        <span class="token keyword">insert</span> <span class="token keyword">into</span> admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'yxh'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'666'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span> <span class="token keyword">while</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> pro_while1<span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 案例二 : 添加 leave 语句, 如果次数大于 50 则停止</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> admin<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">procedure</span> pro_while2 <span class="token punctuation">(</span><span class="token operator">in</span> insertCount <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> i <span class="token keyword">INT</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">;</span>
    a: <span class="token keyword">while</span> i <span class="token operator">&lt;=</span> insertCount <span class="token keyword">do</span>
        <span class="token keyword">insert</span> <span class="token keyword">into</span> admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'zst'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'666'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> i <span class="token operator">&gt;=</span> <span class="token number">20</span> <span class="token keyword">then</span> <span class="token keyword">leave</span> a<span class="token punctuation">;</span>
        <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span> <span class="token keyword">while</span> a<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> pro_while2<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 案例三 : 添加 iterate 语句 只插入偶数数据</span>
<span class="token keyword">truncate</span> <span class="token keyword">table</span> admin<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">procedure</span> pro_while3 <span class="token punctuation">(</span><span class="token operator">in</span> insertCount <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
    <span class="token keyword">declare</span> i <span class="token keyword">INT</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
    a: <span class="token keyword">while</span> i <span class="token operator">&lt;=</span> insertCount <span class="token keyword">do</span>
        <span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token function">MOD</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token keyword">then</span> <span class="token keyword">iterate</span> a<span class="token punctuation">;</span>
        <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>

        <span class="token keyword">insert</span> <span class="token keyword">into</span> admin<span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'zst'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'666'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span> <span class="token keyword">while</span> a<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>


<span class="token keyword">call</span> pro_while3<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> admin<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br></div></div><h4 id="练习-6"><a href="#练习-6" class="header-anchor">#</a> 练习</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">/*
 一. 已知表 stringcontent
 其中字段 :
 id 自增长
 content varchar(20)

 向该表插入指定个数的, 随机的支付串
 */</span>
 <span class="token keyword">create</span> <span class="token keyword">table</span> stringcontent <span class="token punctuation">(</span>
     id <span class="token keyword">INT</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
     content <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">procedure</span> test_randomStr_insert<span class="token punctuation">(</span><span class="token operator">in</span> insertCount <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>

    <span class="token keyword">declare</span> i <span class="token keyword">INT</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment"># 定义一个循环变量, 表示插入次数</span>
    <span class="token keyword">declare</span> defaultStr <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'abcdefghijklmnopqrstuvwxyz'</span><span class="token punctuation">;</span>
    <span class="token keyword">declare</span> startIndex <span class="token keyword">INT</span> <span class="token keyword">default</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment"># 代表起始索引</span>
    <span class="token keyword">declare</span> len <span class="token keyword">INT</span> <span class="token keyword">default</span>  <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment"># 代表截取的字符的长度</span>


    <span class="token keyword">while</span> i <span class="token operator">&lt;=</span> insertCount <span class="token keyword">do</span>

        <span class="token keyword">set</span> startIndex <span class="token operator">=</span> FLOOR<span class="token punctuation">(</span>RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">26</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 产生一个随机的整数, 代表起始索引 1 - 26</span>
        <span class="token keyword">set</span> len <span class="token operator">=</span> FLOOR<span class="token punctuation">(</span>RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">-</span> startIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># 产生一个随机的整数, 代表截取长度, 1 - (26 - startIndex + 1)</span>

        <span class="token keyword">insert</span> <span class="token keyword">into</span> stringcontent<span class="token punctuation">(</span>content<span class="token punctuation">)</span>
        <span class="token keyword">values</span> <span class="token punctuation">(</span>SUBSTR<span class="token punctuation">(</span>defaultStr<span class="token punctuation">,</span>startIndex<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">set</span>  i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span> <span class="token keyword">while</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token keyword">call</span> test_randomStr_insert<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stringcontent<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">2022/12/31 下午3:20:26</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blogs/MySQL/MySQL1.html" class="prev">
          MySQL1
        </a></span> <span class="next"><a href="/blogs/MySQL/MySQL3.html">
          MySQL3
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#ddl-语言的学习" class="sidebar-link reco-side-ddl-语言的学习" data-v-b57cc07c>DDL 语言的学习</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#库的管理" class="sidebar-link reco-side-库的管理" data-v-b57cc07c>库的管理</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#表的管理" class="sidebar-link reco-side-表的管理" data-v-b57cc07c>表的管理</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#代码" class="sidebar-link reco-side-代码" data-v-b57cc07c>代码</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#练习" class="sidebar-link reco-side-练习" data-v-b57cc07c>练习</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#数据类型" class="sidebar-link reco-side-数据类型" data-v-b57cc07c>数据类型</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#约束" class="sidebar-link reco-side-约束" data-v-b57cc07c>约束</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#tcl-语言" class="sidebar-link reco-side-tcl-语言" data-v-b57cc07c>TCL 语言</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#事务" class="sidebar-link reco-side-事务" data-v-b57cc07c>事务</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#其他" class="sidebar-link reco-side-其他" data-v-b57cc07c>其他</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#视图" class="sidebar-link reco-side-视图" data-v-b57cc07c>视图</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#变量" class="sidebar-link reco-side-变量" data-v-b57cc07c>变量</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#存储过程和函数" class="sidebar-link reco-side-存储过程和函数" data-v-b57cc07c>存储过程和函数</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/MySQL/MySQL2.html#流程控制语句" class="sidebar-link reco-side-流程控制语句" data-v-b57cc07c>流程控制语句</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div><div class="container" data-v-0178ff65><canvas id="live2d" width="280" height="250" class="live2d-right" data-v-0178ff65></canvas></div><canvas id="vuepress-canvas-cursor"></canvas></div></div>
    <script src="/assets/js/app.85b4c572.js" defer></script><script src="/assets/js/3.f0cbca55.js" defer></script><script src="/assets/js/1.457bae34.js" defer></script><script src="/assets/js/24.d6fe7445.js" defer></script>
  </body>
</html>
